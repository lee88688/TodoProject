(function(e){function t(t){for(var n,i,c=t[0],s=t[1],d=t[2],u=0,p=[];u<c.length;u++)i=c[u],o[i]&&p.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,c=1;c<r.length;c++){var s=r[c];0!==o[s]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/TodoProject/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"000c":function(e,t,r){},"016c":function(e,t,r){"use strict";var n=r("0d11"),o=r.n(n);o.a},"0d11":function(e,t,r){},"153c":function(e,t,r){"use strict";var n=r("cf6c"),o=r.n(n);o.a},2281:function(e,t,r){"use strict";var n=r("855a"),o=r.n(n);o.a},"2b43":function(e,t,r){"use strict";var n=r("cd5f"),o=r.n(n);o.a},"3d1a":function(e,t,r){"use strict";var n=r("9c05"),o=r.n(n);o.a},"3d36":function(e,t,r){"use strict";var n=r("cdbd"),o=r.n(n);o.a},4554:function(e,t,r){"use strict";var n=r("ee17"),o=r.n(n);o.a},"49d1":function(e,t,r){},5115:function(e,t,r){"use strict";var n=r("c094"),o=r.n(n);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e623"),r("e379"),r("5dc8"),r("37e1");var n=r("2b0e"),o=r("f309"),a=r("5025"),i=r.n(a),c=r("da5b"),s=r.n(c);n["a"].use(o["a"]);var d=new o["a"]({lang:{locales:{en:s.a,"zh-CN":i.a},current:navigator.language},icons:{iconfont:"mdi"}}),l=r("a925"),u={search:"搜索",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",days:{yesterday:"昨天",today:"今天",tomorrow:"明天",week:{monday:"星期一",tuesday:"星期二",wednesday:"星期三",thursday:"星期四",friday:"星期五",saturday:"星期六",sunday:"星期日"}},todoView:{star:"标星",today:"今天",thisWeek:"本周",addNewTask:"添加新任务",displayCompleteTask:"显示已完成任务",hideCompleteTask:"隐藏已完成任务",folderMenu:{folderConfig:"文件夹选项",deleteFolder:"删除文件夹",deleteFolderDialogContent:"是否删除文件夹？"}},projectView:{projectMenu:{projectConfig:"工程选项",deleteProject:"删除工程",deleteProjectContent:"是否删除该项目？",deleteProjectAndFolders:"删除工程及其文件夹",deleteProjectAndFoldersContent:"是否删除该项目及其文件夹？"},folderMenu:{folderConfig:"文件夹选项",deleteFolder:"删除文件夹",deleteFolderContent:"@:todoView.folderMenu.deleteFolderDialogContent"},todoMenu:{markAsComplete:"标记为完成",deleteTask:"删除任务",deleteTaskContent:"是否删除当前任务？"}},globalAction:{config:{add:"添加",modify:"修改",tabFolder:"文件夹",folderName:"文件夹名称",selectProject:"选择工程",tabProject:"工程",projectName:"工程名称"}},sideBar:{dateSetting:{name:"时间",expiredDate:"设置日期",remindTime:"设置提醒时间",repeatDefault:"从不重复",repeatOption:{day:"按天",week:"按周",month:"按月",year:"按年"}},subtask:{name:"子任务",add:"添加子任务"},remark:"备注",comment:{name:"评论"}}},p={search:"Search",save:"Save",confirm:"Confirm",cancel:"Cancel",delete:"Delete",days:{yesterday:"Yesterday",today:"Today",tomorrow:"Tomorrow",week:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},todoView:{star:"Star",today:"Today",thisWeek:"This week",addNewTask:"Add new task",displayCompleteTask:"Display Complete Task",hideCompleteTask:"Hide Complete Task",folderMenu:{folderConfig:"Folder config",deleteFolder:"Delete folder",deleteFolderDialogContent:"Whether to delete the folder?"}},projectView:{projectMenu:{projectConfig:"Project config",deleteProject:"Delete project",deleteProjectContent:"Whether to delete the project?",deleteProjectAndFolders:"Delete project and its folders",deleteProjectAndFoldersContent:"Whether to delete the project and its folders?"},folderMenu:{folderConfig:"Folder config",deleteFolder:"Delete folder",deleteFolderContent:"@:todoView.folderMenu.deleteFolderDialogContent"},todoMenu:{markAsComplete:"Mark as complete",deleteTask:"Delete task",deleteTaskContent:"Whether to delete the task?"}},globalAction:{config:{add:"Add",modify:"Modify",tabFolder:"Folder",folderName:"Folder name",selectProject:"Select Project",tabProject:"Project",projectName:"Project name"}},sideBar:{dateSetting:{name:"Time",expiredDate:"Set Date",remindTime:"Set remind time",repeatDefault:"Never repeat",repeatOption:{day:"By day",week:"By week",month:"By month",year:"By year"}},subtask:{name:"Subtask",add:"Add subtask"},remark:"remark",comment:{name:"Comment"}}},f={"zh-CN":u,en:p};n["a"].use(l["a"]);var m=new l["a"]({locale:navigator.language,fallbackLocale:"en",messages:f}),h={install:function(e,t){e.prototype.$bus=new e}};n["a"].use(h);r("96cf");var v=r("1da1"),b=(r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),r("668b")),g=r("0581"),O=[{dbVersion:0,upgradeCallback:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,r,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.createObjectStore("todos",{keyPath:"id"}),t.createObjectStore("archive",{keyPath:"id"}),t.createObjectStore("folders",{keyPath:"id"}),t.createObjectStore("projects",{keyPath:"id"}),t.createObjectStore("users",{keyPath:"id"}),o=t.createObjectStore("user"),e.next=8,o.transaction.done;case 8:return o=t.transaction("user","readwrite").objectStore("user"),o.put("","name"),o.put([],"projectList"),o.put([],"folderList"),e.next=14,o.transaction.done;case 14:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()}],j="TodoProject",y=2;function k(){return w.apply(this,arguments)}function w(){return w=Object(v["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["a"])(j,y,{upgrade:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,r,n,o){var a,i,c,s,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=!0,i=!1,c=void 0,e.prev=3,s=O[Symbol.iterator]();case 5:if(a=(d=s.next()).done){e.next=14;break}if(l=d.value,l.dbVersion!==r){e.next=11;break}return e.next=10,l.upgradeCallback(t,r,n);case 10:return e.abrupt("break",14);case 11:a=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](3),i=!0,c=e.t0;case 20:e.prev=20,e.prev=21,a||null==s.return||s.return();case 23:if(e.prev=23,!i){e.next=26;break}throw c;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[3,16,20,28],[21,,23,27]])})));function t(t,r,n,o){return e.apply(this,arguments)}return t}()});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var T={instance:null,initStart:!1,getInstance:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.instance){e.next=2;break}return e.abrupt("return",this.instance);case 2:if(!this.initStart){e.next=5;break}return t=500,e.abrupt("return",new Promise((function(e,r){var o=n,a=5,i=function n(){null!==o.instance?e(o.instance):a?(a--,setTimeout(n,t)):r(new Error("init indexedDB error"))};setTimeout(i,t)})));case 5:return this.initStart=!0,r=null,e.prev=7,e.next=10,k();case 10:r=e.sent,e.next=18;break;case 13:throw e.prev=13,e.t0=e["catch"](7),this.initStart=!1,console.error(e.t0),e.t0;case 18:return this.instance=r,this.initStart=!1,e.abrupt("return",this.instance);case 21:case"end":return e.stop()}}),e,this,[[7,13]])})));function t(){return e.apply(this,arguments)}return t}()};function C(e){return x.apply(this,arguments)}function x(){return x=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.getInstance();case 2:return r=e.sent,e.next=5,r.put("archive",t);case 5:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function _(e){return D.apply(this,arguments)}function D(){return D=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.getInstance();case 2:return r=e.sent,e.next=5,r.delete("archive",t);case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(e){return E.apply(this,arguments)}function E(){return E=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.getInstance();case 2:return r=e.sent,e.next=5,r.get("archive",t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function S(e){return F.apply(this,arguments)}function F(){return F=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,c,s,d,l,u,p,f,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.getInstance();case 2:r=e.sent,n=r.transaction(["archive"]),o=[],a=!0,i=!1,e.prev=7,s=Object(b["a"])(n.objectStore("archive"));case 9:return e.next=11,s.next();case 11:return d=e.sent,a=d.done,e.next=15,d.value;case 15:if(l=e.sent,a){e.next=32;break}u=l,p=u.value,f=!0,e.t0=regeneratorRuntime.keys(t);case 21:if((e.t1=e.t0()).done){e.next=28;break}if(m=e.t1.value,m in p&&p[m]===t[m]){e.next=26;break}return f=!1,e.abrupt("break",28);case 26:e.next=21;break;case 28:f&&o.push(p);case 29:a=!0,e.next=9;break;case 32:e.next=38;break;case 34:e.prev=34,e.t2=e["catch"](7),i=!0,c=e.t2;case 38:if(e.prev=38,e.prev=39,a||null==s.return){e.next=43;break}return e.next=43,s.return();case 43:if(e.prev=43,!i){e.next=46;break}throw c;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return e.abrupt("return",o);case 49:case"end":return e.stop()}}),e,null,[[7,34,38,48],[39,,43,47]])}))),F.apply(this,arguments)}var V={install:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.getInstance();case 2:r=e.sent,window.db=r,t.prototype.$db=r;case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};n["a"].use(V);r("99af"),r("4160"),r("b0c0"),r("6062"),r("159b");var L=r("b8ce"),I=r.n(L),R=r("2f62"),A=(r("4de4"),r("7db0"),r("c740"),r("a434"),r("0d03"),r("e439"),r("dbb4"),r("b64b"),r("38cf"),r("2909")),$=r("ade3"),N=r("c437"),M=r.n(N),H=r("5a0c"),Y=r.n(H),B=r("0644"),G=r.n(B),W=r("6747"),U=r.n(W);r("d4ec"),r("bee2");function J(e,t){console.warn("".concat(e,": some key(").concat(t,") is missing!"))}function q(e,t){var r=e.findIndex(t);r>=0&&e.splice(r,1)}function z(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]}))}function K(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function X(e,t,r){return r.getTime()>=e.getTime()&&r.getTime()<=t.getTime()}var Q=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Z(e){var t=e.getDay();return Q[t]}var ee=["day","week","month","year"];function te(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(e){case"day":case"week":case"month":case"year":return Y()(t).add(r,e).$d;default:throw new Error("period name is not valid.")}}var re,ne="YYYY-MM-DD HH:mm",oe="YYYY-MM-DD";function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce={ADD_FOLDER:"ADD_FOLDER",MODIFY_FOLDER:"MODIFY_FOLDER",DELETE_FOLDER:"DELETE_FOLDER",ADD_TODO:"ADD_TODO",MODIFY_TODO:"MODIFY_TODO",DELETE_TODO:"DELETE_TODO",SWITCH_MINI_FOLDER_LIST:"SWITCH_MINI_FOLDER_LIST",SWITCH_TODO_VIEW:"SWITCH_TODO_VIEW",ADD_PROJECT:"ADD_PROJECT",MODIFY_PROJECT:"MODIFY_PROJECT",DELETE_PROJECT:"DELETE_PROJECT",MODIFY_FOLDER_LIST:"MODIFY_FOLDER_LIST",MODIFY_PROJECT_LIST:"MODIFY_PROJECT_LIST"},se={};for(var de in ce)se[de]="user/".concat(ce[de]);var le,ue,pe={namespaced:!0,state:{id:"",name:"",projectList:[],folderList:[],lastModifiedTime:null,token:"",isTodoView:!0,showMiniFolderListView:!1,folders:{},projects:{},todos:{}},getters:{userInfo:function(e){return{id:e.id,name:e.name}},projectInfo:function(e){return function(t){var r=e.projects[t];if(!r)throw new Error("project id not found");var n=r.id,o=r.name;return{id:n,name:o}}},folderInfo:function(e){return function(t){var r=e.folders[t];if(!r)throw new Error("folder id not found");var n=r.id,o=r.name,a=r.project;return{id:n,name:o,project:a}}}},mutations:(re={},Object($["a"])(re,ce.ADD_FOLDER,(function(e,t){"id"in t?e.folders=ie({},e.folders,Object($["a"])({},t.id,t)):J(ce.ADD_FOLDER,"id")})),Object($["a"])(re,ce.MODIFY_FOLDER,(function(e,t){var r=e.folders[t.id];r&&(r=ie({},r,{},t),z(r),e.folders=ie({},e.folders,Object($["a"])({},r.id,r)))})),Object($["a"])(re,ce.DELETE_FOLDER,(function(e,t){t in e.folders&&n["a"].delete(e.folders,t)})),Object($["a"])(re,ce.ADD_TODO,(function(e,t){"id"in t&&"folder"in t?e.todos=ie({},e.todos,Object($["a"])({},t.id,t)):J(ce.ADD_TODO,"id, folder")})),Object($["a"])(re,ce.MODIFY_TODO,(function(e,t){var r=e.todos[t.id];r&&(r=ie({},r,{},t),z(r),e.todos=ie({},e.todos,Object($["a"])({},r.id,r)))})),Object($["a"])(re,ce.DELETE_TODO,(function(e,t){t in e.todos&&n["a"].delete(e.todos,t)})),Object($["a"])(re,ce.SWITCH_MINI_FOLDER_LIST,(function(e){e.showMiniFolderListView=!e.showMiniFolderListView})),Object($["a"])(re,ce.SWITCH_TODO_VIEW,(function(e,t){e.isTodoView=!!t})),Object($["a"])(re,ce.ADD_PROJECT,(function(e,t){"id"in t?e.projects=ie({},e.projects,Object($["a"])({},t.id,t)):J(ce.ADD_PROJECT,"id")})),Object($["a"])(re,ce.MODIFY_PROJECT,(function(e,t){var r=e.projects[t.id];r&&(r=ie({},r,{},t),z(r),e.projects=ie({},e.projects,Object($["a"])({},r.id,r)))})),Object($["a"])(re,ce.DELETE_PROJECT,(function(e,t){if(t in e.projects){var r=e.projectList.findIndex((function(e){return e===t}));r>=0&&e.projectList.splice(r,1);var o=e.projects[t].folders;o.forEach((function(t){t in e.folders&&n["a"].delete(e.folders[t],"project")})),n["a"].delete(e.projects,t)}})),Object($["a"])(re,ce.MODIFY_FOLDER_LIST,(function(e,t){var r;U()(t)&&(r=e.folderList).splice.apply(r,[0,e.folderList.length].concat(Object(A["a"])(t)))})),Object($["a"])(re,ce.MODIFY_PROJECT_LIST,(function(e,t){var r;U()(t)&&(r=e.projectList).splice.apply(r,[0,e.projectList.length].concat(Object(A["a"])(t)))})),re),actions:{addTodo:function(e,t){var r=e.commit,n=e.dispatch;"id"in t||(t.id=M()()),r(ce.ADD_TODO,t),n("appendTodoToFolder",{todo:t.id,folder:t.folder})},modifyTodo:function(e,t){var r=e.commit,n=e.state,o=e.dispatch;if(t.id){var a=n.todos[t.id].folder;if(r(ce.MODIFY_TODO,G()(t)),t=I()(t),"folder"in t){var i=n.folders[t.folder];i&&!i.undos.find((function(e){return e===t.id}))&&(a&&o("removeTodoFromFolder",{todo:t.id,folder:a}),o("appendTodoToFolder",{todo:t.id,folder:t.folder}))}}},deleteTodo:function(e,t){var r=e.commit,n=e.dispatch,o=e.state;t in o.todos&&(n("removeTodoFromFolder",{todo:t,folder:o.todos[t].folder}),r(ce.DELETE_TODO,t))},markTodoAsDone:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,r){var n,o,a,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,o=t.state,e.next=3,n("modifyTodo",{id:r,complete:!0});case 3:if(a=G()(o.todos[r]),!a.expired_date||!a.repeat){e.next=24;break}a.id=M()(),e.prev=6,c=te(a.repeat,new Date(a.expired_date)),a.remind_time&&(i=te(a.repeat,new Date(a.remind_time))),c=Y()(c).format(oe),i&&(i=Y()(i).format(ne)),s={id:r,complete:!1,expired_date:c},i&&(s.remind_time=i),e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](6),e.next=19,n("modifyTodo",{id:r,complete:!1});case 19:return e.abrupt("return");case 20:return e.next=22,n("modifyTodo",s);case 22:e.next=26;break;case 24:return e.next=26,n("deleteTodo",r);case 26:return e.next=28,C(a);case 28:case"end":return e.stop()}}),e,null,[[6,15]])})));function t(t,r){return e.apply(this,arguments)}return t}(),markTodoAsUndone:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,e.next=3,P(r);case 3:return o=e.sent,e.next=6,n("addTodo",o);case 6:return e.next=8,n("modifyTodo",{id:r,complete:!1});case 8:return e.next=10,_(r);case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),addFolder:function(e,t){var r=e.commit,n=e.dispatch,o=M()();t.id=o,t.undos=[],r(ce.ADD_FOLDER,t),n("appendFolderToFolderList",o),"project"in t&&n("appendFolderToProject",{folder:o,project:t.project})},modifyFolder:function(e,t){var r=e.commit,n=e.state,o=e.dispatch;if(t.id&&t.id in n.folders&&(r(ce.MODIFY_FOLDER,t),"project"in t)){var a=n.projects[t.project];if(a&&!a.folders.find((function(e){return e===t.id}))){var i=n.folders[t.id].project;i&&o("removeFolderFromProject",{folder:t.id,project:t.project}),o("appendFolderToProject",{folder:t.id,project:t.project})}}},deleteFolder:function(e,t){var r=e.commit,n=e.dispatch,o=e.state;if(t in o.folders){n("removeFolderFromFolderList",t);var a=o.folders[t].project;a&&n("removeFolderFromProject",{project:a,folder:t});var i=o.folders[t].undos;r(ce.DELETE_FOLDER,t),i.forEach((function(e){return r(ce.DELETE_TODO,e)}))}},appendTodoToFolder:function(e,t){e.commit;var r=e.state,n=e.dispatch,o=t.todo,a=t.folder;if(a in r.folders){var i=[].concat(Object(A["a"])(r.folders[a].undos),[o]);n("modifyFolder",{id:a,undos:i})}},removeTodoFromFolder:function(e,t){e.commit;var r=e.state,n=e.dispatch,o=t.todo,a=t.folder;if(o in r.todos&&a in r.folders){var i=I()(r.folders[a].undos);q(i,(function(e){return e===o})),n("modifyFolder",{id:a,undos:i})}},addProject:function(e,t){var r=e.commit,n=e.dispatch;t.id=M()(),t.folders=[],r(ce.ADD_PROJECT,t),n("appendProjectToProjectList",t.id)},modifyProject:function(e,t){var r=e.commit;t.id&&r(ce.MODIFY_PROJECT,t)},deleteProject:function(e,t){var r=e.commit,n=e.state,o=e.dispatch,a=t.project,i=t.deleteSubs;if(a in n.projects){var c=[];!0===i&&(c=n.projects[a].folders),n.projects[a].folders.forEach((function(e){o("modifyFolder",{id:e,project:void 0})})),o("removeProjectFromProjectList",a),r(ce.DELETE_PROJECT,a),c.forEach((function(e){return o("deleteFolder",e)}))}},appendFolderToProject:function(e,t){var r=e.state,n=e.dispatch,o=t.folder,a=t.project;if(o in r.folders||a in r.projects){var i=r.projects[a],c=[].concat(Object(A["a"])(i.folders),[o]);n("modifyProject",{id:a,folders:c})}},removeFolderFromProject:function(e,t){var r=e.state,n=e.dispatch,o=t.folder,a=t.project;if(o in r.folders||a in r.projects){var i=I()(r.projects[a].folders);q(i,(function(e){return e===o})),n("modifyProject",{id:a,folders:i})}},modifyFolderList:function(e,t){var r=e.commit;r(ce.MODIFY_FOLDER_LIST,t)},appendFolderToFolderList:function(e,t){var r=e.dispatch,n=e.state,o=[].concat(Object(A["a"])(n.folderList),[t]);r("modifyFolderList",o)},removeFolderFromFolderList:function(e,t){var r=e.state,n=e.dispatch,o=Object(A["a"])(r.folderList);q(o,(function(e){return e===t})),n("modifyFolderList",o)},modifyProjectList:function(e,t){var r=e.commit;r(ce.MODIFY_PROJECT_LIST,t)},appendProjectToProjectList:function(e,t){var r=e.dispatch,n=e.state,o=[].concat(Object(A["a"])(n.projectList),[t]);r("modifyProjectList",o)},removeProjectFromProjectList:function(e,t){var r=e.dispatch,n=e.state,o=Object(A["a"])(n.projectList);q(o,(function(e){return e===t})),r("modifyProjectList",o)},switchMiniFolderListView:function(e){var t=e.commit;t(ce.SWITCH_MINI_FOLDER_LIST)},switchTodoView:function(e,t){var r=e.commit;r(ce.SWITCH_TODO_VIEW,t)}}},fe=(r("caad"),r("d81d"),r("e25e"),r("2532"),r("4d8c")),me=r.n(fe),he={CHANGE_CURRENT_FOLDER:"CHANGE_CURRENT_FOLDER"},ve={namespaced:!0,state:{specialList:{start:!1,today:!1,thisWeek:!1},currentFolder:""},getters:{folders:function(e,t,r){var n=r.user.folderList;return n.map((function(e){var t=r.user.folders[e],n=t.name;if(t.project&&t.project in r.user.projects){var o=r.user.projects[t.project].name;n="".concat(o,"/").concat(n)}var a=t.id,i=t.undos.length;return{id:a,name:n,undoNumber:i}}))},starFolderTodos:function(e,t,r){console.log("star");var n=r.user.folderList;return n.map((function(e){var t=r.user.folders[e].name,n=r.user.folders[e].undos.map((function(e){return r.user.todos[e]})).filter((function(e){return e.star}));return{name:t,todos:n}})).filter((function(e){var t=e.todos;return t.length}))},searchFolderTodos:function(e,t,r){var n=r.globalAction.palette.input,o=r.user.folderList;return o.map((function(e){var t=r.user.folders[e].name,o=r.user.folders[e].undos.map((function(e){return r.user.todos[e]})).filter((function(e){return e.name.includes(n)}));return{name:t,todos:o}})).filter((function(e){var t=e.todos;return t.length}))},todayFolderTodos:function(e,t,r){var n=r.user.folderList;return n.map((function(e){var t=r.user.folders[e].name,n=r.user.folders[e].undos.map((function(e){return r.user.todos[e]})).filter((function(e){var t=new Date,r=new Date(e.expired_date);return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}));return{name:t,todos:n}})).filter((function(e){var t=e.todos;return t.length}))},thisWeekFolderTodos:function(e,t,r){var n=new Date;n.setHours(0,0,0,0);var o=new Date;o.setDate(o.getDate()+7);for(var a=[],i={},c=0;c<7;c++){var s=new Date;s.setDate(s.getDate()+c),i[s.getDate()]=c;var d={name:Z(s),todos:[]};0===c?d.name="今天":1===c&&(d.name="明天"),a.push(d)}var l=r.user.folderList;return me()(l.map((function(e){return r.user.folders[e].undos.map((function(e){return r.user.todos[e]})).filter((function(e){return!!e.expired_date&&X(n,o,new Date(e.expired_date))}))}))).map((function(e){var t=parseInt(e.expired_date.substring(e.expired_date.length-2)),r=i[t];a[r].todos.push(e)})),a.filter((function(e){var t=e.todos;return t.length>0}))},todos:function(e,t,r,n){if(n["globalAction/searchValid"]&&r.user.isTodoView)return t.searchFolderTodos;switch(e.currentFolder){case"star":return t.starFolderTodos;case"today":return t.todayFolderTodos;case"thisWeek":return t.thisWeekFolderTodos;default:if(e.currentFolder in r.user.folders)break;return[]}var o=r.user.folders[e.currentFolder];return[{name:"",todos:o.undos.map((function(e){return r.user.todos[e]}))}]}},mutations:Object($["a"])({},he.CHANGE_CURRENT_FOLDER,(function(e,t){e.currentFolder=t})),actions:{changeFolder:function(e,t){var r=e.commit;"string"===typeof t&&r(he.CHANGE_CURRENT_FOLDER,t)}}},be={CHANGE_DETAIL_VIEW_VISIBLE:"CHANGE_DETAIL_VIEW_VISIBLE",CHANGE_CURRENT_TODO:"CHANGE_CURRENT_TODO",CHANGE_CURRENT_COMPLETE_TODO:"CHANGE_CURRENT_COMPLETE_TODO",CHANGE_CURRENT_COMPLETE_TODO_TYPE:"CHANGE_CURRENT_COMPLETE_TODO_TYPE"},ge={NORMAL:"NORMAL",COMPLETE:"COMPLETE"},Oe={namespaced:!0,state:{showDetailView:!1,currentTodo:"",currentTodoType:ge.NORMAL,currentCompleteTodo:""},getters:{isCompleteTodo:function(e){return e.currentTodoType===ge.COMPLETE}},mutations:(le={},Object($["a"])(le,be.CHANGE_DETAIL_VIEW_VISIBLE,(function(e,t){e.showDetailView=!!t})),Object($["a"])(le,be.CHANGE_CURRENT_TODO,(function(e,t){"string"===typeof t&&(e.currentTodo=t)})),Object($["a"])(le,be.CHANGE_CURRENT_COMPLETE_TODO,(function(e,t){e.currentCompleteTodo=t})),Object($["a"])(le,be.CHANGE_CURRENT_COMPLETE_TODO_TYPE,(function(e,t){e.currentTodoType=t})),le),actions:{changeDetailViewVisible:function(e,t){var r=e.commit;r(be.CHANGE_DETAIL_VIEW_VISIBLE,t)},changeCurrentTodo:function(e,t){var r=e.commit,n=e.state;n.currentTodoType===ge.COMPLETE&&r(be.CHANGE_CURRENT_COMPLETE_TODO_TYPE,ge.NORMAL),r(be.CHANGE_CURRENT_TODO,t)},changeCurrentCompleteTodo:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,r){var n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=t.state,o.currentTodoType===ge.NORMAL&&n(be.CHANGE_CURRENT_COMPLETE_TODO_TYPE,ge.COMPLETE),e.next=4,P(r);case 4:a=e.sent,n(be.CHANGE_CURRENT_COMPLETE_TODO,a);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}},je={CHANGE_CURRENT_PROJECT:"CHANGE_CURRENT_PROJECT"},ye={namespaced:!0,state:{currentProject:""},getters:{projects:function(e,t,r){var n=r.user.projectList;return n.map((function(e){var t=r.user.projects[e],n=t.id,o=t.name;return{id:n,name:o}}))},currentProjectFolders:function(e,t,r){var n=r.user.projects[e.currentProject];return n?n.folders.map((function(e){var t=r.user.folders[e],n=t.id,o=t.name;return{id:n,name:o}})):[]}},mutations:Object($["a"])({},je.CHANGE_CURRENT_PROJECT,(function(e,t){e.currentProject=t})),actions:{changeCurrentProject:function(e,t){var r=e.commit;"string"===typeof t&&r(je.CHANGE_CURRENT_PROJECT,t)}}},ke=(r("ac1f"),r("841c"),{CHANGE_PALETTE:"CHANGE_PALETTE",CHANGE_SEARCH_STATUS:"CHANGE_SEARCH_STATUS"}),we={namespaced:!0,state:{palette:{show:!1,prependIcon:"mdi-cloud-search-outline",appendIcon:"",placeholder:"",input:"",inputKey:"",extra:""},search:{isSearch:!1}},getters:{paletteShow:function(e){return e.palette.show},searchValid:function(e){return e.search.isSearch&&!!e.palette.input}},mutations:(ue={},Object($["a"])(ue,ke.CHANGE_PALETTE,(function(e,t){for(var r in t)t.hasOwnProperty(r)&&r in e.palette&&(e.palette[r]=t[r])})),Object($["a"])(ue,ke.CHANGE_SEARCH_STATUS,(function(e,t){e.search.isSearch=t.isSearch})),ue),actions:{changePaletteInput:function(e,t){var r=e.commit;r(ke.CHANGE_PALETTE,{input:t})},changePaletteShow:function(e,t){var r=e.commit;r(ke.CHANGE_PALETTE,{show:t})},clearPaletteExtra:function(e){var t=e.commit;t(ke.CHANGE_PALETTE,{extra:""})},startSearch:function(e){var t=e.commit;t(ke.CHANGE_PALETTE,{show:!0,input:"",prependIcon:"mdi-cloud-search-outline",appendIcon:"",placeholder:"请输入搜索关键词"}),t(ke.CHANGE_SEARCH_STATUS,{isSearch:!0})},startAddingNew:function(e,t){var r=e.commit,n=t.placeholder,o=t.extra;r(ke.CHANGE_PALETTE,{show:!0,prependIcon:"mdi-plus",appendIcon:"mdi-send",placeholder:n,input:"",extra:o})},clearSearchMode:function(e){var t=e.commit,r=e.state;r.search.isSearch&&t(ke.CHANGE_SEARCH_STATUS,{isSearch:!1})}}};function Te(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,c,s,d,l,u,p,f,m,h,v,g,O,j,y,k,w,C,x,_,D;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Te.isReady=!1,e.next=3,T.getInstance();case 3:r=e.sent,n=r.transaction(["folders","todos","projects"]),o=!0,a=!1,e.prev=7,c=Object(b["a"])(n.objectStore("todos"));case 9:return e.next=11,c.next();case 11:return s=e.sent,o=s.done,e.next=15,s.value;case 15:if(d=e.sent,o){e.next=22;break}l=d,t.commit(se.ADD_TODO,l.value);case 19:o=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](7),a=!0,i=e.t0;case 28:if(e.prev=28,e.prev=29,o||null==c.return){e.next=33;break}return e.next=33,c.return();case 33:if(e.prev=33,!a){e.next=36;break}throw i;case 36:return e.finish(33);case 37:return e.finish(28);case 38:u=!0,p=!1,e.prev=40,m=Object(b["a"])(n.objectStore("folders"));case 42:return e.next=44,m.next();case 44:return h=e.sent,u=h.done,e.next=48,h.value;case 48:if(v=e.sent,u){e.next=55;break}g=v,t.commit(se.ADD_FOLDER,g.value);case 52:u=!0,e.next=42;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e["catch"](40),p=!0,f=e.t1;case 61:if(e.prev=61,e.prev=62,u||null==m.return){e.next=66;break}return e.next=66,m.return();case 66:if(e.prev=66,!p){e.next=69;break}throw f;case 69:return e.finish(66);case 70:return e.finish(61);case 71:O=!0,j=!1,e.prev=73,k=Object(b["a"])(n.objectStore("projects"));case 75:return e.next=77,k.next();case 77:return w=e.sent,O=w.done,e.next=81,w.value;case 81:if(C=e.sent,O){e.next=88;break}x=C,t.commit(se.ADD_PROJECT,x.value);case 85:O=!0,e.next=75;break;case 88:e.next=94;break;case 90:e.prev=90,e.t2=e["catch"](73),j=!0,y=e.t2;case 94:if(e.prev=94,e.prev=95,O||null==k.return){e.next=99;break}return e.next=99,k.return();case 99:if(e.prev=99,!j){e.next=102;break}throw y;case 102:return e.finish(99);case 103:return e.finish(94);case 104:return e.next=106,r.get("user","projectList");case 106:return _=e.sent,t.commit(se.MODIFY_PROJECT_LIST,_),e.next=110,r.get("user","folderList");case 110:return D=e.sent,t.commit(se.MODIFY_FOLDER_LIST,D),e.next=114,n.done;case 114:Te.isReady=!0;case 115:case"end":return e.stop()}}),e,null,[[7,24,28,38],[29,,33,37],[40,57,61,71],[62,,66,70],[73,90,94,104],[95,,99,103]])}))),Ce.apply(this,arguments)}function xe(e){return _e.apply(this,arguments)}function _e(){return _e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Te.ready();case 2:return e.next=4,T.getInstance();case 4:r=e.sent,t.subscribe(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(n){var o,a,i,c,s,d,l,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=n.type,e.next=e.t0===se.MODIFY_FOLDER_LIST?3:e.t0===se.MODIFY_PROJECT_LIST?6:e.t0===se.ADD_TODO?9:e.t0===se.MODIFY_TODO?9:e.t0===se.DELETE_TODO?14:e.t0===se.ADD_FOLDER?18:e.t0===se.MODIFY_FOLDER?18:e.t0===se.DELETE_FOLDER?23:e.t0===se.ADD_PROJECT?27:e.t0===se.MODIFY_PROJECT?27:e.t0===se.DELETE_PROJECT?32:36;break;case 3:return e.next=5,r.put("user",n.payload,"folderList");case 5:return e.abrupt("break",37);case 6:return e.next=8,r.put("user",n.payload,"projectList");case 8:return e.abrupt("break",37);case 9:return o=n.payload.id,a=t.state.user.todos[o],e.next=13,r.put("todos",a);case 13:return e.abrupt("break",37);case 14:return i=n.payload,e.next=17,r.delete("todos",i);case 17:return e.abrupt("break",37);case 18:return c=n.payload.id,s=t.state.user.folders[c],e.next=22,r.put("folders",s);case 22:return e.abrupt("break",37);case 23:return d=n.payload,e.next=26,r.delete("folders",d);case 26:return e.abrupt("break",37);case 27:return l=n.payload.id,u=t.state.user.projects[l],e.next=31,r.put("projects",u);case 31:return e.abrupt("break",37);case 32:return p=n.payload,e.next=35,r.delete("projects",p);case 35:return e.abrupt("break",37);case 36:return e.abrupt("break",37);case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)}))),_e.apply(this,arguments)}Te.ready=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=500,r=function r(){Te.isReady?e(Te.isReady):setTimeout(r,t)};setTimeout(r,t)})));case 1:case"end":return e.stop()}}),e)}))),n["a"].use(R["a"]);var De=new R["a"].Store({state:{},mutations:{},actions:{},modules:{user:pe,todoView:ve,detailView:Oe,projectView:ye,globalAction:we},plugins:[Te,xe]});function Pe(){var e=De.state.user.folderList;e.forEach((function(e){var t=De.state.user.folders[e],r=new Set;if(t){var n=e;t.undos&&t.undos.forEach((function(e){var t=De.state.user.todos[e];t?t.folder!==n&&(console.log("todo: ".concat(t.name,"(").concat(t.id,"), change ").concat(t.folder," to ").concat(n)),De.commit(se.MODIFY_TODO,{id:t.id,folder:n})):(console.log("remove unknown todo: ".concat(e)),r.add(e))}))}if(r.size){var o=I()(t.undos),a=[],i=!0,c=!1,s=void 0;try{for(var d,l=o[Symbol.iterator]();!(i=(d=l.next()).done);i=!0){var u=d.value;r.has(u)||a.push(u)}}catch(p){c=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}De.commit(se.MODIFY_FOLDER,{id:e,undos:a})}}))}window.folderDependencyCheck=Pe;var Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("router-view")],1)},Se=[],Fe={name:"App"},Ve=Fe,Le=(r("5c0b"),r("2877")),Ie=r("6544"),Re=r.n(Ie),Ae=r("7496"),$e=Object(Le["a"])(Ve,Ee,Se,!1,null,null,null),Ne=$e.exports;Re()($e,{VApp:Ae["a"]});var Me=r("8c4f"),He=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0",staticStyle:{height:"100%"},attrs:{fluid:""}},[r("v-layout",{attrs:{"fill-height":""}},[r("v-flex",{staticClass:"left-folder-list"},[r("sidebar")],1),r("v-flex",{staticStyle:{overflow:"hidden"}},[r("router-view")],1),r("v-flex",{staticClass:"right-todo-detail"},[r("router-view",{attrs:{name:"todoDetail"}})],1)],1),r("v-snackbar",{staticClass:"folder-snackbar",attrs:{top:"",color:"transparent",timeout:0},model:{value:e.palette.show,callback:function(t){e.$set(e.palette,"show",t)},expression:"palette.show"}},[r("v-text-field",{attrs:{"prepend-inner-icon":e.palette.prependIcon,"append-icon":e.palette.appendIcon,placeholder:e.palette.placeholder,solo:"","hide-details":"",autofocus:""},on:{keyup:e.paletteKeyUp,"click:append":e.appendClick},model:{value:e.paletteInput,callback:function(t){e.paletteInput=t},expression:"paletteInput"}})],1)],1)},Ye=[],Be=r("b047c"),Ge=r.n(Be),We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{staticStyle:{height:"100%"},attrs:{column:""}},[r("v-toolbar",{staticStyle:{flex:"0 0 auto"},attrs:{flat:"",dense:"",dark:"",color:"blue-grey darken-1"}},[r("v-app-bar-nav-icon",{class:{"toolbar-side-icon-mini":e.showMiniFolderListView},on:{click:e.switchMiniFolderListView}}),e.showMiniFolderListView?e._e():[r("v-spacer"),r("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:e.addNewClick}},[r("v-icon",[e._v("mdi-plus")])],1),r("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:e.startSearch}},[r("v-icon",[e._v("mdi-folder-search")])],1),r("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:e.switchButtonClick}},[r("v-icon",[e._v(e._s(e.switchButtonIcon))])],1),r("v-btn",{staticClass:"ma-0",attrs:{icon:""}},[r("v-icon",[e._v("mdi-dots-vertical")])],1)]],2),r("v-flex",{staticClass:"folder-list-container",attrs:{grow:""}},[r("v-navigation-drawer",{ref:"folderList",staticClass:"ps",attrs:{"disable-resize-watcher":"",permanent:"",width:"300","mini-variant":e.showMiniFolderListView}},[e.isTodoView?r("folder-list",{on:{reconfig:function(t){return e.reconfig("folder",t)}}}):r("project-list",{on:{reconfig:function(t){return e.reconfig("project",t)}}})],1)],1),r("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.add.dialog,callback:function(t){e.$set(e.add,"dialog",t)},expression:"add.dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.addDialogTitle))])]),r("v-tabs",{model:{value:e.add.activeTab,callback:function(t){e.$set(e.add,"activeTab",t)},expression:"add.activeTab"}},[r("v-tab",{key:0},[e._v(e._s(e.$t("globalAction.config.tabFolder")))]),r("v-tab-item",[r("v-card-text",[r("div",[r("v-text-field",{ref:"folderName",attrs:{rules:[e.rules.required],outline:"",label:e.$t("globalAction.config.folderName")},model:{value:e.add.folderName,callback:function(t){e.$set(e.add,"folderName",t)},expression:"add.folderName"}}),r("v-select",{attrs:{outline:"",items:e.projects,"item-value":"id","item-text":"name",label:e.$t("globalAction.config.selectProject")},model:{value:e.add.folderProject,callback:function(t){e.$set(e.add,"folderProject",t)},expression:"add.folderProject"}})],1)])],1),r("v-tab",{key:1},[e._v(e._s(e.$t("globalAction.config.tabProject")))]),r("v-tab-item",[r("v-card-text",[r("div",[r("v-text-field",{ref:"projectName",attrs:{rules:[e.rules.required],label:e.$t("globalAction.config.projectName"),outline:""},model:{value:e.add.projectName,callback:function(t){e.$set(e.add,"projectName",t)},expression:"add.projectName"}})],1)])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){e.add.dialog=!1}}},[e._v(e._s(e.$t("cancel")))]),r("v-btn",{attrs:{text:"",color:"blue darken-1"},on:{click:e.save}},[e._v(e._s(e.$t("save")))])],1)],1)],1),r("v-dialog",{attrs:{persistent:"",width:"100px","content-class":"elevation-0"}},[r("div",{staticClass:"child-flex-center",staticStyle:{height:"100px"}},[r("v-progress-circular",{attrs:{indeterminate:"",size:50,color:"primary"}})],1)])],1)},Ue=[],Je=(r("a623"),r("b7f5")),qe={created:function(){this.pss=[]},beforeDestroy:function(){for(var e in this.pss)e.destroy&&e.destroy()},methods:{getPerfectScrollbarInstance:function(e,t){var r=new Je["a"](e,t);return this.pss.push(r),r}}},ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{staticClass:"pa-0",attrs:{dense:""}},[r("v-list-item",{class:"star"===e.currentFolder?"sidebar-item-selected":"",attrs:{ripple:""},on:{click:function(t){return e.folderClick("star")},contextmenu:e.contextmenuClickDoNothing}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-star-outline")])],1),r("v-list-item-content",[e._v(e._s(e.$t("todoView.star")))]),r("v-list-item-action-text",[r("span")])],1),r("v-list-item",{class:"today"===e.currentFolder?"sidebar-item-selected":"",attrs:{ripple:""},on:{click:function(t){return e.folderClick("today")},contextmenu:e.contextmenuClickDoNothing}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-calendar-today")])],1),r("v-list-item-content",[e._v(e._s(e.$t("todoView.today")))]),r("v-list-item-action-text",[r("span")])],1),r("v-list-item",{class:"thisWeek"===e.currentFolder?"sidebar-item-selected":"",attrs:{ripple:""},on:{click:function(t){return e.folderClick("thisWeek")},contextmenu:e.contextmenuClickDoNothing}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-calendar-week")])],1),r("v-list-item-content",[e._v(e._s(e.$t("todoView.thisWeek")))]),r("v-list-item-action-text",[r("span")])],1),r("draggable",e._b({attrs:{tag:"div"},on:{change:e.foldersChange},model:{value:e.foldersProxy,callback:function(t){e.foldersProxy=t},expression:"foldersProxy"}},"draggable",e.folderDragOption,!1),e._l(e.foldersProxy,(function(t){return r("v-list-item",{key:t.id,class:e.currentFolder===t.id?"sidebar-item-selected":"",attrs:{ripple:""},on:{click:function(r){return e.folderClick(t.id)},contextmenu:function(r){return e.contextmenuClick(r,t.id)}}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-format-list-checkbox")])],1),r("v-list-item-content",[e._v(e._s(t.name))]),r("v-list-item-action-text",[r("span",[e._v(e._s(t.undoNumber))])])],1)})),1),r("menu-items",{attrs:{menu:e.menu}})],1)},Ke=[],Xe=r("310e"),Qe=r.n(Xe),Ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"position-x":e.menu.x,"position-y":e.menu.y},model:{value:e.menu.showMenu,callback:function(t){e.$set(e.menu,"showMenu",t)},expression:"menu.showMenu"}},[r("v-list",e._l(e.menu.menuItems,(function(t,n){return r("v-list-item",{key:n,on:{click:function(t){return e.itemClick(n)}}},[r("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1)},et=[],tt={name:"MenuItems",props:{menu:{type:Object}},methods:{itemClick:function(e){var t=this.menu.menuItems[e];t.callback&&t.callback(this.menu.extra,t)}}},rt=tt,nt=r("8860"),ot=r("da13"),at=r("5d23"),it=r("e449"),ct=Object(Le["a"])(rt,Ze,et,!1,null,"6c82d2b5",null),st=ct.exports;Re()(ct,{VList:nt["a"],VListItem:ot["a"],VListItemTitle:at["c"],VMenu:it["a"]});var dt,lt,ut={components:{MenuItems:st},data:function(){return{menu:{showMenu:!1,x:0,y:0,extra:null,menuItems:[]}}},methods:{contextmenuClick:function(e,t){e.preventDefault(),this.menu.extra=t,this.menu.x=e.pageX,this.menu.y=e.pageY,this.menu.showMenu=!0},contextmenuClickDoNothing:function(e){e.preventDefault()},registerMenuItem:function(e){var t=this;U()(e)?e.forEach((function(e){"name"in e?t.menu.menuItems.push(e):console.warn("name is not in menu item!")})):console.warn("menuItems is not an array!")}}},pt=(r("a9e3"),r("2638")),ft=r.n(pt),mt=r("169a"),ht=r("b0af"),vt=r("99d9"),bt=r("2fa4"),gt=r("8336"),Ot={name:"message",components:{VDialog:mt["a"],VCard:ht["a"],VCardTitle:vt["c"],VCardText:vt["b"],VCardActions:vt["a"],VSpacer:bt["a"],VBtn:gt["a"]},data:function(){return{isShow:!1,exitState:null}},props:{timeout:{type:Number,default:0},message:{default:""},title:{default:""}},destroyed:function(){this.$el&&this.$el.parentElement.removeChild(this.$el)},watch:{isShow:function(e){var t=this;e||this.$nextTick((function(){t.hideCallback&&t.hideCallback(t.exitState),t.$destroy()}))}},methods:{show:function(){this.isShow=!0},hide:function(e){this.isShow=!1,this.exitState=e},setHideCallback:function(e){this.hideCallback=e}},render:function(){var e=this,t=arguments[0];return t("v-dialog",ft()([{attrs:{value:this.isShow}},{on:{input:function(t){e.isShow=t}}},{attrs:{persistent:!0,maxWidth:"500px"}}]),[t("v-card",[t("v-card-title",{class:"headline"},[this.title]),t("v-card-text",[this.message]),t("v-card-actions",[t("v-spacer"),t("v-btn",ft()([{attrs:{text:!0}},{on:{click:function(){return e.hide(!1)}}}]),["取消"]),t("v-btn",ft()([{attrs:{text:!0,color:"primary"}},{on:{click:function(){return e.hide(!0)}}}]),["确认"])])])])}},jt=Ot,yt=Object(Le["a"])(jt,dt,lt,!1,null,"06ce28da",null),kt=yt.exports,wt=n["a"].extend(kt),Tt=0,Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof e&&(e={message:e});var t="message-".concat(Tt++),r=new wt({propsData:e,vuetify:d});return r.id=t,r.$mount(),document.body.appendChild(r.$el),r.show(),new Promise((function(e){r.setHideCallback((function(t){e(t)}))}))},xt=Ct;function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt={name:"FolderList",mixins:[ut],components:{Draggable:Qe.a},data:function(){return{foldersContent:[]}},computed:Dt({},Object(R["d"])("todoView",["currentFolder"]),{},Object(R["c"])("todoView",["folders"]),{foldersProxy:{get:function(){return this.folders},set:function(e){this.foldersContent=Object(A["a"])(e)}},folderDragOption:function(){return{animation:200,disabled:!1,group:"aside-folder-list",ghostClass:"draggable-ghost"}}}),created:function(){var e=this;this.registerMenuItem([{name:this.$t("todoView.folderMenu.folderConfig"),callback:function(t){e.$emit("reconfig",t)}},{name:this.$t("todoView.folderMenu.deleteFolder"),callback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xt({title:e.$t("delete"),message:e.$t("todoView.folderMenu.deleteFolderDialogContent")});case 2:n=t.sent,n&&e.deleteFolder(r);case 4:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()}])},methods:Dt({},Object(R["b"])("todoView",["changeFolder"]),{},Object(R["b"])("user",["modifyFolderList","deleteFolder"]),{folderClick:function(e){e&&this.changeFolder(e)},foldersChange:function(){this.modifyFolderList(this.foldersContent.map((function(e){return e.id})))}})},Et=Pt,St=r("132d"),Ft=r("1800"),Vt=Object(Le["a"])(Et,ze,Ke,!1,null,null,null),Lt=Vt.exports;Re()(Vt,{VIcon:St["a"],VList:nt["a"],VListItem:ot["a"],VListItemAction:Ft["a"],VListItemActionText:at["a"],VListItemContent:at["b"]});var It=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{staticClass:"pa-0",attrs:{dense:""}},[r("draggable",e._b({attrs:{tag:"div"},on:{change:e.projectsChange},model:{value:e.projectsProxy,callback:function(t){e.projectsProxy=t},expression:"projectsProxy"}},"draggable",e.projectDragOption,!1),e._l(e.projectsProxy,(function(t){return r("v-list-item",{key:t.id,class:e.currentProject===t.id?"sidebar-item-selected":"",attrs:{ripple:""},on:{click:function(r){return e.projectClick(t.id)},contextmenu:function(r){return e.contextmenuClick(r,t.id)}}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-folder-multiple-outline")])],1),r("v-list-item-content",[e._v(e._s(t.name))])],1)})),1),r("menu-items",{attrs:{menu:e.menu}})],1)},Rt=[];function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt={name:"ProjectList",mixins:[ut],components:{Draggable:Qe.a},data:function(){return{projectsContent:[]}},computed:$t({},Object(R["d"])("projectView",["currentProject"]),{},Object(R["c"])("projectView",["projects"]),{projectsProxy:{get:function(){return this.projects},set:function(e){this.projectsContent=Object(A["a"])(e)}},projectDragOption:function(){return{animation:200,disabled:!1,group:"aside-project-list",ghostClass:"draggable-ghost"}}}),created:function(){var e=this;this.registerMenuItem([{name:this.$t("projectView.projectMenu.projectConfig"),callback:function(t){e.$emit("reconfig",t)}},{name:this.$t("projectView.projectMenu.deleteProject"),callback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xt({title:e.$t("delete"),message:e.$t("projectView.projectMenu.deleteProjectContent")});case 2:n=t.sent,n&&e.deleteProject({project:r,deleteSubs:!1});case 4:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()},{name:this.$t("projectView.projectMenu.deleteProjectAndFolders"),callback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xt({title:e.$t("delete"),message:e.$t("projectView.projectMenu.deleteProjectAndFoldersContent")});case 2:n=t.sent,n&&e.deleteProject({project:r,deleteSubs:!0});case 4:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()}])},methods:$t({},Object(R["b"])("projectView",["changeCurrentProject"]),{},Object(R["b"])("user",["modifyProjectList","deleteProject"]),{projectClick:function(e){this.changeCurrentProject(e)},projectsChange:function(){this.modifyProjectList(this.projectsContent.map((function(e){return e.id})))}})},Mt=Nt,Ht=Object(Le["a"])(Mt,It,Rt,!1,null,null,null),Yt=Ht.exports;function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Re()(Ht,{VIcon:St["a"],VList:nt["a"],VListItem:ot["a"],VListItemAction:Ft["a"],VListItemContent:at["b"]});var Wt={name:"Sidebar",mixins:[qe],components:{ProjectList:Yt,FolderList:Lt},data:function(){return{mini:!1,add:{activeTab:0,folderName:"",folderProject:"",projectName:"",dialog:!1,isAdd:!0,extra:null},rules:{required:function(e){return!!e||"不能为空！"}}}},computed:Gt({},Object(R["d"])("user",["showMiniFolderListView","isTodoView"]),{},Object(R["c"])("user",["projectInfo","folderInfo"]),{},Object(R["c"])("projectView",["projects"]),{switchButtonIcon:function(){return this.isTodoView?"mdi-format-list-checks":"mdi-view-list"},addFolderForm:function(){return["folderName"]},addProjectForm:function(){return["projectName"]},addDialogTitle:function(){return this.add.isAdd?this.$t("globalAction.config.add"):this.$t("globalAction.config.modify")}}),watch:{"add.dialog":function(e){var t=this;e||(this.addFolderForm.forEach((function(e){return t.$refs[e]&&t.$refs[e].reset()})),this.addProjectForm.forEach((function(e){return t.$refs[e]&&t.$refs[e].reset()})))}},mounted:function(){var e=this;this.ps=this.getPerfectScrollbarInstance(this.$refs.folderList.$el),this.$bus.$on("folder-project-reconfig",(function(t){var r=t.type,n=t.id;e.reconfig(r,n)}))},beforeDestroy:function(){this.$bus.$off("folder-project-reconfig")},methods:Gt({},Object(R["b"])("user",["addFolder","switchMiniFolderListView","addProject","modifyFolder","modifyProject"]),{},Object(R["b"])("globalAction",["startSearch"]),{validateFolderForm:function(){var e=this;return this.addFolderForm.map((function(t){return e.$refs[t].validate()})).every((function(e){return e}))},validateProjectForm:function(){var e=this;return this.addProjectForm.map((function(t){return e.$refs[t].validate()})).every((function(e){return e}))},save:function(){this.add.isAdd?this.addNew():this.modify()},modify:function(){var e=this.add.extra.type;if("folder"===e&&this.validateFolderForm()){var t={id:this.add.extra.id,name:this.add.folderName};this.add.folderProject&&(t.project=this.add.folderProject),this.modifyFolder(t),this.add.dialog=!1}else if("project"===e&&this.validateProjectForm()){var r={id:this.add.extra.id,name:this.add.projectName};this.modifyProject(r),this.add.dialog=!1}},addNew:function(){if(0===this.add.activeTab&&this.validateFolderForm()){var e={name:this.add.folderName};this.add.folderProject&&(e.project=this.add.folderProject),this.addFolder(e),this.add.dialog=!1}else 1===this.add.activeTab&&this.validateProjectForm()&&(this.addProject({name:this.add.projectName}),this.add.dialog=!1)},switchButtonClick:function(){this.isTodoView?this.$router.push("/project"):this.$router.push("/todo")},reconfig:function(e,t){if(console.log("reconfig"),"folder"===e){var r=this.folderInfo(t);r.type="folder",this.add.extra=r,this.add.folderName=r.name,r.project&&(this.add.folderProject=r.project),this.add.activeTab=0}else if("project"===e){var n=this.projectInfo(t);n.type="project",this.add.extra=n,this.add.projectName=n.name,this.add.activeTab=1}this.add.isAdd=!1,this.add.dialog=!0},addNewClick:function(){this.add.isAdd=!0,this.add.dialog=!0}})},Ut=Wt,Jt=(r("3d36"),r("3d1a"),r("5bc1")),qt=r("0e8f"),zt=r("a722"),Kt=r("f774"),Xt=r("490a"),Qt=r("b974"),Zt=r("71a3"),er=r("c671"),tr=r("fe57"),rr=r("8654"),nr=r("71d9"),or=Object(Le["a"])(Ut,We,Ue,!1,null,"795c88c5",null),ar=or.exports;function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Re()(or,{VAppBarNavIcon:Jt["a"],VBtn:gt["a"],VCard:ht["a"],VCardActions:vt["a"],VCardText:vt["b"],VCardTitle:vt["c"],VDialog:mt["a"],VFlex:qt["a"],VIcon:St["a"],VLayout:zt["a"],VNavigationDrawer:Kt["a"],VProgressCircular:Xt["a"],VSelect:Qt["a"],VSpacer:bt["a"],VTab:Zt["a"],VTabItem:er["a"],VTabs:tr["a"],VTextField:rr["a"],VToolbar:nr["a"]});var sr={name:"Index",components:{Sidebar:ar},computed:cr({},Object(R["d"])("globalAction",["palette"]),{paletteInput:{get:function(){return this.$store.state.globalAction.palette.input},set:function(e){this.debouncePaletteInput(e)}}}),created:function(){this.debouncePaletteInput=Ge()(this.changePaletteInput,100)},methods:cr({},Object(R["b"])("globalAction",["changePaletteInput","changePaletteInputKey","changePaletteShow","clearPaletteExtra","clearSearchMode"]),{paletteKeyUp:function(e){this.$bus.$emit("palette-input-key",e.key),"Escape"===e.key?(this.changePaletteShow(!1),this.clearSearchMode()):"Enter"===e.key&&this.$bus.$emit("palette-append-click",this.$store.state.globalAction.palette.extra)},appendClick:function(){this.$bus.$emit("palette-append-click",this.$store.state.globalAction.palette.extra)}})},dr=sr,lr=(r("2b43"),r("a523")),ur=r("2db4"),pr=Object(Le["a"])(dr,He,Ye,!1,null,"3211b341",null),fr=pr.exports;Re()(pr,{VContainer:lr["a"],VFlex:qt["a"],VLayout:zt["a"],VSnackbar:ur["a"],VTextField:rr["a"]});var mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",[r("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.showDetailView,expression:"showDetailView"}],staticStyle:{height:"100%",width:"350px"},attrs:{column:""}},[r("v-flex",{staticClass:"todo-detail-header",attrs:{shrink:""}},[r("v-checkbox",{staticClass:"ma-0",staticStyle:{flex:"0 0 auto"},attrs:{"hide-details":""},on:{change:e.refresh},model:{value:e.todo.complete,callback:function(t){e.$set(e.todo,"complete",t)},expression:"todo.complete"}}),e.nameEditMode?r("v-text-field",{staticClass:"pa-0 ma-0",attrs:{"hide-details":"","single-line":""},on:{blur:e.nameChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nameChange(t)}},model:{value:e.nameProxy,callback:function(t){e.nameProxy=t},expression:"nameProxy"}}):r("div",{staticClass:"todo-detail-header-text",on:{click:e.nameClick}},[e._v(e._s(e.todo.name))]),r("star-select",{on:{click:e.refresh},model:{value:e.todo.star,callback:function(t){e.$set(e.todo,"star",t)},expression:"todo.star"}})],1),r("v-flex",{ref:"scrollContainer",staticClass:"todo-detail-middle ps",staticStyle:{height:"0",position:"relative"},attrs:{grow:""}},[r("div",[r("v-subheader",{staticStyle:{height:"20px"}},[e._v(e._s(e.$t("sideBar.dateSetting.name")))]),r("date-setting",{staticClass:"mb-3",attrs:{"expired-date":e.todo.expired_date,"remind-time":e.todo.remind_time,repeat:e.todo.repeat},on:{input:e.timeChange}}),r("v-subheader",{staticStyle:{height:"20px"}},[e._v(e._s(e.$t("sideBar.subtask.name")))]),e._l(e.todo.subtasks,(function(t,n){return r("subtask",{key:n,staticClass:"todo-detail-icon-left-margin mb-2",attrs:{complete:t.complete,content:t.content},on:{input:function(t){return e.subtaskChange(n,t)},delete:function(t){return e.removeSubtask(n)}}})})),r("v-text-field",{staticClass:"todo-detail-icon-left-margin mb-3",attrs:{flat:"","hide-details":"",clearable:"","prepend-icon":"mdi-plus",label:e.$t("sideBar.subtask.add")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterSubtask(t)}},model:{value:e.subtaskContent,callback:function(t){e.subtaskContent=t},expression:"subtaskContent"}}),r("v-textarea",{staticClass:"mb-3 todo-detail-icon-left-margin",attrs:{value:e.todo.remark,flat:"","hide-details":"","auto-grow":"","prepend-icon":"mdi-square-edit-outline",label:e.$t("sideBar.remark")},on:{change:e.remarkChange}}),e.showComments?r("v-list",{staticClass:"transparent"},[r("v-subheader",{staticStyle:{height:"20px"}},[e._v(e._s(e.$t("sideBar.comment.name")))]),e._l(e.todo.comments,(function(t,n){return[r("v-card",{key:n,staticClass:"transparent",attrs:{flat:""}},[r("v-layout",{staticClass:"pt-2 pb-0"},[r("v-flex",{staticClass:"pa-2",attrs:{shrink:""}},[r("v-avatar",{attrs:{color:"blue lighten-5",size:"40px"}},[e._v(e._s(t.name))])],1),r("v-flex",{attrs:{grow:""}},[r("v-card-title",{staticClass:"pa-0"},[r("div",[r("span",{staticClass:"title"},[e._v(e._s(t.content))]),r("br"),r("span",{staticClass:"subtitle-1 grey--text"},[e._v(e._s(t.time))])])]),r("v-card-actions",{staticClass:"pa-0"},[r("v-btn",{staticClass:"ma-0 pa-1 min-width-0",attrs:{text:"",color:"red lighten-3"},on:{click:function(t){return e.removeComment(n)}}},[e._v(" "+e._s(e.$t("delete"))+" ")])],1),r("v-divider",{key:n})],1)],1)],1)]}))],2):e._e()],2)]),r("v-flex",{staticClass:"todo-detail-end",attrs:{shrink:""}},[r("v-text-field",{staticClass:"ma-0",attrs:{"hide-details":"",label:e.$t("sideBar.comment.name"),"prepend-inner-icon":"mdi-comment-processing-outline","append-icon":"mdi-send"},on:{"click:append":e.addNewComment},model:{value:e.commentContent,callback:function(t){e.commentContent=t},expression:"commentContent"}}),r("div",{staticClass:"todo-detail-bottom-bar"},[r("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""},on:{click:e.closeDetailView}},[r("v-icon",[e._v("mdi-chevron-double-right")])],1),r("v-subheader",{staticClass:"no-select"},[e._v(e._s(e.todo.create_time))]),r("div",[r("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""},on:{click:e.deleteClick}},[r("v-icon",[e._v("mdi-delete-outline")])],1)],1)],1)],1)],1)],1)},hr=[],vr=(r("accc"),r("5319"),r("53ca")),br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-1"},[r("v-layout",[r("v-menu",{attrs:{"offset-y":"","min-width":"0","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ma-0 btn-block-align-left",attrs:{text:"",color:e.expiredDateColor}},n),[r("v-icon",{staticClass:"mr-1"},[e._v("mdi-calendar-multiselect")]),e._v(" "+e._s(e.expiredDate||e.$t("sideBar.dateSetting.expiredDate"))+" ")],1)]}}]),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[r("date-picker",{attrs:{value:e.expiredDate},on:{input:e.datePickerInput,reset:function(t){e.datePickerMenu=!1}}})],1),e.expiredDate?r("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{text:"",color:"grey lighten-1"},on:{click:e.clearExpiredDate}},[r("v-icon",[e._v("mdi-close")])],1):e._e()],1),e.expiredDate?[r("v-layout",[r("v-menu",{attrs:{"offset-y":"","min-width":"0","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ma-0 btn-block-align-left",attrs:{depressed:"",text:"",color:e.remindTimeColor}},n),[r("v-icon",{staticClass:"mr-1"},[e._v("mdi-calendar-clock")]),e._v(" "+e._s(e.remindTime||e.$t("sideBar.dateSetting.remindTime"))+" ")],1)]}}],null,!1,2038012739),model:{value:e.dateTimePickerMenu,callback:function(t){e.dateTimePickerMenu=t},expression:"dateTimePickerMenu"}},[r("date-time-picker",{attrs:{value:e.remindTime},on:{input:e.dateTimePickerInput,reset:function(t){e.dateTimePickerMenu=!1}}})],1),e.remindTime?r("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:e.clearRemindTime}},[r("v-icon",[e._v("mdi-close")])],1):e._e()],1),r("v-layout",[r("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ma-0 btn-block-align-left",attrs:{depressed:"",text:""}},n),[r("v-icon",{staticClass:"mr-1"},[e._v("mdi-redo-variant")]),e._v(" "+e._s(e.repeat&&e.$t("sideBar.dateSetting.repeatOption."+e.repeat)||e.$t("sideBar.dateSetting.repeatDefault"))+" ")],1)]}}],null,!1,2813499796)},[r("v-list",e._l(e.repeatItems,(function(t){return r("v-list-item",{key:t,on:{click:function(r){return e.repeatInput(t)}}},[r("v-list-item-title",[e._v(e._s(e.$t("sideBar.dateSetting.repeatOption."+t)))])],1)})),1)],1),e.repeat?r("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:e.clearRepeat}},[r("v-icon",[e._v("mdi-close")])],1):e._e()],1)]:e._e()],2)},gr=[],Or=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"date-time-picker"},[r("v-date-picker",{attrs:{"min-width":"0",color:"blue-grey darken-1"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[r("v-layout",{staticStyle:{width:"290px",margin:"-8px"},attrs:{"align-center":""}},[r("v-select",{attrs:{items:e.hours,label:"时",flat:"",solo:"","hide-details":""},model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}}),r("div",{staticClass:"px-2 no-select child-flex-center time-colon",staticStyle:{"font-weight":"bold"}},[e._v(":")]),r("v-select",{attrs:{items:e.minutes,label:"分",flat:"",solo:"","hide-details":""},model:{value:e.minute,callback:function(t){e.minute=t},expression:"minute"}}),r("v-btn",{staticClass:"min-width-0",attrs:{text:""},on:{click:e.reset}},[r("v-icon",[e._v("mdi-close")])],1),r("v-btn",{staticClass:"min-width-0 ma-0",attrs:{text:""},on:{click:e.confirm}},[r("v-icon",[e._v("mdi-check")])],1)],1)],1)],1)},jr=[],yr=(r("fb6a"),Object(A["a"])(new Array(24).keys())),kr=Object(A["a"])(new Array(60).keys()),wr={name:"DateTimePicker",data:function(){return{hours:yr,minutes:kr,date:"",hour:0,minute:0}},props:{value:{type:[String,Date],required:!0}},watch:{value:function(){this.reset(!0)}},created:function(){this.reset()},methods:{reset:function(e){var t=this.value?new Date(this.value):new Date;this.hour=t.getHours(),this.minute=t.getMinutes(),this.date=t.toISOString().slice(0,10),e&&this.$emit("reset")},confirm:function(){var e=new Date(this.date);e.setHours(this.hour,this.minute),this.$emit("input",Y()(e).format(ne))}}},Tr=wr,Cr=(r("2281"),r("2e4b")),xr=Object(Le["a"])(Tr,Or,jr,!1,null,"d5132bda",null),_r=xr.exports;Re()(xr,{VBtn:gt["a"],VDatePicker:Cr["a"],VIcon:St["a"],VLayout:zt["a"],VSelect:Qt["a"]});var Dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"date-time-picker"},[r("v-date-picker",{attrs:{"min-width":"0",color:"blue-grey darken-1"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[r("div",{staticClass:"action-bar"},[r("v-btn",{attrs:{text:""},on:{click:e.reset}},[r("v-icon",[e._v("mdi-close")])],1),r("v-btn",{staticClass:"ma-0",attrs:{text:""},on:{click:e.confirm}},[r("v-icon",[e._v("mdi-check")])],1)],1)])],1)},Pr=[],Er={name:"DatePicker",data:function(){return{date:""}},props:{value:{type:[String,Date],required:!0}},watch:{value:function(){this.reset(!0)}},created:function(){this.reset()},methods:{reset:function(e){var t=this.value?new Date(this.value):new Date;this.date=t.toISOString().substring(0,10),e&&this.$emit("reset")},confirm:function(){this.$emit("input",this.date)}}},Sr=Er,Fr=(r("153c"),Object(Le["a"])(Sr,Dr,Pr,!1,null,"2f11f956",null)),Vr=Fr.exports;function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var r=new Date;r.setHours(0,0,0,0),r=r.getTime();var n=new Date(e).getTime();return t?n>r?"blue--text text--lighten-2":"red--text text--lighten-1":n>r?"blue lighten-2":"red lighten-1"}function Ir(e){var t=e,r=new Date;if(e=new Date(e),K(r,e))return"days.today";var n=new Date;if(n.setDate(n.getDate()-1),K(n,e))return"days.yesterday";var o=new Date;return o.setDate(o.getDate()+1),K(o,e)?"days.tomorrow":t}function Rr(e){var t=e.id,r=e.name,n=e.complete,o=!!e.attachment&&e.attachment.length>0,a=e.subtasks?e.subtasks.length:0,i=a?e.subtasks.filter((function(e){return e.complete})).length:0,c=!!e.comments&&e.comments.length>0,s=!!e.expired_date,d=Ir(e.expired_date),l=Lr(e.expired_date,!0),u=!!e.star;return{id:t,name:r,complete:n,attachment:o,totalSubtask:a,reserveSubtask:i,comment:c,showExpiredDate:s,expiredDate:d,expiredDateColor:l,star:u}}Re()(Fr,{VBtn:gt["a"],VDatePicker:Cr["a"],VIcon:St["a"]});var Ar={name:"DateSetting",components:{DatePicker:Vr,DateTimePicker:_r},data:function(){return{datePickerMenu:!1,dateTimePickerMenu:!1}},props:{repeat:{type:String,default:""},expiredDate:{type:String,default:""},remindTime:{type:String,default:""}},computed:{expiredDateColor:function(){return Lr(this.expiredDate)},remindTimeColor:function(){return Lr(this.remindTime)},repeatItems:function(){return ee}},methods:{repeatInput:function(e){this.$emit("input",{repeat:e})},datePickerInput:function(e){this.datePickerMenu=!1,this.$emit("input",{expiredDate:e})},dateTimePickerInput:function(e){this.dateTimePickerMenu=!1,this.$emit("input",{remindTime:e})},clearRepeat:function(){this.$emit("input",{repeat:""})},clearExpiredDate:function(){this.$emit("input",{expiredDate:""})},clearRemindTime:function(){this.$emit("input",{remindTime:""})}}},$r=Ar,Nr=Object(Le["a"])($r,br,gr,!1,null,"3aab2576",null),Mr=Nr.exports;Re()(Nr,{VBtn:gt["a"],VIcon:St["a"],VLayout:zt["a"],VList:nt["a"],VListItem:ot["a"],VListItemTitle:at["c"],VMenu:it["a"]});var Hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-icon",{on:{click:e.click}},[e._v(e._s(e.starIconName))])},Yr=[],Br={name:"StarSelect",props:{value:{type:Boolean,default:!1}},computed:{starIconName:function(){return this.value?"mdi-star":"mdi-star-outline"}},methods:{click:function(){this.$emit("input",!this.value),this.$emit("click")}}},Gr=Br,Wr=Object(Le["a"])(Gr,Hr,Yr,!1,null,null,null),Ur=Wr.exports;Re()(Wr,{VIcon:St["a"]});var Jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"subtask"},[r("v-checkbox",{staticClass:"ma-0",attrs:{"input-value":e.complete,"hide-details":""},on:{change:function(t){return e.input({complete:t})}}}),r("v-textarea",{staticClass:"ma-0 pa-0",attrs:{disabled:e.complete,rows:1,"single-line":"",flat:"","auto-grow":"","hide-details":""},on:{blur:function(t){return e.input({content:e.tempContent})}},model:{value:e.textField,callback:function(t){e.textField=t},expression:"textField"}}),r("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:e.deleteClick}},[r("v-icon",[e._v("mdi-close")])],1)],1)},qr=[];function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xr={name:"Subtask",data:function(){return{tempContent:"",hasChanged:!1}},props:{complete:{type:Boolean,default:!1},content:{type:String,default:""}},computed:{textField:{get:function(){return this.content},set:function(e){this.hasChanged=!0,this.tempContent=e}}},watch:{content:{handler:function(){this.tempContent=this.content},immediate:!0}},methods:{deleteClick:function(){this.$emit("delete")},input:function(e){if(!("content"in e)||this.hasChanged){var t=this.complete,r=this.content;this.$emit("input",Kr({complete:t,content:r},e)),this.hasChanged=!1}}}},Qr=Xr,Zr=(r("da5a"),r("ac7c")),en=r("a844"),tn=Object(Le["a"])(Qr,Jr,qr,!1,null,"6bf191c1",null),rn=tn.exports;function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Re()(tn,{VBtn:gt["a"],VCheckbox:Zr["a"],VIcon:St["a"],VTextarea:en["a"]});var an={name:"TodoDetail",mixins:[qe],components:{Subtask:rn,StarSelect:Ur,DateSetting:Mr},data:function(){return{todo:{name:"",complete:!1,star:!1,expired_date:"",remind_time:"",repeat:"",subtasks:[],remark:"",attachment:[],comments:[],create_time:""},subtaskContent:"",nameEditMode:!1,nameContent:"",commentContent:""}},computed:on({},Object(R["d"])("user",["todos"]),{},Object(R["d"])("detailView",["currentCompleteTodo"]),{},Object(R["d"])("detailView",["showDetailView","currentTodo"]),{},Object(R["c"])("user",["userInfo"]),{},Object(R["c"])("detailView",["isCompleteTodo"]),{currentTodoDetail:function(){return this.isCompleteTodo?this.currentCompleteTodo:this.todos[this.currentTodo]},nameProxy:{get:function(){return this.todo.name},set:function(e){this.nameContent=e}},showComments:function(){return!(!this.todo.comments||!this.todo.comments.length)}}),watch:{currentTodoDetail:{handler:function(e){if(e){for(var t in this.clearTodo(),this.todo){var r;if(void 0!==e[t]&&null!==e[t])if(U()(this.todo[t]))(r=this.todo[t]).splice.apply(r,[0,this.todo[t].length].concat(Object(A["a"])(e[t])));else this.todo[t]=e[t]}this.$refs.scrollContainer.scrollTop=0,this.ps.update()}},immediate:!0}},mounted:function(){this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer)},methods:on({},Object(R["b"])("user",["modifyTodo","deleteTodo"]),{},Object(R["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo"]),{enterSubtask:function(){this.subtaskContent&&(this.todo.subtasks.push({complete:!1,content:this.subtaskContent}),this.subtaskContent="",this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks}))},subtaskChange:function(e,t){this.todo.subtasks.splice(e,1,t),this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks})},removeSubtask:function(e){this.todo.subtasks.splice(e,1),this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks})},remarkChange:function(e){this.todo.remark=e,this.modifyTodo({id:this.currentTodo,remark:e})},refresh:function(){this.modifyTodo(on({id:this.currentTodo},this.todo))},closeDetailView:function(){this.changeDetailViewVisible(!1)},clearTodo:function(){for(var e in this.todo)if(this.todo.hasOwnProperty(e))switch(Object(vr["a"])(this.todo[e])){case"boolean":this.todo[e]=!1;break;case"string":this.todo[e]="";break;case"object":U()(this.todo[e])&&this.todo[e].splice(0,this.todo[e].length);break;default:this.todo[e]=null;break}},timeChange:function(e){var t=e.expiredDate,r=e.remindTime,n=e.repeat,o={id:this.currentTodo};void 0!==t&&(o.expired_date=t),void 0!==r&&(o.remind_time=r),void 0!==n&&(o.repeat=n),this.modifyTodo(o)},nameChange:function(){this.todo.name=this.nameContent,this.nameEditMode=!1,this.modifyTodo({id:this.currentTodo,name:this.todo.name})},addNewComment:function(){if(this.commentContent){var e=this.todo.comments;e.push({user:this.userInfo.id,name:this.userInfo.name,content:this.commentContent,time:(new Date).toISOString().substr(0,19).replace("T"," ")}),this.commentContent="",this.modifyTodo({id:this.currentTodo,comments:e})}},removeComment:function(e){var t=this.todo.comments;t.splice(e,1),this.modifyTodo({id:this.currentTodo,comments:t})},deleteClick:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xt({title:"删除",message:"是否删除当前清单？"});case 2:t=e.sent,t&&(this.deleteTodo(this.currentTodo),this.changeCurrentTodo(""),this.changeDetailViewVisible(!1));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),nameClick:function(){this.nameEditMode=!0,this.nameProxy=this.todo.name}})},cn=an,sn=(r("9e21"),r("8212")),dn=r("ce7e"),ln=r("e0c7"),un=Object(Le["a"])(cn,mr,hr,!1,null,"dca642be",null),pn=un.exports;Re()(un,{VAvatar:sn["a"],VBtn:gt["a"],VCard:ht["a"],VCardActions:vt["a"],VCardTitle:vt["c"],VCheckbox:Zr["a"],VDivider:dn["a"],VFlex:qt["a"],VIcon:St["a"],VLayout:zt["a"],VList:nt["a"],VSubheader:ln["a"],VTextField:rr["a"],VTextarea:en["a"]});var fn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{column:"","fill-height":""}},[r("v-flex",{staticStyle:{width:"100%"},attrs:{shrink:""}},[r("v-toolbar",{attrs:{flat:"",dense:"",dark:"",color:"blue-grey lighten-1"}},[r("v-toolbar-title",[e._v(e._s(e.currentFolderName))]),r("v-spacer"),r("v-toolbar-items")],1)],1),r("v-flex",{staticClass:"pa-3 blue-grey lighten-1",staticStyle:{overflow:"hidden"},attrs:{grow:""}},[r("v-layout",{staticStyle:{height:"100%"},attrs:{column:""}},[e.canAddNewTodo?r("v-flex",{attrs:{shrink:""}},[r("v-text-field",{attrs:{solo:"","prepend-inner-icon":"mdi-plus","append-icon":"mdi-send",placeholder:e.$t("todoView.addNewTask")},on:{"click:append":e.addNewTodo,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addNewTodo(t)}},model:{value:e.todoName,callback:function(t){e.todoName=t},expression:"todoName"}})],1):e._e(),r("v-flex",{ref:"scrollContainer",staticClass:"ps",staticStyle:{overflow:"hidden",height:"0",position:"relative"},attrs:{grow:""}},[r("v-list",{staticClass:"transparent"},[e._l(e.todosProxy,(function(t,n){return[t.name?r("v-btn",{key:t.name+n,staticClass:"min-width-0",attrs:{text:"",small:"",dark:""}},[e._v(e._s(t.name))]):e._e(),e._l(t.todos,(function(t){return r("todo-item",{key:t.id,attrs:{todo:t},on:{click:e.clickTodo,"click:checkbox":e.clickComplete,"click:star":e.clickStar}})}))]})),e.isSpecialFolder?e._e():[r("v-btn",{staticClass:"min-width-0",attrs:{loading:e.completeTodo.isLoading,text:"",small:"",dark:""},on:{click:e.clickLoadingCompleteBtn}},[e._v(e._s(e.loadingCompleteBtnName))]),e._l(e.completeTodo.todos,(function(t){return r("todo-item",{key:t.id,staticStyle:{opacity:"0.6"},attrs:{todo:t},on:{click:e.clickCompleteTodo,"click:checkbox":e.clickIncomplete}})}))]],2)],1)],1)],1)],1)},mn=[],hn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list-item",{staticClass:"elevation-1 my-1 todo-item",class:e.showDetailView&&e.currentTodo===e.todo.id?"todo-item-selected":"",attrs:{ripple:""},on:{click:function(t){return e.click(e.todo.id)}}},[r("v-list-item-action",{staticStyle:{"min-width":"0"}},[r("v-checkbox",{attrs:{"input-value":e.todo.complete},on:{change:function(t){return e.clickComplete(e.todo.id,t)}},nativeOn:{click:function(t){return t.stopPropagation(),e.doNothing(t)}}})],1),r("v-list-item-content",[e._v(e._s(e.todo.name))]),r("v-list-item-content",{staticClass:"mr-3",staticStyle:{flex:"0 0 auto"}},[r("span",{staticStyle:{display:"inline-flex"}},[e.todo.showExpiredDate?r("span",{staticClass:"mr-2",class:e.todo.expiredDateColor},[e._v(e._s(e.expiredDate))]):e._e(),e.todo.totalSubtask?r("span",{staticClass:"mr-2",staticStyle:{display:"inline-flex"}},[r("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v(" "+e._s(e.todo.reserveSubtask)+"/"+e._s(e.todo.totalSubtask)+" ")],1):e._e(),e.todo.comment?r("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-comment-outline")]):e._e(),e.todo.attachment?r("v-icon",{attrs:{small:""}},[e._v("mdi-attachment")]):e._e()],1)]),r("star-select",{attrs:{value:e.todo.star},on:{input:function(t){return e.clickStar(e.todo.id,t)}},nativeOn:{click:function(t){return t.stopPropagation(),e.doNothing(t)}}})],1)},vn=[];r("2ca0");function bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var On={name:"TodoItem",components:{StarSelect:Ur},props:{todo:{required:!0}},computed:gn({},Object(R["d"])("user",["currentTodo","showDetailView"]),{expiredDate:function(){return this.todo.expiredDate.startsWith("days")?this.$t(this.todo.expiredDate):this.todo.expiredDate}}),methods:{doNothing:function(){},click:function(e){this.$emit("click",e)},clickComplete:function(e,t){this.$emit("click:checkbox",{id:e,complete:t})},clickStar:function(e,t){this.$emit("click:star",{id:e,star:t})}}},jn=On,yn=(r("4554"),Object(Le["a"])(jn,hn,vn,!1,null,"f3189f14",null)),kn=yn.exports;function wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Re()(yn,{VCheckbox:Zr["a"],VIcon:St["a"],VListItem:ot["a"],VListItemAction:Ft["a"],VListItemContent:at["b"]});var Cn={name:"TodoList",components:{TodoItem:kn},mixins:[qe],data:function(){return{todoName:"",completeTodo:{isLoading:!1,isShow:!1,todos:[]}}},computed:Tn({},Object(R["c"])("todoView",["todos"]),{},Object(R["c"])("globalAction",["searchValid"]),{},Object(R["d"])("todoView",["currentFolder"]),{},Object(R["d"])("user",["folders"]),{currentFolderName:function(){if(this.searchValid)return this.$t("search");switch(this.currentFolder){case"star":return this.$t("todoView.star");case"today":return this.$t("todoView.today");case"thisWeek":return this.$t("todoView.thisWeek")}var e=this.folders[this.currentFolder];return e?e.name:""},canAddNewTodo:function(){if(this.searchValid)return!1;switch(this.currentFolder){case"star":return!1;case"today":return!1;case"thisWeek":return!1;default:return!0}},todosProxy:function(){return this.todos.map((function(e){return Tn({},e,{todos:e.todos.map(Rr)})}))},isSpecialFolder:function(){return!this.canAddNewTodo},loadingCompleteBtnName:function(){return this.completeTodo.isShow?this.$t("todoView.hideCompleteTask"):this.$t("todoView.displayCompleteTask")}}),watch:{currentFolder:function(){this.completeTodo.isShow=!1,this.completeTodo.todos.splice(0,this.completeTodo.todos.length),this.changeDetailViewVisible(!1)}},mounted:function(){this.getPerfectScrollbarInstance(this.$refs.scrollContainer)},methods:Tn({},Object(R["b"])("user",["addTodo","modifyTodo","markTodoAsDone","markTodoAsUndone"]),{},Object(R["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo","changeCurrentCompleteTodo"]),{addNewTodo:function(){this.todoName&&(this.addTodo({name:this.todoName,folder:this.currentFolder}),this.todoName="")},clickTodo:function(e){this.changeCurrentTodo(e),this.changeDetailViewVisible(!0)},clickComplete:function(e){var t=e.id,r=e.complete;r&&this.markTodoAsDone(t)},clickStar:function(e){var t=e.id,r=e.star;this.modifyTodo({id:t,star:r})},loadingCompleteTodo:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.completeTodo.isLoading=!0,e.next=3,S({folder:this.currentFolder});case 3:r=e.sent,(t=this.completeTodo.todos).splice.apply(t,[0,this.completeTodo.todos.length].concat(Object(A["a"])(r))),this.completeTodo.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clickLoadingCompleteBtn:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.completeTodo.isShow=!this.completeTodo.isShow,this.completeTodo.isShow){e.next=4;break}return this.completeTodo.todos.splice(0,this.completeTodo.todos.length),e.abrupt("return");case 4:return e.next=6,this.loadingCompleteTodo();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clickCompleteTodo:function(e){this.changeCurrentCompleteTodo(e),this.changeDetailViewVisible(!0)},clickIncomplete:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.id,n=t.complete,!r||n){e.next=6;break}return e.next=4,this.markTodoAsUndone(r);case 4:return e.next=6,this.loadingCompleteTodo();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},xn=Cn,_n=r("2a7f"),Dn=Object(Le["a"])(xn,fn,mn,!1,null,"3b7dde24",null),Pn=Dn.exports;Re()(Dn,{VBtn:gt["a"],VFlex:qt["a"],VLayout:zt["a"],VList:nt["a"],VSpacer:bt["a"],VTextField:rr["a"],VToolbar:nr["a"],VToolbarItems:_n["a"],VToolbarTitle:_n["b"]});var En=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-view blue-grey lighten-5"},[r("draggable",e._b({ref:"scrollContainer",staticClass:"folder-list pa-2 ps",on:{change:e.change},model:{value:e.foldersProxy,callback:function(t){e.foldersProxy=t},expression:"foldersProxy"}},"draggable",e.dragOption,!1),e._l(e.foldersProxy,(function(e){return r("folder",{key:e.id,staticClass:"mr-2",attrs:{id:e.id,name:e.name}})})),1)],1)},Sn=[],Fn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{staticClass:"project-view-folder blue-grey lighten-4 pa-2",attrs:{column:""}},[r("div",{staticClass:"folder-header project-handle mb-2"},[r("span",{staticClass:"title no-select"},[e._v(e._s(e.name))]),r("v-btn",{staticClass:"mx-0",attrs:{icon:"",small:""},on:{click:e.addNewTask}},[r("v-icon",[e._v("mdi-plus")])],1),r("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"mx-0",attrs:{icon:"",small:""}},n),[r("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[r("v-list",[r("v-list-item",{on:{click:e.reconfigFolder}},[r("v-list-item-title",[e._v(e._s(e.$t("projectView.folderMenu.folderConfig")))])],1),r("v-list-item",{on:{click:e.deleteClick}},[r("v-list-item-title",[e._v(e._s(e.$t("projectView.folderMenu.deleteFolder")))])],1)],1)],1)],1),r("draggable",e._b({ref:"scrollContainer",staticClass:"ps",staticStyle:{position:"relative"},attrs:{tag:"div"},on:{change:e.change},model:{value:e.todosProxy,callback:function(t){e.todosProxy=t},expression:"todosProxy"}},"draggable",e.dragOption,!1),e._l(e.todosProxy,(function(t){return r("v-card",{key:t.id,staticClass:"mb-2",attrs:{flat:"",ripple:""},on:{click:function(r){return e.clickTodo(t.id)},contextmenu:function(r){return e.contextmenuClick(r,t.id)}}},[r("v-card-title",{staticClass:"pa-2"},[r("div",[r("div",{staticClass:"subtitle-1 no-select mb-2",staticStyle:{"font-weight":"normal"}},[e._v(e._s(t.name))]),t.showExpiredDate?r("div",{staticClass:"subtitle-2",class:t.expiredDateColor},[r("v-icon",{class:t.expiredDateColor,attrs:{small:""}},[e._v("mdi-calendar")]),e._v(" "+e._s(e.expiredDateName(t.expiredDate))+" ")],1):e._e(),r("div",{staticClass:"subtitle-2"},[t.totalSubtask?r("span",{staticClass:"mr-2",staticStyle:{"font-size":"0.9rem"}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v(" "+e._s(t.reserveSubtask)+"/"+e._s(t.totalSubtask)+" ")],1):e._e(),t.star?r("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-star-outline")]):e._e(),t.comment?r("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-comment-outline")]):e._e(),t.attachment?r("v-icon",{attrs:{small:""}},[e._v("mdi-attachment")]):e._e()],1)])])],1)})),1),r("menu-items",{attrs:{menu:e.menu}})],1)},Vn=[];function Ln(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ln(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rn={name:"Folder",mixins:[qe,ut],components:{Draggable:Qe.a},data:function(){return{todosContent:[],snackbar:!1}},props:{id:{type:String,required:!0},name:{type:String,default:""}},computed:In({},Object(R["d"])("user",["folders","todos"]),{},Object(R["c"])("globalAction",["paletteShow","searchValid"]),{todosProxy:{get:function(){var e=this,t=this.folders[this.id];if(!t)return[];var r=this.$store.state.globalAction.palette.input,n=t.undos.map((function(t){return e.todos[t]})).map(Rr);return this.searchValid?n.filter((function(e){return e.name.includes(r)})):n},set:function(e){this.todosContent=Object(A["a"])(e)}},dragOption:function(){return{animation:200,disabled:!1,group:"project-folder",ghostClass:"draggable-ghost"}}}),created:function(){var e=this;this.registerMenuItem([{name:this.$t("projectView.todoMenu.markAsComplete"),callback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.markTodoAsDone(r);case 2:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()},{name:this.$t("projectView.todoMenu.deleteTask"),callback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xt({title:e.$t("projectView.todoMenu.deleteTask"),message:e.$t("projectView.todoMenu.deleteTaskContent")});case 2:n=t.sent,n&&e.deleteTodo(r);case 4:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()}])},mounted:function(){var e=this;this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer.$el),this.paletteClick=function(t){t===e.id&&(e.addTodo({name:e.$store.state.globalAction.palette.input,folder:t}),e.changePaletteShow(!1))},this.$bus.$on("palette-append-click",this.paletteClick)},beforeDestroy:function(){this.$bus.$off("palette-append-click",this.paletteClick)},methods:In({},Object(R["b"])("user",["modifyFolder","modifyTodo","deleteFolder","addTodo","deleteTodo","markTodoAsDone"]),{},Object(R["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo"]),{},Object(R["b"])("globalAction",["startAddingNew","changePaletteShow"]),{change:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!("moved"in t)){e.next=5;break}r=this.todosContent.map((function(e){return e.id})),this.modifyFolder({id:this.id,undos:r}),e.next=12;break;case 5:if(!("added"in t)){e.next=12;break}return n=this.todosContent.map((function(e){return e.id})),o=this.id,a=t.added.element.id,e.next=11,this.modifyTodo({id:a,folder:o});case 11:this.modifyFolder({id:this.id,undos:n});case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clickTodo:function(e){this.changeCurrentTodo(e),this.changeDetailViewVisible(!0)},deleteClick:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xt({title:this.$t("delete"),message:this.$t("projectView.folderMenu.deleteFolderContent")});case 2:t=e.sent,t&&this.deleteFolder(this.id);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addNewTask:function(){this.paletteShow&&this.changePaletteShow(!1),this.startAddingNew({placeholder:"".concat(this.name,": ").concat(this.$t("sideBar.subtask.add")),extra:this.id})},reconfigFolder:function(){this.$bus.$emit("folder-project-reconfig",{type:"folder",id:this.id})},expiredDateName:function(e){return e.startsWith("days")?this.$t(e):e}})},An=Rn,$n=(r("fe8b"),r("5115"),Object(Le["a"])(An,Fn,Vn,!1,null,"1ee246d4",null)),Nn=$n.exports;function Mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(r),!0).forEach((function(t){Object($["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Re()($n,{VBtn:gt["a"],VCard:ht["a"],VCardTitle:vt["c"],VIcon:St["a"],VLayout:zt["a"],VList:nt["a"],VListItem:ot["a"],VListItemTitle:at["c"],VMenu:it["a"]});var Yn={name:"Project",mixins:[qe],components:{Folder:Nn,Draggable:Qe.a},data:function(){return{foldersContent:[]}},computed:Hn({},Object(R["c"])("projectView",["currentProjectFolders"]),{},Object(R["d"])("projectView",["currentProject"]),{foldersProxy:{get:function(){return this.currentProjectFolders},set:function(e){this.foldersContent=Object(A["a"])(e)}},dragOption:function(){return{animation:200,disabled:!1,group:"project",ghostClass:"draggable-ghost",handle:".project-handle"}}}),mounted:function(){this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer.$el)},methods:Hn({},Object(R["b"])("user",["modifyProject"]),{change:function(e){if(e.moved){var t=this.foldersContent.map((function(e){return e.id}));this.modifyProject({folders:t,id:this.currentProject})}}})},Bn=Yn,Gn=(r("016c"),Object(Le["a"])(Bn,En,Sn,!1,null,"ff579dfe",null)),Wn=Gn.exports;n["a"].use(Me["a"]);var Un=function(e,t,r){"todo"===e.name?De.dispatch("user/switchTodoView",!0):De.dispatch("user/switchTodoView",!1),r()},Jn=new Me["a"]({routes:[{path:"/",name:"home",component:fr,redirect:"/todo",children:[{name:"todo",path:"todo",beforeEnter:Un,components:{default:Pn,todoDetail:pn}},{name:"project",path:"project",beforeEnter:Un,components:{default:Wn,todoDetail:pn}}]}]}),qn=(r("d5e8"),r("5363"),r("7da8"),r("000c"),r("3f4f"));window.Vue=n["a"],window.idb=qn,window.initDB=k,window.dbHelper=T,window.dayjs=Y.a,n["a"].config.productionTip=!1,n["a"].config.devtools=!1,new n["a"]({router:Jn,store:De,vuetify:d,i18n:m,render:function(e){return e(Ne)}}).$mount("#app")},"587c":function(e,t,r){},"5c0b":function(e,t,r){"use strict";var n=r("587c"),o=r.n(n);o.a},"855a":function(e,t,r){},"9c05":function(e,t,r){},"9e21":function(e,t,r){"use strict";var n=r("abd0"),o=r.n(n);o.a},abd0:function(e,t,r){},c094:function(e,t,r){},cd5f:function(e,t,r){},cdbd:function(e,t,r){},cf6c:function(e,t,r){},da5a:function(e,t,r){"use strict";var n=r("49d1"),o=r.n(n);o.a},ee17:function(e,t,r){},f5d8:function(e,t,r){},fe8b:function(e,t,r){"use strict";var n=r("f5d8"),o=r.n(n);o.a}});
//# sourceMappingURL=app.106e35fd.js.map