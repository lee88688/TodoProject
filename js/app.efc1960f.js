(function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],u=0,m=[];u<s.length;u++)i=s[u],o[i]&&m.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"000c":function(t,e,n){},"081e":function(t,e,n){"use strict";var r=n("8330"),o=n.n(r);o.a},"0d59":function(t,e,n){},"19c5":function(t,e,n){"use strict";var r=n("1eb0"),o=n.n(r);o.a},"1eb0":function(t,e,n){},2766:function(t,e,n){"use strict";var r=n("8949"),o=n.n(r);o.a},2908:function(t,e,n){},3732:function(t,e,n){},"399e":function(t,e,n){},"3d1a":function(t,e,n){"use strict";var r=n("0d59"),o=n.n(r);o.a},4224:function(t,e,n){"use strict";var r=n("399e"),o=n.n(r);o.a},5115:function(t,e,n){"use strict";var r=n("68ab"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=n("f309"),a=n("5025"),i=n.n(a);r["a"].use(o["a"]);var s=new o["a"]({lang:{locales:{zhHans:i.a},current:"zh-Hans"},icons:{iconfont:"mdi"}}),c={install:function(t,e){t.prototype.$bus=new t}};r["a"].use(c);n("96cf");var l=n("3b8d"),d=(n("ac4d"),n("8a81"),n("ac6a"),n("bf12")),u=n("0581"),m=[{dbVersion:0,upgradeCallback:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n,r){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.createObjectStore("todos",{keyPath:"id"}),e.createObjectStore("archive",{keyPath:"id"}),e.createObjectStore("folders",{keyPath:"id"}),e.createObjectStore("projects",{keyPath:"id"}),e.createObjectStore("users",{keyPath:"id"}),o=e.createObjectStore("user"),t.next=8,o.transaction.done;case 8:return o=e.transaction("user","readwrite").objectStore("user"),o.put("","name"),o.put([],"projectList"),o.put([],"folderList"),t.next=14,o.transaction.done;case 14:case"end":return t.stop()}},t)}));function e(e,n,r){return t.apply(this,arguments)}return e}()}],f="TodoProject",p=2;function h(){return v.apply(this,arguments)}function v(){return v=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])(f,p,{upgrade:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n,r,o){var a,i,s,c,l,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=!0,i=!1,s=void 0,t.prev=3,c=m[Symbol.iterator]();case 5:if(a=(l=c.next()).done){t.next=14;break}if(d=l.value,d.dbVersion!==n){t.next=11;break}return t.next=10,d.upgradeCallback(e,n,r);case 10:return t.abrupt("break",14);case 11:a=!0,t.next=5;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](3),i=!0,s=t.t0;case 20:t.prev=20,t.prev=21,a||null==c.return||c.return();case 23:if(t.prev=23,!i){t.next=26;break}throw s;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,null,[[3,16,20,28],[21,,23,27]])}));function e(e,n,r,o){return t.apply(this,arguments)}return e}()});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})),v.apply(this,arguments)}var b={instance:null,initStart:!1,getInstance:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(null===this.instance){t.next=2;break}return t.abrupt("return",this.instance);case 2:if(!this.initStart){t.next=5;break}return e=500,t.abrupt("return",new Promise(function(t,n){var o=r,a=5,i=function r(){null!==o.instance?t(o.instance):a?(a--,setTimeout(r,e)):n(new Error("init indexedDB error"))};setTimeout(i,e)}));case 5:return this.initStart=!0,n=null,t.prev=7,t.next=10,h();case 10:n=t.sent,t.next=18;break;case 13:throw t.prev=13,t.t0=t["catch"](7),this.initStart=!1,console.error(t.t0),t.t0;case 18:return this.instance=n,this.initStart=!1,t.abrupt("return",this.instance);case 21:case"end":return t.stop()}},t,this,[[7,13]])}));function e(){return t.apply(this,arguments)}return e}()};function g(t){return k.apply(this,arguments)}function k(){return k=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getInstance();case 2:return n=t.sent,t.next=5,n.put("archive",e);case 5:case"end":return t.stop()}},t)})),k.apply(this,arguments)}function T(t){return x.apply(this,arguments)}function x(){return x=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getInstance();case 2:return n=t.sent,t.next=5,n.delete("archive",e);case 5:case"end":return t.stop()}},t)})),x.apply(this,arguments)}function C(t){return _.apply(this,arguments)}function _(){return _=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getInstance();case 2:return n=t.sent,t.next=5,n.get("archive",e);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}},t)})),_.apply(this,arguments)}function O(t){return j.apply(this,arguments)}function j(){return j=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n,r,o,a,i,s,c,l,u,m,f,p,h;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getInstance();case 2:n=t.sent,r=n.transaction(["archive"]),o=[],a=!0,i=!1,t.prev=7,c=Object(d["a"])(r.objectStore("archive"));case 9:return t.next=11,c.next();case 11:return l=t.sent,a=l.done,t.next=15,l.value;case 15:if(u=t.sent,a){t.next=32;break}m=u,f=m.value,p=!0,t.t0=regeneratorRuntime.keys(e);case 21:if((t.t1=t.t0()).done){t.next=28;break}if(h=t.t1.value,h in f&&f[h]===e[h]){t.next=26;break}return p=!1,t.abrupt("break",28);case 26:t.next=21;break;case 28:p&&o.push(f);case 29:a=!0,t.next=9;break;case 32:t.next=38;break;case 34:t.prev=34,t.t2=t["catch"](7),i=!0,s=t.t2;case 38:if(t.prev=38,t.prev=39,a||null==c.return){t.next=43;break}return t.next=43,c.return();case 43:if(t.prev=43,!i){t.next=46;break}throw s;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",o);case 49:case"end":return t.stop()}},t,null,[[7,34,38,48],[39,,43,47]])})),j.apply(this,arguments)}var w={install:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getInstance();case 2:n=t.sent,window.db=n,e.prototype.$db=n;case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()};r["a"].use(w);var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view")],1)},E=[],D={name:"App"},P=D,V=(n("5c0b"),n("2877")),S=n("6544"),L=n.n(S),F=n("7496"),I=Object(V["a"])(P,y,E,!1,null,null,null),R=I.exports;L()(I,{VApp:F["a"]});n("7f7f");var A=n("8c4f"),N=n("2f62"),M=(n("7514"),n("75fc")),$=(n("20d6"),n("bd86")),H=n("cebc"),G=n("c437"),Y=n.n(G),U=n("0644"),J=n.n(U),B=n("b8ce"),W=n.n(B),q=n("6747"),z=n.n(q);n("456d"),n("d225"),n("b0b4");function K(t,e){console.warn("".concat(t,": some key(").concat(e,") is missing!"))}var X;function Q(t,e){var n=t.findIndex(e);n>=0&&t.splice(n,1)}function Z(t){return Object.keys(t).forEach(function(e){void 0===t[e]&&delete t[e]})}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return"";var n=(new Date).getTime(),r=new Date(t).getTime();return e?r>n?"blue--text text--lighten-2":"red--text text--lighten-1":r>n?"blue lighten-2":"red lighten-1"}var et={ADD_FOLDER:"ADD_FOLDER",MODIFY_FOLDER:"MODIFY_FOLDER",DELETE_FOLDER:"DELETE_FOLDER",ADD_TODO:"ADD_TODO",MODIFY_TODO:"MODIFY_TODO",DELETE_TODO:"DELETE_TODO",SWITCH_MINI_FOLDER_LIST:"SWITCH_MINI_FOLDER_LIST",SWITCH_TODO_VIEW:"SWITCH_TODO_VIEW",ADD_PROJECT:"ADD_PROJECT",MODIFY_PROJECT:"MODIFY_PROJECT",DELETE_PROJECT:"DELETE_PROJECT",MODIFY_FOLDER_LIST:"MODIFY_FOLDER_LIST",MODIFY_PROJECT_LIST:"MODIFY_PROJECT_LIST"},nt={};for(var rt in et)nt[rt]="user/".concat(et[rt]);var ot,at,it={namespaced:!0,state:{id:"",name:"",projectList:[],folderList:[],lastModifiedTime:null,token:"",isTodoView:!0,showMiniFolderListView:!1,folders:{},projects:{},todos:{}},getters:{userInfo:function(t){return{id:t.id,name:t.name}},projectInfo:function(t){return function(e){var n=t.projects[e];if(!n)throw new Error("project id not found");var r=n.id,o=n.name;return{id:r,name:o}}},folderInfo:function(t){return function(e){var n=t.folders[e];if(!n)throw new Error("folder id not found");var r=n.id,o=n.name,a=n.project;return{id:r,name:o,project:a}}}},mutations:(X={},Object($["a"])(X,et.ADD_FOLDER,function(t,e){"id"in e?t.folders=Object(H["a"])({},t.folders,Object($["a"])({},e.id,e)):K(et.ADD_FOLDER,"id")}),Object($["a"])(X,et.MODIFY_FOLDER,function(t,e){var n=t.folders[e.id];n&&(n=Object(H["a"])({},n,e),Z(n),t.folders=Object(H["a"])({},t.folders,Object($["a"])({},n.id,n)))}),Object($["a"])(X,et.DELETE_FOLDER,function(t,e){e in t.folders&&r["a"].delete(t.folders,e)}),Object($["a"])(X,et.ADD_TODO,function(t,e){"id"in e&&"folder"in e?t.todos=Object(H["a"])({},t.todos,Object($["a"])({},e.id,e)):K(et.ADD_TODO,"id, folder")}),Object($["a"])(X,et.MODIFY_TODO,function(t,e){var n=t.todos[e.id];n&&(n=Object(H["a"])({},n,e),Z(n),t.todos=Object(H["a"])({},t.todos,Object($["a"])({},n.id,n)))}),Object($["a"])(X,et.DELETE_TODO,function(t,e){e in t.todos&&r["a"].delete(t.todos,e)}),Object($["a"])(X,et.SWITCH_MINI_FOLDER_LIST,function(t){t.showMiniFolderListView=!t.showMiniFolderListView}),Object($["a"])(X,et.SWITCH_TODO_VIEW,function(t,e){t.isTodoView=!!e}),Object($["a"])(X,et.ADD_PROJECT,function(t,e){"id"in e?t.projects=Object(H["a"])({},t.projects,Object($["a"])({},e.id,e)):K(et.ADD_PROJECT,"id")}),Object($["a"])(X,et.MODIFY_PROJECT,function(t,e){var n=t.projects[e.id];n&&(n=Object(H["a"])({},n,e),Z(n),t.projects=Object(H["a"])({},t.projects,Object($["a"])({},n.id,n)))}),Object($["a"])(X,et.DELETE_PROJECT,function(t,e){if(e in t.projects){var n=t.projectList.findIndex(function(t){return t===e});n>=0&&t.projectList.splice(n,1);var o=t.projects[e].folders;o.forEach(function(e){e in t.folders&&r["a"].delete(t.folders[e],"project")}),r["a"].delete(t.projects,e)}}),Object($["a"])(X,et.MODIFY_FOLDER_LIST,function(t,e){var n;z()(e)&&(n=t.folderList).splice.apply(n,[0,t.folderList.length].concat(Object(M["a"])(e)))}),Object($["a"])(X,et.MODIFY_PROJECT_LIST,function(t,e){var n;z()(e)&&(n=t.projectList).splice.apply(n,[0,t.projectList.length].concat(Object(M["a"])(e)))}),X),actions:{addTodo:function(t,e){var n=t.commit,r=t.dispatch;"id"in e||(e.id=Y()()),n(et.ADD_TODO,e),r("appendTodoToFolder",{todo:e.id,folder:e.folder})},modifyTodo:function(t,e){var n=t.commit,r=t.state,o=t.dispatch;if(e.id&&(n(et.MODIFY_TODO,J()(e)),e=W()(e),"folder"in e)){var a=r.folders[e.folder];if(a&&!a.undos.find(function(t){return t===e.id})){var i=r.todos[e.id].folder;i&&o("removeTodoFromFolder",{todo:e.id,folder:a.id}),o("appendTodoToFolder",{todo:e.id,folder:e.folder})}}},deleteTodo:function(t,e){var n=t.commit,r=t.dispatch,o=t.state;e in o.todos&&(r("removeTodoFromFolder",{todo:e,folder:o.todos[e].folder}),n(et.DELETE_TODO,e))},markTodoAsDone:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n){var r,o,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,o=e.state,t.next=3,r("modifyTodo",{id:n,complete:!0});case 3:return a=J()(o.todos[n]),t.next=6,r("deleteTodo",n);case 6:return t.next=8,g(a);case 8:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),markTodoAsUndone:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n){var r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,e.state,t.next=3,C(n);case 3:return o=t.sent,t.next=6,r("addTodo",o);case 6:return t.next=8,r("modifyTodo",{id:n,complete:!1});case 8:return t.next=10,T(n);case 10:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),addFolder:function(t,e){var n=t.commit,r=t.dispatch,o=Y()();e.id=o,e.undos=[],n(et.ADD_FOLDER,e),r("appendFolderToFolderList",o),"project"in e&&r("appendFolderToProject",{folder:o,project:e.project})},modifyFolder:function(t,e){var n=t.commit,r=t.state,o=t.dispatch;if(e.id&&e.id in r.folders&&(n(et.MODIFY_FOLDER,e),"project"in e)){var a=r.projects[e.project];if(a&&!a.folders.find(function(t){return t===e.id})){var i=r.folders[e.id].project;i&&o("removeFolderFromProject",{folder:e.id,project:e.project}),o("appendFolderToProject",{folder:e.id,project:e.project})}}},deleteFolder:function(t,e){var n=t.commit,r=t.dispatch,o=t.state;if(e in o.folders){r("removeFolderFromFolderList",e);var a=o.folders[e].project;a&&r("removeFolderFromProject",{project:a,folder:e});var i=o.folders[e].undos;n(et.DELETE_FOLDER,e),i.forEach(function(t){return n(et.DELETE_TODO,t)})}},appendTodoToFolder:function(t,e){t.commit;var n=t.state,r=t.dispatch,o=e.todo,a=e.folder;if(a in n.folders){var i=[].concat(Object(M["a"])(n.folders[a].undos),[o]);r("modifyFolder",{id:a,undos:i})}},removeTodoFromFolder:function(t,e){t.commit;var n=t.state,r=t.dispatch,o=e.todo,a=e.folder;if(o in n.todos&&a in n.folders){var i=W()(n.folders[a].undos);Q(i,function(t){return t===o}),r("modifyFolder",{id:a,undos:i})}},addProject:function(t,e){var n=t.commit,r=t.dispatch;e.id=Y()(),e.folders=[],n(et.ADD_PROJECT,e),r("appendProjectToProjectList",e.id)},modifyProject:function(t,e){var n=t.commit;e.id&&n(et.MODIFY_PROJECT,e)},deleteProject:function(t,e){var n=t.commit,r=t.state,o=t.dispatch,a=e.project,i=e.deleteSubs;if(a in r.projects){var s=[];!0===i&&(s=r.projects[a].folders),r.projects[a].folders.forEach(function(t){o("modifyFolder",{id:t,project:void 0})}),o("removeProjectFromProjectList",a),n(et.DELETE_PROJECT,a),s.forEach(function(t){return o("deleteFolder",t)})}},appendFolderToProject:function(t,e){var n=t.state,r=t.dispatch,o=e.folder,a=e.project;if(o in n.folders||a in n.projects){var i=n.projects[a],s=[].concat(Object(M["a"])(i.folders),[o]);r("modifyProject",{id:a,folders:s})}},removeFolderFromProject:function(t,e){var n=t.state,r=t.dispatch,o=e.folder,a=e.project;if(o in n.folders||a in n.projects){var i=W()(n.projects[a].folders);Q(i,function(t){return t===o}),r("modifyProject",{id:a,folders:i})}},modifyFolderList:function(t,e){var n=t.commit;n(et.MODIFY_FOLDER_LIST,e)},appendFolderToFolderList:function(t,e){var n=t.dispatch,r=t.state,o=[].concat(Object(M["a"])(r.folderList),[e]);n("modifyFolderList",o)},removeFolderFromFolderList:function(t,e){var n=t.state,r=t.dispatch,o=Object(M["a"])(n.folderList);Q(o,function(t){return t===e}),r("modifyFolderList",o)},modifyProjectList:function(t,e){var n=t.commit;n(et.MODIFY_PROJECT_LIST,e)},appendProjectToProjectList:function(t,e){var n=t.dispatch,r=t.state,o=[].concat(Object(M["a"])(r.projectList),[e]);n("modifyProjectList",o)},removeProjectFromProjectList:function(t,e){var n=t.dispatch,r=t.state,o=Object(M["a"])(r.projectList);Q(o,function(t){return t===e}),n("modifyProjectList",o)},switchMiniFolderListView:function(t){var e=t.commit;e(et.SWITCH_MINI_FOLDER_LIST)},switchTodoView:function(t,e){var n=t.commit;n(et.SWITCH_TODO_VIEW,e)}}},st=(n("6762"),n("2fdb"),{CHANGE_CURRENT_FOLDER:"CHANGE_CURRENT_FOLDER"}),ct={namespaced:!0,state:{specialList:{start:!1,today:!1,thisWeek:!1},currentFolder:""},getters:{currentFolderName:function(t,e,n,r){if(r["globalAction/searchValid"])return"搜索";switch(t.currentFolder){case"star":return"标星";case"today":return"今日";case"thisWeek":return"本周"}var o=n.user.folders[t.currentFolder];return o?o.name:""},folders:function(t,e,n){var r=n.user.folderList;return r.map(function(t){var e=n.user.folders[t],r=e.name,o=e.id,a=e.undos.length;return{id:o,name:r,undoNumber:a}})},starFolderTodos:function(t,e,n){var r=n.user.folderList;return r.map(function(t){var e=n.user.folders[t].name,r=n.user.folders[t].undos.map(function(t){return n.user.todos[t]}).filter(function(t){return t.star});return{name:e,todos:r}}).filter(function(t){var e=t.todos;return e.length})},searchFolderTodos:function(t,e,n){var r=n.globalAction.palette.input,o=n.user.folderList;return o.map(function(t){var e=n.user.folders[t].name,o=n.user.folders[t].undos.map(function(t){return n.user.todos[t]}).filter(function(t){return t.name.includes(r)});return{name:e,todos:o}}).filter(function(t){var e=t.todos;return e.length})},todos:function(t,e,n,r){if(r["globalAction/searchValid"]&&n.user.isTodoView)return e.searchFolderTodos;switch(t.currentFolder){case"star":return e.starFolderTodos;case"today":return[];case"thisWeek":return[];default:if(t.currentFolder in n.user.folders)break;return[]}var o=n.user.folders[t.currentFolder];return[{name:"",todos:o.undos.map(function(t){return n.user.todos[t]})}]}},mutations:Object($["a"])({},st.CHANGE_CURRENT_FOLDER,function(t,e){t.currentFolder=e}),actions:{changeFolder:function(t,e){var n=t.commit;"string"===typeof e&&n(st.CHANGE_CURRENT_FOLDER,e)}}},lt={CHANGE_DETAIL_VIEW_VISIBLE:"CHANGE_DETAIL_VIEW_VISIBLE",CHANGE_CURRENT_TODO:"CHANGE_CURRENT_TODO",CHANGE_CURRENT_COMPLETE_TODO:"CHANGE_CURRENT_COMPLETE_TODO",CHANGE_CURRENT_COMPLETE_TODO_TYPE:"CHANGE_CURRENT_COMPLETE_TODO_TYPE"},dt={NORMAL:"NORMAL",COMPLETE:"COMPLETE"},ut={namespaced:!0,state:{showDetailView:!1,currentTodo:"",currentTodoType:dt.NORMAL,currentCompleteTodo:""},getters:{isCompleteTodo:function(t){return t.currentTodoType===dt.COMPLETE}},mutations:(ot={},Object($["a"])(ot,lt.CHANGE_DETAIL_VIEW_VISIBLE,function(t,e){t.showDetailView=!!e}),Object($["a"])(ot,lt.CHANGE_CURRENT_TODO,function(t,e){"string"===typeof e&&(t.currentTodo=e)}),Object($["a"])(ot,lt.CHANGE_CURRENT_COMPLETE_TODO,function(t,e){t.currentCompleteTodo=e}),Object($["a"])(ot,lt.CHANGE_CURRENT_COMPLETE_TODO_TYPE,function(t,e){t.currentTodoType=e}),ot),actions:{changeDetailViewVisible:function(t,e){var n=t.commit;n(lt.CHANGE_DETAIL_VIEW_VISIBLE,e)},changeCurrentTodo:function(t,e){var n=t.commit,r=t.state;r.currentTodoType===dt.COMPLETE&&n(lt.CHANGE_CURRENT_COMPLETE_TODO_TYPE,dt.NORMAL),n(lt.CHANGE_CURRENT_TODO,e)},changeCurrentCompleteTodo:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n){var r,o,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,o=e.state,o.currentTodoType===dt.NORMAL&&r(lt.CHANGE_CURRENT_COMPLETE_TODO_TYPE,dt.COMPLETE),t.next=4,C(n);case 4:a=t.sent,r(lt.CHANGE_CURRENT_COMPLETE_TODO,a);case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}},mt={CHANGE_CURRENT_PROJECT:"CHANGE_CURRENT_PROJECT"},ft={namespaced:!0,state:{currentProject:""},getters:{projects:function(t,e,n){var r=n.user.projectList;return r.map(function(t){var e=n.user.projects[t],r=e.id,o=e.name;return{id:r,name:o}})},currentProjectFolders:function(t,e,n){var r=n.user.projects[t.currentProject];return r?r.folders.map(function(t){var e=n.user.folders[t],r=e.id,o=e.name;return{id:r,name:o}}):[]}},mutations:Object($["a"])({},mt.CHANGE_CURRENT_PROJECT,function(t,e){t.currentProject=e}),actions:{changeCurrentProject:function(t,e){var n=t.commit;"string"===typeof e&&n(mt.CHANGE_CURRENT_PROJECT,e)}}},pt=(n("386d"),{CHANGE_PALETTE:"CHANGE_PALETTE",CHANGE_SEARCH_STATUS:"CHANGE_SEARCH_STATUS"}),ht={namespaced:!0,state:{palette:{show:!1,prependIcon:"mdi-cloud-search-outline",appendIcon:"",placeholder:"",input:"",inputKey:"",extra:""},search:{isSearch:!1}},getters:{paletteShow:function(t){return t.palette.show},searchValid:function(t){return t.search.isSearch&&!!t.palette.input}},mutations:(at={},Object($["a"])(at,pt.CHANGE_PALETTE,function(t,e){for(var n in e)e.hasOwnProperty(n)&&n in t.palette&&(t.palette[n]=e[n])}),Object($["a"])(at,pt.CHANGE_SEARCH_STATUS,function(t,e){t.search.isSearch=e.isSearch}),at),actions:{changePaletteInput:function(t,e){var n=t.commit;n(pt.CHANGE_PALETTE,{input:e})},changePaletteShow:function(t,e){var n=t.commit;n(pt.CHANGE_PALETTE,{show:e})},clearPaletteExtra:function(t){var e=t.commit;e(pt.CHANGE_PALETTE,{extra:""})},startSearch:function(t){var e=t.commit;e(pt.CHANGE_PALETTE,{show:!0,input:"",prependIcon:"mdi-cloud-search-outline",appendIcon:"",placeholder:"请输入搜索关键词"}),e(pt.CHANGE_SEARCH_STATUS,{isSearch:!0})},startAddingNew:function(t,e){var n=t.commit,r=e.placeholder,o=e.extra;n(pt.CHANGE_PALETTE,{show:!0,prependIcon:"mdi-plus",appendIcon:"mdi-send",placeholder:r,input:"",extra:o})},clearSearchMode:function(t){var e=t.commit,n=t.state;n.search.isSearch&&e(pt.CHANGE_SEARCH_STATUS,{isSearch:!1})}}};function vt(t){return bt.apply(this,arguments)}function bt(){return bt=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n,r,o,a,i,s,c,l,u,m,f,p,h,v,g,k,T,x,C,_,O,j,w,y,E;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return vt.isReady=!1,t.next=3,b.getInstance();case 3:n=t.sent,r=n.transaction(["folders","todos","projects"]),o=!0,a=!1,t.prev=7,s=Object(d["a"])(r.objectStore("todos"));case 9:return t.next=11,s.next();case 11:return c=t.sent,o=c.done,t.next=15,c.value;case 15:if(l=t.sent,o){t.next=22;break}u=l,e.commit(nt.ADD_TODO,u.value);case 19:o=!0,t.next=9;break;case 22:t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](7),a=!0,i=t.t0;case 28:if(t.prev=28,t.prev=29,o||null==s.return){t.next=33;break}return t.next=33,s.return();case 33:if(t.prev=33,!a){t.next=36;break}throw i;case 36:return t.finish(33);case 37:return t.finish(28);case 38:m=!0,f=!1,t.prev=40,h=Object(d["a"])(r.objectStore("folders"));case 42:return t.next=44,h.next();case 44:return v=t.sent,m=v.done,t.next=48,v.value;case 48:if(g=t.sent,m){t.next=55;break}k=g,e.commit(nt.ADD_FOLDER,k.value);case 52:m=!0,t.next=42;break;case 55:t.next=61;break;case 57:t.prev=57,t.t1=t["catch"](40),f=!0,p=t.t1;case 61:if(t.prev=61,t.prev=62,m||null==h.return){t.next=66;break}return t.next=66,h.return();case 66:if(t.prev=66,!f){t.next=69;break}throw p;case 69:return t.finish(66);case 70:return t.finish(61);case 71:T=!0,x=!1,t.prev=73,_=Object(d["a"])(r.objectStore("projects"));case 75:return t.next=77,_.next();case 77:return O=t.sent,T=O.done,t.next=81,O.value;case 81:if(j=t.sent,T){t.next=88;break}w=j,e.commit(nt.ADD_PROJECT,w.value);case 85:T=!0,t.next=75;break;case 88:t.next=94;break;case 90:t.prev=90,t.t2=t["catch"](73),x=!0,C=t.t2;case 94:if(t.prev=94,t.prev=95,T||null==_.return){t.next=99;break}return t.next=99,_.return();case 99:if(t.prev=99,!x){t.next=102;break}throw C;case 102:return t.finish(99);case 103:return t.finish(94);case 104:return t.next=106,n.get("user","projectList");case 106:return y=t.sent,e.commit(nt.MODIFY_PROJECT_LIST,y),t.next=110,n.get("user","folderList");case 110:return E=t.sent,e.commit(nt.MODIFY_FOLDER_LIST,E),t.next=114,r.done;case 114:vt.isReady=!0;case 115:case"end":return t.stop()}},t,null,[[7,24,28,38],[29,,33,37],[40,57,61,71],[62,,66,70],[73,90,94,104],[95,,99,103]])})),bt.apply(this,arguments)}function gt(t){return kt.apply(this,arguments)}function kt(){return kt=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,vt.ready();case 2:return t.next=4,b.getInstance();case 4:n=t.sent,e.subscribe(function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(r){var o,a,i,s,c,l,d,u,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=r.type,t.next=t.t0===nt.MODIFY_FOLDER_LIST?3:t.t0===nt.MODIFY_PROJECT_LIST?6:t.t0===nt.ADD_TODO?9:t.t0===nt.MODIFY_TODO?9:t.t0===nt.DELETE_TODO?14:t.t0===nt.ADD_FOLDER?18:t.t0===nt.MODIFY_FOLDER?18:t.t0===nt.DELETE_FOLDER?23:t.t0===nt.ADD_PROJECT?27:t.t0===nt.MODIFY_PROJECT?27:t.t0===nt.DELETE_PROJECT?32:36;break;case 3:return t.next=5,n.put("user",r.payload,"folderList");case 5:return t.abrupt("break",37);case 6:return t.next=8,n.put("user",r.payload,"projectList");case 8:return t.abrupt("break",37);case 9:return o=r.payload.id,a=e.state.user.todos[o],t.next=13,n.put("todos",a);case 13:return t.abrupt("break",37);case 14:return i=r.payload,t.next=17,n.delete("todos",i);case 17:return t.abrupt("break",37);case 18:return s=r.payload.id,c=e.state.user.folders[s],t.next=22,n.put("folders",c);case 22:return t.abrupt("break",37);case 23:return l=r.payload,t.next=26,n.delete("folders",l);case 26:return t.abrupt("break",37);case 27:return d=r.payload.id,u=e.state.user.projects[d],t.next=31,n.put("projects",u);case 31:return t.abrupt("break",37);case 32:return m=r.payload,t.next=35,n.delete("projects",m);case 35:return t.abrupt("break",37);case 36:return t.abrupt("break",37);case 37:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}},t)})),kt.apply(this,arguments)}vt.ready=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var e=500,n=function n(){vt.isReady?t(vt.isReady):setTimeout(n,e)};setTimeout(n,e)}));case 1:case"end":return t.stop()}},t)})),r["a"].use(N["a"]);var Tt=new N["a"].Store({state:{},mutations:{},actions:{},modules:{user:it,todoView:ct,detailView:ut,projectView:ft,globalAction:ht},plugins:[vt,gt]}),xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0",staticStyle:{height:"100%"},attrs:{fluid:""}},[n("v-layout",{attrs:{"fill-height":""}},[n("v-flex",{staticClass:"left-folder-list"},[n("sidebar")],1),n("v-flex",{staticStyle:{overflow:"hidden"}},[n("router-view")],1),n("v-flex",{staticClass:"right-todo-detail"},[n("router-view",{attrs:{name:"todoDetail"}})],1)],1),n("v-snackbar",{staticClass:"folder-snackbar",attrs:{top:"",color:"transparent",timeout:0},model:{value:t.palette.show,callback:function(e){t.$set(t.palette,"show",e)},expression:"palette.show"}},[n("v-text-field",{attrs:{"prepend-inner-icon":t.palette.prependIcon,"append-icon":t.palette.appendIcon,placeholder:t.palette.placeholder,solo:"","hide-details":"",autofocus:""},on:{keyup:t.paletteKeyUp,"click:append":t.appendClick},model:{value:t.paletteInput,callback:function(e){t.paletteInput=e},expression:"paletteInput"}})],1)],1)},Ct=[],_t=n("b047c"),Ot=n.n(_t),jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticStyle:{height:"100%"},attrs:{column:""}},[n("v-toolbar",{staticStyle:{flex:"0 0 auto"},attrs:{flat:"",dense:"",dark:"",color:"blue-grey darken-1"}},[n("v-app-bar-nav-icon",{class:{"toolbar-side-icon-mini":t.showMiniFolderListView},on:{click:t.switchMiniFolderListView}}),t.showMiniFolderListView?t._e():[n("v-spacer"),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:t.addNewClick}},[n("v-icon",[t._v("mdi-plus")])],1),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:t.startSearch}},[n("v-icon",[t._v("mdi-folder-search")])],1),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:t.switchButtonClick}},[n("v-icon",[t._v(t._s(t.switchButtonIcon))])],1),n("v-btn",{staticClass:"ma-0",attrs:{icon:""}},[n("v-icon",[t._v("mdi-dots-vertical")])],1)]],2),n("v-flex",{staticClass:"folder-list-container",attrs:{grow:""}},[n("v-navigation-drawer",{ref:"folderList",staticClass:"ps",attrs:{"disable-resize-watcher":"",permanent:"",width:"300","mini-variant":t.showMiniFolderListView}},[t.isTodoView?n("folder-list",{on:{reconfig:function(e){return t.reconfig("folder",e)}}}):n("project-list",{on:{reconfig:function(e){return t.reconfig("project",e)}}})],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.add.dialog,callback:function(e){t.$set(t.add,"dialog",e)},expression:"add.dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.addDialogTitle))])]),n("v-tabs",{model:{value:t.add.activeTab,callback:function(e){t.$set(t.add,"activeTab",e)},expression:"add.activeTab"}},[n("v-tab",{key:0},[t._v("文件夹")]),n("v-tab-item",[n("v-card-text",[n("div",[n("v-text-field",{ref:"folderName",attrs:{rules:[t.rules.required],outline:"",label:"文件夹名称"},model:{value:t.add.folderName,callback:function(e){t.$set(t.add,"folderName",e)},expression:"add.folderName"}}),n("v-select",{attrs:{outline:"",items:t.projects,"item-value":"id","item-text":"name",label:"选择工程"},model:{value:t.add.folderProject,callback:function(e){t.$set(t.add,"folderProject",e)},expression:"add.folderProject"}})],1)])],1),n("v-tab",{key:1},[t._v("工程")]),n("v-tab-item",[n("v-card-text",[n("div",[n("v-text-field",{ref:"projectName",attrs:{rules:[t.rules.required],outline:"",label:"工程名称"},model:{value:t.add.projectName,callback:function(e){t.$set(t.add,"projectName",e)},expression:"add.projectName"}})],1)])],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(e){t.add.dialog=!1}}},[t._v("取消")]),n("v-btn",{attrs:{text:"",color:"blue darken-1"},on:{click:t.save}},[t._v("保存")])],1)],1)],1),n("v-dialog",{attrs:{persistent:"",width:"100px","content-class":"elevation-0"}},[n("div",{staticClass:"child-flex-center",staticStyle:{height:"100px"}},[n("v-progress-circular",{attrs:{indeterminate:"",size:50,color:"primary"}})],1)])],1)},wt=[],yt=n("b7f5"),Et={created:function(){this.pss=[]},beforeDestroy:function(){for(var t in this.pss)t.destroy&&t.destroy()},methods:{getPerfectScrollbarInstance:function(t,e){var n=new yt["a"](t,e);return this.pss.push(n),n}}},Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"pa-0",attrs:{dense:""}},[n("v-list-item",{class:"star"===t.currentFolder?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(e){return t.folderClick("star")},contextmenu:t.contextmenuClickDoNothing}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-star-outline")])],1),n("v-list-item-content",[t._v("标星")]),n("v-list-item-action-text",[n("span")])],1),n("v-list-item",{class:"today"===t.currentFolder?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(e){return t.folderClick("today")},contextmenu:t.contextmenuClickDoNothing}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-calendar-today")])],1),n("v-list-item-content",[t._v("今天")]),n("v-list-item-action-text",[n("span")])],1),n("v-list-item",{class:"thisWeek"===t.currentFolder?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(e){return t.folderClick("thisWeek")},contextmenu:t.contextmenuClickDoNothing}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-calendar-week")])],1),n("v-list-item-content",[t._v("本周")]),n("v-list-item-action-text",[n("span")])],1),n("draggable",t._b({attrs:{tag:"div"},on:{change:t.foldersChange},model:{value:t.foldersProxy,callback:function(e){t.foldersProxy=e},expression:"foldersProxy"}},"draggable",t.folderDragOption,!1),t._l(t.foldersProxy,function(e){return n("v-list-item",{key:e.id,class:t.currentFolder===e.id?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(n){return t.folderClick(e.id)},contextmenu:function(n){return t.contextmenuClick(n,e.id)}}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-format-list-checkbox")])],1),n("v-list-item-content",[t._v(t._s(e.name))]),n("v-list-item-action-text",[n("span",[t._v(t._s(e.undoNumber))])])],1)}),1),n("menu-items",{attrs:{menu:t.menu}})],1)},Pt=[],Vt=n("310e"),St=n.n(Vt),Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.menu.x,"position-y":t.menu.y},model:{value:t.menu.showMenu,callback:function(e){t.$set(t.menu,"showMenu",e)},expression:"menu.showMenu"}},[n("v-list",t._l(t.menu.menuItems,function(e,r){return n("v-list-item",{key:r,on:{click:function(e){return t.itemClick(r)}}},[n("v-list-item-title",[t._v(t._s(e.name))])],1)}),1)],1)},Ft=[],It={name:"MenuItems",props:{menu:{type:Object}},methods:{itemClick:function(t){var e=this.menu.menuItems[t];e.callback&&e.callback(this.menu.extra,e)}}},Rt=It,At=n("8860"),Nt=n("da13"),Mt=n("5d23"),$t=n("e449"),Ht=Object(V["a"])(Rt,Lt,Ft,!1,null,"4504412e",null),Gt=Ht.exports;L()(Ht,{VList:At["a"],VListItem:Nt["a"],VListItemTitle:Mt["c"],VMenu:$t["a"]});var Yt,Ut,Jt={components:{MenuItems:Gt},data:function(){return{menu:{showMenu:!1,x:0,y:0,extra:null,menuItems:[]}}},methods:{contextmenuClick:function(t,e){t.preventDefault(),this.menu.extra=e,this.menu.x=t.pageX,this.menu.y=t.pageY,this.menu.showMenu=!0},contextmenuClickDoNothing:function(t){t.preventDefault()},registerMenuItem:function(t){var e=this;z()(t)?t.forEach(function(t){"name"in t?e.menu.menuItems.push(t):console.warn("name is not in menu item!")}):console.warn("menuItems is not an array!")}}},Bt=n("2638"),Wt=n.n(Bt),qt=(n("c5f6"),n("169a")),zt=n("b0af"),Kt=n("99d9"),Xt=n("2fa4"),Qt=n("8336"),Zt={name:"message",components:{VDialog:qt["a"],VCard:zt["a"],VCardTitle:Kt["c"],VCardText:Kt["b"],VCardActions:Kt["a"],VSpacer:Xt["a"],VBtn:Qt["a"]},data:function(){return{isShow:!1,exitState:null}},props:{timeout:{type:Number,default:0},message:{default:""},title:{default:""}},destroyed:function(){this.$el&&this.$el.parentElement.removeChild(this.$el)},watch:{isShow:function(t){var e=this;t||this.$nextTick(function(){e.hideCallback&&e.hideCallback(e.exitState),e.$destroy()})}},methods:{show:function(){this.isShow=!0},hide:function(t){this.isShow=!1,this.exitState=t},setHideCallback:function(t){this.hideCallback=t}},render:function(){var t=this,e=arguments[0];return e("v-dialog",Wt()([{attrs:{value:this.isShow}},{on:{input:function(e){t.isShow=e}}},{attrs:{persistent:!0,maxWidth:"500px"}}]),[e("v-card",[e("v-card-title",{class:"headline"},[this.title]),e("v-card-text",[this.message]),e("v-card-actions",[e("v-spacer"),e("v-btn",Wt()([{attrs:{flat:!0}},{on:{click:function(){return t.hide(!1)}}}]),["取消"]),e("v-btn",Wt()([{attrs:{flat:!0,color:"primary"}},{on:{click:function(){return t.hide(!0)}}}]),["确认"])])])])}},te=Zt,ee=Object(V["a"])(te,Yt,Ut,!1,null,"0f5cb64e",null),ne=ee.exports,re=r["a"].extend(ne),oe=0,ae=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof t&&(t={message:t});var e="message-".concat(oe++),n=new re({propsData:t});return n.id=e,n.$mount(),document.body.appendChild(n.$el),n.show(),new Promise(function(t){n.setHideCallback(function(e){t(e)})})},ie=ae,se={name:"FolderList",mixins:[Jt],components:{Draggable:St.a},data:function(){return{foldersContent:[]}},computed:Object(H["a"])({},Object(N["d"])("todoView",["currentFolder"]),Object(N["c"])("todoView",["folders"]),{foldersProxy:{get:function(){return this.folders},set:function(t){this.foldersContent=Object(M["a"])(t)}},folderDragOption:function(){return{animation:200,disabled:!1,group:"aside-folder-list",ghostClass:"draggable-ghost"}}}),created:function(){var t=this;this.registerMenuItem([{name:"文件夹选项",callback:function(e){t.$emit("reconfig",e)}},{name:"删除文件夹",callback:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie({title:"删除",message:"是否删除文件夹？"});case 2:r=e.sent,r&&t.deleteFolder(n);case 4:case"end":return e.stop()}},e)}));function n(t){return e.apply(this,arguments)}return n}()}])},methods:Object(H["a"])({},Object(N["b"])("todoView",["changeFolder"]),Object(N["b"])("user",["modifyFolderList","deleteFolder"]),{folderClick:function(t){t&&this.changeFolder(t)},foldersChange:function(){this.modifyFolderList(this.foldersContent.map(function(t){return t.id}))}})},ce=se,le=n("132d"),de=n("1800"),ue=Object(V["a"])(ce,Dt,Pt,!1,null,null,null),me=ue.exports;L()(ue,{VIcon:le["a"],VList:At["a"],VListItem:Nt["a"],VListItemAction:de["a"],VListItemActionText:Mt["a"],VListItemContent:Mt["b"]});var fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"pa-0",attrs:{dense:""}},[n("draggable",t._b({attrs:{tag:"div"},on:{change:t.projectsChange},model:{value:t.projectsProxy,callback:function(e){t.projectsProxy=e},expression:"projectsProxy"}},"draggable",t.projectDragOption,!1),t._l(t.projectsProxy,function(e){return n("v-list-item",{key:e.id,class:t.currentProject===e.id?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(n){return t.projectClick(e.id)},contextmenu:function(n){return t.contextmenuClick(n,e.id)}}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-folder-multiple-outline")])],1),n("v-list-item-content",[t._v(t._s(e.name))])],1)}),1),n("menu-items",{attrs:{menu:t.menu}})],1)},pe=[],he={name:"ProjectList",mixins:[Jt],components:{Draggable:St.a},data:function(){return{projectsContent:[]}},computed:Object(H["a"])({},Object(N["d"])("projectView",["currentProject"]),Object(N["c"])("projectView",["projects"]),{projectsProxy:{get:function(){return this.projects},set:function(t){this.projectsContent=Object(M["a"])(t)}},projectDragOption:function(){return{animation:200,disabled:!1,group:"aside-project-list",ghostClass:"draggable-ghost"}}}),created:function(){var t=this;this.registerMenuItem([{name:"工程选项",callback:function(e){t.$emit("reconfig",e)}},{name:"删除工程",callback:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie({title:"删除",message:"是否删除该项目？"});case 2:r=e.sent,r&&t.deleteProject({project:n,deleteSubs:!1});case 4:case"end":return e.stop()}},e)}));function n(t){return e.apply(this,arguments)}return n}()},{name:"删除工程及其文件夹",callback:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie({title:"删除",message:"是否删除该项目及其文件夹？"});case 2:r=e.sent,r&&t.deleteProject({project:n,deleteSubs:!0});case 4:case"end":return e.stop()}},e)}));function n(t){return e.apply(this,arguments)}return n}()}])},methods:Object(H["a"])({},Object(N["b"])("projectView",["changeCurrentProject"]),Object(N["b"])("user",["modifyProjectList","deleteProject"]),{projectClick:function(t){this.changeCurrentProject(t)},projectsChange:function(){this.modifyProjectList(this.projectsContent.map(function(t){return t.id}))}})},ve=he,be=Object(V["a"])(ve,fe,pe,!1,null,null,null),ge=be.exports;L()(be,{VIcon:le["a"],VList:At["a"],VListItem:Nt["a"],VListItemAction:de["a"],VListItemContent:Mt["b"]});var ke={name:"Sidebar",mixins:[Et],components:{ProjectList:ge,FolderList:me},data:function(){return{mini:!1,add:{activeTab:0,folderName:"",folderProject:"",projectName:"",dialog:!1,isAdd:!0,extra:null},rules:{required:function(t){return!!t||"不能为空！"}}}},computed:Object(H["a"])({},Object(N["d"])("user",["showMiniFolderListView","isTodoView"]),Object(N["c"])("user",["projectInfo","folderInfo"]),Object(N["c"])("projectView",["projects"]),{switchButtonIcon:function(){return this.isTodoView?"mdi-format-list-checks":"mdi-view-list"},addFolderForm:function(){return["folderName"]},addProjectForm:function(){return["projectName"]},addDialogTitle:function(){return this.add.isAdd?"添加":"修改"}}),watch:{"add.dialog":function(t){var e=this;t||(this.addFolderForm.forEach(function(t){return e.$refs[t].reset()}),this.addProjectForm.forEach(function(t){return e.$refs[t].reset()}))}},mounted:function(){var t=this;this.ps=this.getPerfectScrollbarInstance(this.$refs.folderList.$el),this.$bus.$on("folder-project-reconfig",function(e){var n=e.type,r=e.id;t.reconfig(n,r)})},beforeDestroy:function(){this.$bus.$off("folder-project-reconfig")},methods:Object(H["a"])({},Object(N["b"])("user",["addFolder","switchMiniFolderListView","addProject","modifyFolder","modifyProject"]),Object(N["b"])("globalAction",["startSearch"]),{validateFolderForm:function(){var t=this;return this.addFolderForm.map(function(e){return t.$refs[e].validate()}).every(function(t){return t})},validateProjectForm:function(){var t=this;return this.addProjectForm.map(function(e){return t.$refs[e].validate()}).every(function(t){return t})},save:function(){this.add.isAdd?this.addNew():this.modify()},modify:function(){var t=this.add.extra.type;if("folder"===t&&this.validateFolderForm()){var e={id:this.add.extra.id,name:this.add.folderName};this.add.folderProject&&(e.project=this.add.folderProject),this.modifyFolder(e),this.add.dialog=!1}else if("project"===t&&this.validateProjectForm()){var n={id:this.add.extra.id,name:this.add.projectName};this.modifyProject(n),this.add.dialog=!1}},addNew:function(){if(0===this.add.activeTab&&this.validateFolderForm()){var t={name:this.add.folderName};this.add.folderProject&&(t.project=this.add.folderProject),this.addFolder(t),this.add.dialog=!1}else 1===this.add.activeTab&&this.validateProjectForm()&&(this.addProject({name:this.add.projectName}),this.add.dialog=!1)},switchButtonClick:function(){this.isTodoView?this.$router.push("/project"):this.$router.push("/todo")},reconfig:function(t,e){if(console.log("reconfig"),"folder"===t){var n=this.folderInfo(e);n.type="folder",this.add.extra=n,this.add.folderName=n.name,n.project&&(this.add.folderProject=n.project),this.add.activeTab=0}else if("project"===t){var r=this.projectInfo(e);r.type="project",this.add.extra=r,this.add.projectName=r.name,this.add.activeTab=1}this.add.isAdd=!1,this.add.dialog=!0},addNewClick:function(){this.add.isAdd=!0,this.add.dialog=!0}})},Te=ke,xe=(n("6a89"),n("3d1a"),n("5bc1")),Ce=n("0e8f"),_e=n("a722"),Oe=n("f774"),je=n("490a"),we=n("b974"),ye=n("71a3"),Ee=n("c671"),De=n("fe57"),Pe=n("8654"),Ve=n("71d9"),Se=Object(V["a"])(Te,jt,wt,!1,null,"21e38b93",null),Le=Se.exports;L()(Se,{VAppBarNavIcon:xe["a"],VBtn:Qt["a"],VCard:zt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:Kt["c"],VDialog:qt["a"],VFlex:Ce["a"],VIcon:le["a"],VLayout:_e["a"],VNavigationDrawer:Oe["a"],VProgressCircular:je["a"],VSelect:we["a"],VSpacer:Xt["a"],VTab:ye["a"],VTabItem:Ee["a"],VTabs:De["a"],VTextField:Pe["a"],VToolbar:Ve["a"]});var Fe={name:"Index",components:{Sidebar:Le},computed:Object(H["a"])({},Object(N["d"])("globalAction",["palette"]),{paletteInput:{get:function(){return this.$store.state.globalAction.palette.input},set:function(t){this.debouncePaletteInput(t)}}}),created:function(){this.debouncePaletteInput=Ot()(this.changePaletteInput,500)},methods:Object(H["a"])({},Object(N["b"])("globalAction",["changePaletteInput","changePaletteInputKey","changePaletteShow","clearPaletteExtra","clearSearchMode"]),{paletteKeyUp:function(t){this.$bus.$emit("palette-input-key",t.key),"Escape"===t.key&&(this.changePaletteShow(!1),this.clearSearchMode())},appendClick:function(){this.$bus.$emit("palette-append-click",this.$store.state.globalAction.palette.extra)}})},Ie=Fe,Re=(n("4224"),n("a523")),Ae=n("2db4"),Ne=Object(V["a"])(Ie,xt,Ct,!1,null,"dd89c2da",null),Me=Ne.exports;L()(Ne,{VContainer:Re["a"],VFlex:Ce["a"],VLayout:_e["a"],VSnackbar:Ae["a"],VTextField:Pe["a"]});var $e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",[n("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.showDetailView,expression:"showDetailView"}],staticStyle:{height:"100%",width:"350px"},attrs:{column:""}},[n("v-flex",{staticClass:"todo-detail-header",attrs:{shrink:""}},[n("v-checkbox",{staticClass:"ma-0",staticStyle:{flex:"0 0 auto"},attrs:{"hide-details":""},on:{change:t.refresh},model:{value:t.todo.complete,callback:function(e){t.$set(t.todo,"complete",e)},expression:"todo.complete"}}),t.nameEditMode?n("v-text-field",{staticClass:"pa-0 ma-0",attrs:{"hide-details":"","single-line":""},on:{blur:t.nameChange,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nameChange(e)}},model:{value:t.nameProxy,callback:function(e){t.nameProxy=e},expression:"nameProxy"}}):n("div",{staticClass:"todo-detail-header-text",on:{click:function(e){t.nameEditMode=!0}}},[t._v(t._s(t.todo.name))]),n("star-select",{on:{click:t.refresh},model:{value:t.todo.star,callback:function(e){t.$set(t.todo,"star",e)},expression:"todo.star"}})],1),n("v-flex",{ref:"scrollContainer",staticClass:"todo-detail-middle ps",staticStyle:{height:"0",position:"relative"},attrs:{grow:""}},[n("div",[n("v-subheader",{staticStyle:{height:"20px"}},[t._v("时间")]),n("date-setting",{staticClass:"mb-3",attrs:{"expired-date":t.todo.expired_date,"remind-time":t.todo.remind_time,repeat:t.todo.repeat},on:{input:t.timeChange}}),n("v-subheader",{staticStyle:{height:"20px"}},[t._v("子任务")]),t._l(t.todo.subtasks,function(e,r){return n("subtask",{key:r,staticClass:"todo-detail-icon-left-margin mb-2",attrs:{complete:e.complete,content:e.content},on:{input:function(e){return t.subtaskChange(r,e)},delete:function(e){return t.removeSubtask(r)}}})}),n("v-text-field",{staticClass:"todo-detail-icon-left-margin mb-3",attrs:{flat:"","hide-details":"",clearable:"","prepend-icon":"mdi-plus",label:"添加子任务"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterSubtask(e)}},model:{value:t.subtaskContent,callback:function(e){t.subtaskContent=e},expression:"subtaskContent"}}),n("v-textarea",{staticClass:"mb-3 todo-detail-icon-left-margin",attrs:{value:t.todo.remark,flat:"","hide-details":"","auto-grow":"","prepend-icon":"mdi-square-edit-outline",label:"备注"},on:{change:t.remarkChange}}),n("v-btn",{staticClass:"btn-block-align-left mb-3",attrs:{block:"",depressed:"",text:""}},[n("v-icon",{staticClass:"mr-1"},[t._v("mdi-attachment")]),t._v("添加文件")],1),t.showComments?n("v-list",{staticClass:"transparent"},[n("v-subheader",{staticStyle:{height:"20px"}},[t._v("评论")]),t._l(t.todo.comments,function(e,r){return[n("v-card",{key:r,staticClass:"transparent",attrs:{flat:""}},[n("v-layout",{staticClass:"pt-2 pb-0"},[n("v-flex",{staticClass:"pa-2",attrs:{shrink:""}},[n("v-avatar",{attrs:{color:"blue lighten-5",size:"40px"}},[t._v(t._s(e.name))])],1),n("v-flex",{attrs:{grow:""}},[n("v-card-title",{staticClass:"pa-0"},[n("div",[n("span",{staticClass:"title"},[t._v(t._s(e.content))]),n("br"),n("span",{staticClass:"subtitle-1 grey--text"},[t._v(t._s(e.time))])])]),n("v-card-actions",{staticClass:"pa-0"},[n("v-btn",{staticClass:"ma-0 pa-1 min-width-0",attrs:{text:"",color:"red lighten-3"},on:{click:function(e){return t.removeComment(r)}}},[t._v("删除")])],1),n("v-divider",{key:r})],1)],1)],1)]})],2):t._e()],2)]),n("v-flex",{staticClass:"todo-detail-end",attrs:{shrink:""}},[n("v-text-field",{staticClass:"ma-0",attrs:{"hide-details":"",label:"评论","prepend-inner-icon":"mdi-comment-processing-outline","append-icon":"mdi-send"},on:{"click:append":t.addNewComment},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}}),n("div",{staticClass:"todo-detail-bottom-bar"},[n("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""},on:{click:t.closeDetailView}},[n("v-icon",[t._v("mdi-chevron-double-right")])],1),n("v-subheader",{staticClass:"no-select"},[t._v(t._s(t.todo.create_time))]),n("div",[n("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""}},[n("v-icon",[t._v("mdi-sync")])],1),n("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""},on:{click:t.deleteClick}},[n("v-icon",[t._v("mdi-delete-outline")])],1)],1)],1)],1)],1)],1)},He=[],Ge=(n("a481"),n("14b9"),n("7618")),Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-1"},[n("v-layout",[n("v-menu",{attrs:{"offset-y":"","min-width":"0","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"ma-0 btn-block-align-left",attrs:{text:"",color:t.expiredDateColor}},r),[n("v-icon",{staticClass:"mr-1"},[t._v("mdi-calendar-multiselect")]),t._v("\n          "+t._s(t.expiredDate||"设置日期")+"\n        ")],1)]}}]),model:{value:t.datePickerMenu,callback:function(e){t.datePickerMenu=e},expression:"datePickerMenu"}},[n("date-picker",{attrs:{value:t.expiredDate},on:{input:t.datePickerInput,reset:function(e){t.datePickerMenu=!1}}})],1),t.expiredDate?n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{text:"",color:"grey lighten-1"},on:{click:t.clearExpiredDate}},[n("v-icon",[t._v("mdi-close")])],1):t._e()],1),t.expiredDate?[n("v-layout",[n("v-menu",{attrs:{"offset-y":"","min-width":"0","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"ma-0 btn-block-align-left",attrs:{depressed:"",text:"",color:t.remindTimeColor}},r),[n("v-icon",{staticClass:"mr-1"},[t._v("mdi-calendar-clock")]),t._v("\n            "+t._s(t.remindTime||"设置提醒时间")+"\n          ")],1)]}}],null,!1,1004261350),model:{value:t.dateTimePickerMenu,callback:function(e){t.dateTimePickerMenu=e},expression:"dateTimePickerMenu"}},[n("date-time-picker",{attrs:{value:t.remindTime},on:{input:t.dateTimePickerInput,reset:function(e){t.dateTimePickerMenu=!1}}})],1),t.remindTime?n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:t.clearRemindTime}},[n("v-icon",[t._v("mdi-close")])],1):t._e()],1),n("v-layout",[n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"ma-0 btn-block-align-left",attrs:{depressed:"",text:""}},r),[n("v-icon",{staticClass:"mr-1"},[t._v("mdi-redo-variant")]),t._v("\n            "+t._s(t.repeat||"从不重复")+"\n          ")],1)]}}],null,!1,843039013)},[n("v-list",t._l(t.repeatItems,function(e){return n("v-list-item",{key:e,on:{click:function(n){return t.repeatInput(e)}}},[n("v-list-item-title",[t._v(t._s(e))])],1)}),1)],1),t.repeat?n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:t.clearRepeat}},[n("v-icon",[t._v("mdi-close")])],1):t._e()],1)]:t._e()],2)},Ue=[],Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"date-time-picker"},[n("v-date-picker",{attrs:{"min-width":"0",color:"blue-grey darken-1"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[n("v-layout",{staticStyle:{width:"290px",margin:"-8px"},attrs:{"align-center":""}},[n("v-select",{attrs:{items:t.hours,label:"时",flat:"",solo:"","hide-details":""},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}}),n("div",{staticClass:"px-2 no-select child-flex-center time-colon",staticStyle:{"font-weight":"bold"}},[t._v(":")]),n("v-select",{attrs:{items:t.minutes,label:"分",flat:"",solo:"","hide-details":""},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}}),n("v-btn",{staticClass:"min-width-0",attrs:{text:""},on:{click:t.reset}},[n("v-icon",[t._v("mdi-close")])],1),n("v-btn",{staticClass:"min-width-0 ma-0",attrs:{text:""},on:{click:t.confirm}},[n("v-icon",[t._v("mdi-check")])],1)],1)],1)],1)},Be=[],We=Object(M["a"])(new Array(24).keys()),qe=Object(M["a"])(new Array(60).keys()),ze={name:"DateTimePicker",data:function(){return{hours:We,minutes:qe,date:"",hour:0,minute:0}},props:{value:{type:[String,Date],required:!0}},watch:{value:function(){this.reset()}},created:function(){this.reset()},methods:{reset:function(){var t=this.value?new Date(this.value):new Date;this.hour=t.getHours(),this.minute=t.getMinutes(),this.date=t.toISOString().slice(0,10),this.$emit("reset")},confirm:function(){var t=new Date(this.date);t.setHours(this.hour,this.minute),this.$emit("input",t.toISOString().substr(0,16).replace("T"," "))}}},Ke=ze,Xe=(n("6675"),n("2e4b")),Qe=Object(V["a"])(Ke,Je,Be,!1,null,"6910294e",null),Ze=Qe.exports;L()(Qe,{VBtn:Qt["a"],VDatePicker:Xe["a"],VIcon:le["a"],VLayout:_e["a"],VSelect:we["a"]});var tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"date-time-picker"},[n("v-date-picker",{attrs:{"min-width":"0",color:"blue-grey darken-1"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[n("div",{staticClass:"action-bar"},[n("v-btn",{attrs:{text:""},on:{click:t.reset}},[n("v-icon",[t._v("mdi-close")])],1),n("v-btn",{staticClass:"ma-0",attrs:{text:""},on:{click:t.confirm}},[n("v-icon",[t._v("mdi-check")])],1)],1)])],1)},en=[],nn={name:"DatePicker",data:function(){return{date:""}},props:{value:{type:[String,Date],required:!0}},watch:{value:function(){this.reset()}},methods:{reset:function(){this.date=this.value,this.$emit("reset")},confirm:function(){this.$emit("input",this.date)}}},rn=nn,on=(n("8821"),Object(V["a"])(rn,tn,en,!1,null,"560ede7a",null)),an=on.exports;L()(on,{VBtn:Qt["a"],VDatePicker:Xe["a"],VIcon:le["a"]});var sn={name:"DateSetting",components:{DatePicker:an,DateTimePicker:Ze},data:function(){return{repeatItems:["day","week","month","year"],datePickerMenu:!1,dateTimePickerMenu:!1}},props:{repeat:{type:String,default:""},expiredDate:{type:String,default:""},remindTime:{type:String,default:""}},computed:{expiredDateColor:function(){return tt(this.expiredDate)},remindTimeColor:function(){return tt(this.remindTime)}},methods:{repeatInput:function(t){this.$emit("input",{repeat:t})},datePickerInput:function(t){this.datePickerMenu=!1,this.$emit("input",{expiredDate:t})},dateTimePickerInput:function(t){this.dateTimePickerMenu=!1,this.$emit("input",{remindTime:t})},clearRepeat:function(){this.$emit("input",{repeat:""})},clearExpiredDate:function(){this.$emit("input",{expiredDate:""})},clearRemindTime:function(){this.$emit("input",{remindTime:""})}}},cn=sn,ln=Object(V["a"])(cn,Ye,Ue,!1,null,"7ae49894",null),dn=ln.exports;L()(ln,{VBtn:Qt["a"],VIcon:le["a"],VLayout:_e["a"],VList:At["a"],VListItem:Nt["a"],VListItemTitle:Mt["c"],VMenu:$t["a"]});var un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-icon",{on:{click:t.click}},[t._v(t._s(t.starIconName))])},mn=[],fn={name:"StarSelect",props:{value:{type:Boolean,default:!1}},computed:{starIconName:function(){return this.value?"mdi-star":"mdi-star-outline"}},methods:{click:function(){this.$emit("input",!this.value),this.$emit("click")}}},pn=fn,hn=Object(V["a"])(pn,un,mn,!1,null,null,null),vn=hn.exports;L()(hn,{VIcon:le["a"]});var bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"subtask"},[n("v-checkbox",{staticClass:"ma-0",attrs:{"input-value":t.complete,"hide-details":""},on:{change:function(e){return t.input({complete:e})}}}),n("v-text-field",{staticClass:"ma-0 pa-0",attrs:{disabled:t.complete,"single-line":"",flat:"","hide-details":""},on:{blur:function(e){return t.input({content:t.tempContent})}},model:{value:t.textField,callback:function(e){t.textField=e},expression:"textField"}}),n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:t.deleteClick}},[n("v-icon",[t._v("mdi-close")])],1)],1)},gn=[],kn={name:"Subtask",data:function(){return{tempContent:"",hasChanged:!1}},props:{complete:{type:Boolean,default:!1},content:{type:String,default:""}},computed:{textField:{get:function(){return this.content},set:function(t){this.hasChanged=!0,this.tempContent=t}}},watch:{content:{handler:function(){this.tempContent=this.content},immediate:!0}},methods:{deleteClick:function(){this.$emit("delete")},input:function(t){if(!("content"in t)||this.hasChanged){var e=this.complete,n=this.content;this.$emit("input",Object(H["a"])({complete:e,content:n},t)),this.hasChanged=!1}}}},Tn=kn,xn=(n("59f1"),n("ac7c")),Cn=Object(V["a"])(Tn,bn,gn,!1,null,"f07238f6",null),_n=Cn.exports;L()(Cn,{VBtn:Qt["a"],VCheckbox:xn["a"],VIcon:le["a"],VTextField:Pe["a"]});var On={name:"TodoDetail",mixins:[Et],components:{Subtask:_n,StarSelect:vn,DateSetting:dn},data:function(){return{todo:{name:"",complete:!1,star:!1,expired_date:"",remind_time:"",repeat:"",subtasks:[],remark:"",attachment:[],comments:[],create_time:""},subtaskContent:"",nameEditMode:!1,nameContent:"",commentContent:""}},computed:Object(H["a"])({},Object(N["d"])("user",["todos"]),Object(N["d"])("detailView",["currentCompleteTodo"]),Object(N["d"])("detailView",["showDetailView","currentTodo"]),Object(N["c"])("user",["userInfo"]),Object(N["c"])("detailView",["isCompleteTodo"]),{currentTodoDetail:function(){return this.isCompleteTodo?this.currentCompleteTodo:this.todos[this.currentTodo]},nameProxy:{get:function(){return this.todo.name},set:function(t){this.nameContent=t}},showComments:function(){return!(!this.todo.comments||!this.todo.comments.length)}}),watch:{currentTodoDetail:{handler:function(t){if(t){for(var e in this.clearTodo(),this.todo){var n;if(void 0!==t[e]&&null!==t[e])if(z()(this.todo[e]))(n=this.todo[e]).splice.apply(n,[0,this.todo[e].length].concat(Object(M["a"])(t[e])));else this.todo[e]=t[e]}this.$refs.scrollContainer.scrollTop=0,this.ps.update()}},immediate:!0}},mounted:function(){this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer)},methods:Object(H["a"])({},Object(N["b"])("user",["modifyTodo","deleteTodo"]),Object(N["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo"]),{enterSubtask:function(){this.subtaskContent&&(this.todo.subtasks.push({complete:!1,content:this.subtaskContent}),this.subtaskContent="",this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks}))},subtaskChange:function(t,e){this.todo.subtasks.splice(t,1,e),this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks})},removeSubtask:function(t){this.todo.subtasks.splice(t,1),this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks})},remarkChange:function(t){this.todo.remark=t,this.modifyTodo({id:this.currentTodo,remark:t})},refresh:function(){this.modifyTodo(Object(H["a"])({id:this.currentTodo},this.todo))},closeDetailView:function(){this.changeDetailViewVisible(!1)},clearTodo:function(){for(var t in this.todo)if(this.todo.hasOwnProperty(t))switch(Object(Ge["a"])(this.todo[t])){case"boolean":this.todo[t]=!1;break;case"string":this.todo[t]="";break;case"object":z()(this.todo[t])&&this.todo[t].splice(0,this.todo[t].length);break;default:this.todo[t]=null;break}},timeChange:function(t){var e=t.expiredDate,n=t.remindTime,r=t.repeat,o={id:this.currentTodo};void 0!==e&&(o.expired_date=e),void 0!==n&&(o.remind_time=n),void 0!==r&&(o.repeat=r),this.modifyTodo(o)},nameChange:function(){this.todo.name=this.nameContent,this.nameEditMode=!1,this.modifyTodo({id:this.currentTodo,name:this.todo.name})},addNewComment:function(){if(this.commentContent){var t=this.todo.comments;t.push({user:this.userInfo.id,name:this.userInfo.name,content:this.commentContent,time:(new Date).toISOString().substr(0,19).replace("T"," ")}),this.commentContent="",this.modifyTodo({id:this.currentTodo,comments:t})}},removeComment:function(t){var e=this.todo.comments;e.splice(t,1),this.modifyTodo({id:this.currentTodo,comments:e})},deleteClick:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ie({title:"删除",message:"是否删除当前清单？"});case 2:e=t.sent,e&&(this.deleteTodo(this.currentTodo),this.changeCurrentTodo(""),this.changeDetailViewVisible(!1));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()})},jn=On,wn=(n("998d"),n("8212")),yn=n("ce7e"),En=n("e0c7"),Dn=n("a844"),Pn=Object(V["a"])(jn,$e,He,!1,null,"6cd462aa",null),Vn=Pn.exports;L()(Pn,{VAvatar:wn["a"],VBtn:Qt["a"],VCard:zt["a"],VCardActions:Kt["a"],VCardTitle:Kt["c"],VCheckbox:xn["a"],VDivider:yn["a"],VFlex:Ce["a"],VIcon:le["a"],VLayout:_e["a"],VList:At["a"],VSubheader:En["a"],VTextField:Pe["a"],VTextarea:Dn["a"]});var Sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:"","fill-height":""}},[n("v-flex",{staticStyle:{width:"100%"},attrs:{shrink:""}},[n("v-toolbar",{attrs:{flat:"",dense:"",dark:"",color:"blue-grey lighten-1"}},[n("v-toolbar-title",[t._v(t._s(t.currentFolderName))]),n("v-spacer"),n("v-toolbar-items")],1)],1),n("v-flex",{staticClass:"pa-3 blue-grey lighten-1",staticStyle:{overflow:"hidden"},attrs:{grow:""}},[n("v-layout",{staticStyle:{height:"100%"},attrs:{column:""}},[t.canAddNewTodo?n("v-flex",{attrs:{shrink:""}},[n("v-text-field",{attrs:{solo:"","prepend-inner-icon":"mdi-plus","append-icon":"mdi-send",placeholder:"添加新任务"},on:{"click:append":t.addNewTodo,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addNewTodo(e)}},model:{value:t.todoName,callback:function(e){t.todoName=e},expression:"todoName"}})],1):t._e(),n("v-flex",{ref:"scrollContainer",staticClass:"ps",staticStyle:{overflow:"hidden",height:"0",position:"relative"},attrs:{grow:""}},[n("v-list",{staticClass:"transparent"},[t._l(t.todosProxy,function(e,r){return[e.name?n("v-btn",{key:e.name+r,staticClass:"min-width-0",attrs:{text:"",small:"",dark:""}},[t._v(t._s(e.name))]):t._e(),t._l(e.todos,function(e){return n("todo-item",{key:e.id,attrs:{todo:e},on:{click:t.clickTodo,"click:checkbox":t.clickComplete,"click:star":t.clickStar}})})]}),t.isSpecialFolder?t._e():[n("v-btn",{staticClass:"min-width-0",attrs:{loading:t.completeTodo.isLoading,text:"",small:"",dark:""},on:{click:t.clickLoadingCompleteBtn}},[t._v(t._s(t.loadingCompleteBtnName))]),t._l(t.completeTodo.todos,function(e){return n("todo-item",{key:e.id,staticStyle:{opacity:"0.6"},attrs:{todo:e},on:{click:t.clickCompleteTodo,"click:checkbox":t.clickIncomplete}})})]],2)],1)],1)],1)],1)},Ln=[],Fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",{staticClass:"elevation-1 my-1 todo-item",class:t.showDetailView&&t.currentTodo===t.todo.id?"todo-item-selected":"",attrs:{ripple:""},on:{click:function(e){return t.click(t.todo.id)}}},[n("v-list-item-action",{staticStyle:{"min-width":"0"}},[n("v-checkbox",{attrs:{"input-value":t.todo.complete},on:{change:function(e){return t.clickComplete(t.todo.id,e)}},nativeOn:{click:function(e){return e.stopPropagation(),t.doNothing(e)}}})],1),n("v-list-item-content",[t._v(t._s(t.todo.name))]),n("v-list-item-content",{staticClass:"mr-3",staticStyle:{flex:"0 0 auto"}},[n("span",{staticStyle:{display:"inline-flex"}},[t.todo.showExpiredDate?n("span",{staticClass:"mr-2",class:t.todo.expiredDateColor},[t._v(t._s(t.todo.expiredDate))]):t._e(),t.todo.totalSubtask?n("span",{staticClass:"mr-2",staticStyle:{display:"inline-flex"}},[n("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-checkbox-marked-circle-outline")]),t._v("\n                    "+t._s(t.todo.reserveSubtask)+"/"+t._s(t.todo.totalSubtask)+"\n                  ")],1):t._e(),t.todo.comment?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-comment-outline")]):t._e(),t.todo.attachment?n("v-icon",{attrs:{small:""}},[t._v("mdi-attachment")]):t._e()],1)]),n("star-select",{attrs:{value:t.todo.star},on:{input:function(e){return t.clickStar(t.todo.id,e)}},nativeOn:{click:function(e){return e.stopPropagation(),t.doNothing(e)}}})],1)},In=[],Rn={name:"TodoItem",components:{StarSelect:vn},props:{todo:{required:!0}},computed:Object(H["a"])({},Object(N["d"])("user",["currentTodo","showDetailView"])),methods:{doNothing:function(){},click:function(t){this.$emit("click",t)},clickComplete:function(t,e){this.$emit("click:checkbox",{id:t,complete:e})},clickStar:function(t,e){this.$emit("click:star",{id:t,star:e})}}},An=Rn,Nn=(n("2766"),Object(V["a"])(An,Fn,In,!1,null,"8fcd220e",null)),Mn=Nn.exports;function $n(t){var e=t.id,n=t.name,r=t.complete,o=!!t.attachment&&t.attachment.length>0,a=t.subtasks?t.subtasks.length:0,i=a?t.subtasks.filter(function(t){return t.complete}).length:0,s=!!t.comments&&t.comments.length>0,c=!!t.expired_date,l=t.expired_date,d=tt(l,!0),u=!!t.star;return{id:e,name:n,complete:r,attachment:o,totalSubtask:a,reserveSubtask:i,comment:s,showExpiredDate:c,expiredDate:l,expiredDateColor:d,star:u}}L()(Nn,{VCheckbox:xn["a"],VIcon:le["a"],VListItem:Nt["a"],VListItemAction:de["a"],VListItemContent:Mt["b"]});var Hn={name:"TodoList",components:{TodoItem:Mn},mixins:[Et],data:function(){return{todoName:"",completeTodo:{isLoading:!1,isShow:!1,todos:[]}}},computed:Object(H["a"])({},Object(N["c"])("todoView",["todos","currentFolderName"]),Object(N["c"])("globalAction",["searchValid"]),Object(N["d"])("todoView",["currentFolder"]),{canAddNewTodo:function(){if(this.searchValid)return!1;switch(this.currentFolder){case"star":return!1;case"today":return!1;case"thisWeek":return!1;default:return!0}},todosProxy:function(){return this.todos.map(function(t){return Object(H["a"])({},t,{todos:t.todos.map($n)})})},isSpecialFolder:function(){return!this.canAddNewTodo},loadingCompleteBtnName:function(){return this.completeTodo.isShow?"隐藏已完成任务":"显示已完成任务"}}),watch:{currentFolder:function(){this.completeTodo.isShow=!1,this.completeTodo.todos.splice(0,this.completeTodo.todos.length),this.changeDetailViewVisible(!1)}},mounted:function(){this.getPerfectScrollbarInstance(this.$refs.scrollContainer)},methods:Object(H["a"])({},Object(N["b"])("user",["addTodo","modifyTodo","markTodoAsDone","markTodoAsUndone"]),Object(N["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo","changeCurrentCompleteTodo"]),{addNewTodo:function(){this.todoName&&(this.addTodo({name:this.todoName,folder:this.currentFolder}),this.todoName="")},clickTodo:function(t){this.changeCurrentTodo(t),this.changeDetailViewVisible(!0)},clickComplete:function(t){var e=t.id,n=t.complete;n&&this.markTodoAsDone(e)},clickStar:function(t){var e=t.id,n=t.star;this.modifyTodo({id:e,star:n})},loadingCompleteTodo:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.completeTodo.isLoading=!0,t.next=3,O({folder:this.currentFolder});case 3:n=t.sent,(e=this.completeTodo.todos).splice.apply(e,[0,this.completeTodo.todos.length].concat(Object(M["a"])(n))),this.completeTodo.isLoading=!1;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clickLoadingCompleteBtn:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.completeTodo.isShow=!this.completeTodo.isShow,this.completeTodo.isShow){t.next=4;break}return this.completeTodo.todos.splice(0,this.completeTodo.todos.length),t.abrupt("return");case 4:return t.next=6,this.loadingCompleteTodo();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clickCompleteTodo:function(t){this.changeCurrentCompleteTodo(t),this.changeDetailViewVisible(!0)},clickIncomplete:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.id,r=e.complete,!n||r){t.next=6;break}return t.next=4,this.markTodoAsUndone(n);case 4:return t.next=6,this.loadingCompleteTodo();case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})},Gn=Hn,Yn=n("2a7f"),Un=Object(V["a"])(Gn,Sn,Ln,!1,null,"007049eb",null),Jn=Un.exports;L()(Un,{VBtn:Qt["a"],VFlex:Ce["a"],VLayout:_e["a"],VList:At["a"],VSpacer:Xt["a"],VTextField:Pe["a"],VToolbar:Ve["a"],VToolbarItems:Yn["a"],VToolbarTitle:Yn["b"]});var Bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"project-view blue-grey lighten-5"},[n("draggable",t._b({ref:"scrollContainer",staticClass:"folder-list pa-2 ps",on:{change:t.change},model:{value:t.foldersProxy,callback:function(e){t.foldersProxy=e},expression:"foldersProxy"}},"draggable",t.dragOption,!1),t._l(t.foldersProxy,function(t){return n("folder",{key:t.id,staticClass:"mr-2",attrs:{id:t.id,name:t.name}})}),1)],1)},Wn=[],qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"project-view-folder blue-grey lighten-4 pa-2",attrs:{column:""}},[n("div",{staticClass:"folder-header project-handle"},[n("span",{staticClass:"title no-select"},[t._v(t._s(t.name))]),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:t.addNewTask}},[n("v-icon",[t._v("mdi-plus")])],1),n("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"mx-0",attrs:{icon:""}},r),[n("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{on:{click:t.reconfigFolder}},[n("v-list-item-title",[t._v("修改文件夹")])],1),n("v-list-item",{on:{click:t.deleteClick}},[n("v-list-item-title",[t._v("删除文件夹")])],1)],1)],1)],1),n("draggable",t._b({ref:"scrollContainer",staticClass:"ps",staticStyle:{position:"relative"},attrs:{tag:"div"},on:{change:t.change},model:{value:t.todosProxy,callback:function(e){t.todosProxy=e},expression:"todosProxy"}},"draggable",t.dragOption,!1),t._l(t.todosProxy,function(e){return n("v-card",{key:e.id,staticClass:"mb-2",attrs:{flat:"",ripple:""},on:{click:function(n){return t.clickTodo(e.id)},contextmenu:function(n){return t.contextmenuClick(n,e.id)}}},[n("v-card-title",{staticClass:"pa-2"},[n("div",[n("div",{staticClass:"subtitle-1 no-select mb-2"},[t._v(t._s(e.name))]),n("div",[e.totalSubtask?n("span",{staticClass:"mr-2",staticStyle:{"font-size":"0.9rem"}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-checkbox-marked-circle-outline")]),t._v("\n              "+t._s(e.reserveSubtask)+"/"+t._s(e.totalSubtask)+"\n            ")],1):t._e(),e.star?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-star-outline")]):t._e(),e.showExpiredDate?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-calendar")]):t._e(),e.comment?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-comment-outline")]):t._e(),e.attachment?n("v-icon",{attrs:{small:""}},[t._v("mdi-attachment")]):t._e()],1)])])],1)}),1),n("menu-items",{attrs:{menu:t.menu}})],1)},zn=[],Kn={name:"Folder",mixins:[Et,Jt],components:{Draggable:St.a},data:function(){return{todosContent:[],snackbar:!1}},props:{id:{type:String,required:!0},name:{type:String,default:""}},computed:Object(H["a"])({},Object(N["d"])("user",["folders","todos"]),Object(N["c"])("globalAction",["paletteShow","searchValid"]),{todosProxy:{get:function(){var t=this,e=this.folders[this.id];if(!e)return[];var n=this.$store.state.globalAction.palette.input,r=e.undos.map(function(e){var n=t.todos[e],r=n.id,o=n.name,a=!!n.attachment&&n.attachment.length>0,i=n.subtasks?n.subtasks.length:0,s=i?n.subtasks.filter(function(t){return t.complete}).length:0,c=!!n.comments&&n.comments.length>0,l=!!n.expired_date,d=!!n.star;return{id:r,name:o,attachment:a,totalSubtask:i,reserveSubtask:s,comment:c,showExpiredDate:l,star:d}});return this.searchValid?r.filter(function(t){return t.name.includes(n)}):r},set:function(t){this.todosContent=Object(M["a"])(t)}},dragOption:function(){return{animation:200,disabled:!1,group:"project-folder",ghostClass:"draggable-ghost"}}}),created:function(){var t=this;this.registerMenuItem([{name:"标记为完成"},{name:"删除任务",callback:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie({title:"删除任务",content:"是否删除当前任务？"});case 2:r=e.sent,r&&t.deleteTodo(n);case 4:case"end":return e.stop()}},e)}));function n(t){return e.apply(this,arguments)}return n}()}])},mounted:function(){var t=this;this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer.$el),this.paletteClick=function(e){e===t.id&&(t.addTodo({name:t.$store.state.globalAction.palette.input,folder:e}),t.changePaletteShow(!1))},this.$bus.$on("palette-append-click",this.paletteClick)},beforeDestroy:function(){this.$bus.$off("palette-append-click",this.paletteClick)},methods:Object(H["a"])({},Object(N["b"])("user",["modifyFolder","deleteFolder","addTodo","deleteTodo"]),Object(N["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo"]),Object(N["b"])("globalAction",["startAddingNew","changePaletteShow"]),{change:function(){var t=this.todosContent.map(function(t){return t.id});this.modifyFolder({id:this.id,undos:t})},clickTodo:function(t){this.changeCurrentTodo(t),this.changeDetailViewVisible(!0)},deleteClick:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ie({title:"删除",message:"是否删除文件夹？"});case 2:e=t.sent,e&&this.deleteFolder(this.id);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addNewTask:function(){this.paletteShow&&this.changePaletteShow(!1),this.startAddingNew({placeholder:"".concat(this.name,": 添加新任务"),extra:this.id})},reconfigFolder:function(){this.$bus.$emit("folder-project-reconfig",{type:"folder",id:this.id})}})},Xn=Kn,Qn=(n("081e"),n("5115"),Object(V["a"])(Xn,qn,zn,!1,null,"b74907cc",null)),Zn=Qn.exports;L()(Qn,{VBtn:Qt["a"],VCard:zt["a"],VCardTitle:Kt["c"],VIcon:le["a"],VLayout:_e["a"],VList:At["a"],VListItem:Nt["a"],VListItemTitle:Mt["c"],VMenu:$t["a"]});var tr={name:"Project",mixins:[Et],components:{Folder:Zn,Draggable:St.a},data:function(){return{foldersContent:[]}},computed:Object(H["a"])({},Object(N["c"])("projectView",["currentProjectFolders"]),Object(N["d"])("projectView",["currentProject"]),{foldersProxy:{get:function(){return this.currentProjectFolders},set:function(t){this.foldersContent=Object(M["a"])(t)}},dragOption:function(){return{animation:200,disabled:!1,group:"project",ghostClass:"draggable-ghost",handle:".project-handle"}}}),mounted:function(){this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer.$el)},methods:Object(H["a"])({},Object(N["b"])("user",["modifyProject"]),{change:function(t){if(t.moved){var e=this.foldersContent.map(function(t){return t.id});this.modifyProject({folders:e,id:this.currentProject})}}})},er=tr,nr=(n("19c5"),Object(V["a"])(er,Bn,Wn,!1,null,"482e0859",null)),rr=nr.exports;r["a"].use(A["a"]);var or=function(t,e,n){"todo"===t.name?Tt.dispatch("user/switchTodoView",!0):Tt.dispatch("user/switchTodoView",!1),n()},ar=new A["a"]({routes:[{path:"/",name:"home",component:Me,redirect:"/todo",children:[{name:"todo",path:"todo",beforeEnter:or,components:{default:Jn,todoDetail:Vn}},{name:"project",path:"project",beforeEnter:or,components:{default:rr,todoDetail:Vn}}]}]}),ir=n("9483");Object(ir["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d5e8"),n("5363"),n("7da8"),n("000c");var sr=n("3f4f");window.Vue=r["a"],window.idb=sr,window.initDB=h,window.dbHelper=b,r["a"].config.productionTip=!1,r["a"].config.devtools=!1,new r["a"]({router:ar,store:Tt,vuetify:s,render:function(t){return t(R)}}).$mount("#app")},"59f1":function(t,e,n){"use strict";var r=n("2908"),o=n.n(r);o.a},"5c0b":function(t,e,n){"use strict";var r=n("6879"),o=n.n(r);o.a},6675:function(t,e,n){"use strict";var r=n("3732"),o=n.n(r);o.a},6879:function(t,e,n){},"68ab":function(t,e,n){},"6a89":function(t,e,n){"use strict";var r=n("c26f"),o=n.n(r);o.a},"782c":function(t,e,n){},8330:function(t,e,n){},8821:function(t,e,n){"use strict";var r=n("fd0e"),o=n.n(r);o.a},8949:function(t,e,n){},"998d":function(t,e,n){"use strict";var r=n("782c"),o=n.n(r);o.a},c26f:function(t,e,n){},fd0e:function(t,e,n){}});
//# sourceMappingURL=app.efc1960f.js.map