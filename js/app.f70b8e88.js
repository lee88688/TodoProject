(function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)i=s[u],o[i]&&m.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/TodoProject/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"000c":function(e,t,n){},"016c":function(e,t,n){"use strict";var r=n("99a0"),o=n.n(r);o.a},"024b":function(e,t,n){"use strict";var r=n("eb77"),o=n.n(r);o.a},"08aa":function(e,t,n){},"0d59":function(e,t,n){},"23a3":function(e,t,n){},"3d1a":function(e,t,n){"use strict";var r=n("0d59"),o=n.n(r);o.a},"401e":function(e,t,n){},4712:function(e,t,n){},5115:function(e,t,n){"use strict";var r=n("68ab"),o=n.n(r);o.a},"55aa":function(e,t,n){"use strict";var r=n("401e"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=n("f309"),a=n("5025"),i=n.n(a);r["a"].use(o["a"]);var s=new o["a"]({lang:{locales:{zhHans:i.a},current:"zh-Hans"},icons:{iconfont:"mdi"}}),c={install:function(e,t){e.prototype.$bus=new e}};r["a"].use(c);n("96cf");var l=n("3b8d"),d=(n("ac4d"),n("8a81"),n("ac6a"),n("bf12")),u=n("0581"),m=[{dbVersion:0,upgradeCallback:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n,r){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.createObjectStore("todos",{keyPath:"id"}),t.createObjectStore("archive",{keyPath:"id"}),t.createObjectStore("folders",{keyPath:"id"}),t.createObjectStore("projects",{keyPath:"id"}),t.createObjectStore("users",{keyPath:"id"}),o=t.createObjectStore("user"),e.next=8,o.transaction.done;case 8:return o=t.transaction("user","readwrite").objectStore("user"),o.put("","name"),o.put([],"projectList"),o.put([],"folderList"),e.next=14,o.transaction.done;case 14:case"end":return e.stop()}},e)}));function t(t,n,r){return e.apply(this,arguments)}return t}()}],f="TodoProject",p=2;function h(){return v.apply(this,arguments)}function v(){return v=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["a"])(f,p,{upgrade:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n,r,o){var a,i,s,c,l,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=!0,i=!1,s=void 0,e.prev=3,c=m[Symbol.iterator]();case 5:if(a=(l=c.next()).done){e.next=14;break}if(d=l.value,d.dbVersion!==n){e.next=11;break}return e.next=10,d.upgradeCallback(t,n,r);case 10:return e.abrupt("break",14);case 11:a=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](3),i=!0,s=e.t0;case 20:e.prev=20,e.prev=21,a||null==c.return||c.return();case 23:if(e.prev=23,!i){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,null,[[3,16,20,28],[21,,23,27]])}));function t(t,n,r,o){return e.apply(this,arguments)}return t}()});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),v.apply(this,arguments)}var b={instance:null,initStart:!1,getInstance:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.instance){e.next=2;break}return e.abrupt("return",this.instance);case 2:if(!this.initStart){e.next=5;break}return t=500,e.abrupt("return",new Promise(function(e,n){var o=r,a=5,i=function r(){null!==o.instance?e(o.instance):a?(a--,setTimeout(r,t)):n(new Error("init indexedDB error"))};setTimeout(i,t)}));case 5:return this.initStart=!0,n=null,e.prev=7,e.next=10,h();case 10:n=e.sent,e.next=18;break;case 13:throw e.prev=13,e.t0=e["catch"](7),this.initStart=!1,console.error(e.t0),e.t0;case 18:return this.instance=n,this.initStart=!1,e.abrupt("return",this.instance);case 21:case"end":return e.stop()}},e,this,[[7,13]])}));function t(){return e.apply(this,arguments)}return t}()};function g(e){return k.apply(this,arguments)}function k(){return k=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getInstance();case 2:return n=e.sent,e.next=5,n.put("archive",t);case 5:case"end":return e.stop()}},e)})),k.apply(this,arguments)}function T(e){return x.apply(this,arguments)}function x(){return x=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getInstance();case 2:return n=e.sent,e.next=5,n.delete("archive",t);case 5:case"end":return e.stop()}},e)})),x.apply(this,arguments)}function C(e){return _.apply(this,arguments)}function _(){return _=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getInstance();case 2:return n=e.sent,e.next=5,n.get("archive",t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)})),_.apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return O=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,s,c,l,u,m,f,p,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getInstance();case 2:n=e.sent,r=n.transaction(["archive"]),o=[],a=!0,i=!1,e.prev=7,c=Object(d["a"])(r.objectStore("archive"));case 9:return e.next=11,c.next();case 11:return l=e.sent,a=l.done,e.next=15,l.value;case 15:if(u=e.sent,a){e.next=32;break}m=u,f=m.value,p=!0,e.t0=regeneratorRuntime.keys(t);case 21:if((e.t1=e.t0()).done){e.next=28;break}if(h=e.t1.value,h in f&&f[h]===t[h]){e.next=26;break}return p=!1,e.abrupt("break",28);case 26:e.next=21;break;case 28:p&&o.push(f);case 29:a=!0,e.next=9;break;case 32:e.next=38;break;case 34:e.prev=34,e.t2=e["catch"](7),i=!0,s=e.t2;case 38:if(e.prev=38,e.prev=39,a||null==c.return){e.next=43;break}return e.next=43,c.return();case 43:if(e.prev=43,!i){e.next=46;break}throw s;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return e.abrupt("return",o);case 49:case"end":return e.stop()}},e,null,[[7,34,38,48],[39,,43,47]])})),O.apply(this,arguments)}var w={install:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getInstance();case 2:n=e.sent,window.db=n,t.prototype.$db=n;case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()};r["a"].use(w);var y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view")],1)},E=[],D={name:"App"},P=D,V=(n("5c0b"),n("2877")),S=n("6544"),L=n.n(S),F=n("7496"),I=Object(V["a"])(P,y,E,!1,null,null,null),R=I.exports;L()(I,{VApp:F["a"]});n("7f7f");var A=n("8c4f"),N=n("2f62"),M=(n("7514"),n("75fc")),$=(n("20d6"),n("bd86")),H=n("cebc"),G=n("c437"),Y=n.n(G),U=n("0644"),J=n.n(U),B=n("b8ce"),W=n.n(B),q=n("6747"),z=n.n(q);n("456d"),n("d225"),n("b0b4");function K(e,t){console.warn("".concat(e,": some key(").concat(t,") is missing!"))}var X;function Q(e,t){var n=e.findIndex(t);n>=0&&e.splice(n,1)}function Z(e){return Object.keys(e).forEach(function(t){void 0===e[t]&&delete e[t]})}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var n=(new Date).getTime(),r=new Date(e).getTime();return t?r>n?"blue--text text--lighten-2":"red--text text--lighten-1":r>n?"blue lighten-2":"red lighten-1"}var te={ADD_FOLDER:"ADD_FOLDER",MODIFY_FOLDER:"MODIFY_FOLDER",DELETE_FOLDER:"DELETE_FOLDER",ADD_TODO:"ADD_TODO",MODIFY_TODO:"MODIFY_TODO",DELETE_TODO:"DELETE_TODO",SWITCH_MINI_FOLDER_LIST:"SWITCH_MINI_FOLDER_LIST",SWITCH_TODO_VIEW:"SWITCH_TODO_VIEW",ADD_PROJECT:"ADD_PROJECT",MODIFY_PROJECT:"MODIFY_PROJECT",DELETE_PROJECT:"DELETE_PROJECT",MODIFY_FOLDER_LIST:"MODIFY_FOLDER_LIST",MODIFY_PROJECT_LIST:"MODIFY_PROJECT_LIST"},ne={};for(var re in te)ne[re]="user/".concat(te[re]);var oe,ae,ie={namespaced:!0,state:{id:"",name:"",projectList:[],folderList:[],lastModifiedTime:null,token:"",isTodoView:!0,showMiniFolderListView:!1,folders:{},projects:{},todos:{}},getters:{userInfo:function(e){return{id:e.id,name:e.name}},projectInfo:function(e){return function(t){var n=e.projects[t];if(!n)throw new Error("project id not found");var r=n.id,o=n.name;return{id:r,name:o}}},folderInfo:function(e){return function(t){var n=e.folders[t];if(!n)throw new Error("folder id not found");var r=n.id,o=n.name,a=n.project;return{id:r,name:o,project:a}}}},mutations:(X={},Object($["a"])(X,te.ADD_FOLDER,function(e,t){"id"in t?e.folders=Object(H["a"])({},e.folders,Object($["a"])({},t.id,t)):K(te.ADD_FOLDER,"id")}),Object($["a"])(X,te.MODIFY_FOLDER,function(e,t){var n=e.folders[t.id];n&&(n=Object(H["a"])({},n,t),Z(n),e.folders=Object(H["a"])({},e.folders,Object($["a"])({},n.id,n)))}),Object($["a"])(X,te.DELETE_FOLDER,function(e,t){t in e.folders&&r["a"].delete(e.folders,t)}),Object($["a"])(X,te.ADD_TODO,function(e,t){"id"in t&&"folder"in t?e.todos=Object(H["a"])({},e.todos,Object($["a"])({},t.id,t)):K(te.ADD_TODO,"id, folder")}),Object($["a"])(X,te.MODIFY_TODO,function(e,t){var n=e.todos[t.id];n&&(n=Object(H["a"])({},n,t),Z(n),e.todos=Object(H["a"])({},e.todos,Object($["a"])({},n.id,n)))}),Object($["a"])(X,te.DELETE_TODO,function(e,t){t in e.todos&&r["a"].delete(e.todos,t)}),Object($["a"])(X,te.SWITCH_MINI_FOLDER_LIST,function(e){e.showMiniFolderListView=!e.showMiniFolderListView}),Object($["a"])(X,te.SWITCH_TODO_VIEW,function(e,t){e.isTodoView=!!t}),Object($["a"])(X,te.ADD_PROJECT,function(e,t){"id"in t?e.projects=Object(H["a"])({},e.projects,Object($["a"])({},t.id,t)):K(te.ADD_PROJECT,"id")}),Object($["a"])(X,te.MODIFY_PROJECT,function(e,t){var n=e.projects[t.id];n&&(n=Object(H["a"])({},n,t),Z(n),e.projects=Object(H["a"])({},e.projects,Object($["a"])({},n.id,n)))}),Object($["a"])(X,te.DELETE_PROJECT,function(e,t){if(t in e.projects){var n=e.projectList.findIndex(function(e){return e===t});n>=0&&e.projectList.splice(n,1);var o=e.projects[t].folders;o.forEach(function(t){t in e.folders&&r["a"].delete(e.folders[t],"project")}),r["a"].delete(e.projects,t)}}),Object($["a"])(X,te.MODIFY_FOLDER_LIST,function(e,t){var n;z()(t)&&(n=e.folderList).splice.apply(n,[0,e.folderList.length].concat(Object(M["a"])(t)))}),Object($["a"])(X,te.MODIFY_PROJECT_LIST,function(e,t){var n;z()(t)&&(n=e.projectList).splice.apply(n,[0,e.projectList.length].concat(Object(M["a"])(t)))}),X),actions:{addTodo:function(e,t){var n=e.commit,r=e.dispatch;"id"in t||(t.id=Y()()),n(te.ADD_TODO,t),r("appendTodoToFolder",{todo:t.id,folder:t.folder})},modifyTodo:function(e,t){var n=e.commit,r=e.state,o=e.dispatch;if(t.id&&(n(te.MODIFY_TODO,J()(t)),t=W()(t),"folder"in t)){var a=r.folders[t.folder];if(a&&!a.undos.find(function(e){return e===t.id})){var i=r.todos[t.id].folder;i&&o("removeTodoFromFolder",{todo:t.id,folder:a.id}),o("appendTodoToFolder",{todo:t.id,folder:t.folder})}}},deleteTodo:function(e,t){var n=e.commit,r=e.dispatch,o=e.state;t in o.todos&&(r("removeTodoFromFolder",{todo:t,folder:o.todos[t].folder}),n(te.DELETE_TODO,t))},markTodoAsDone:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,o=t.state,e.next=3,r("modifyTodo",{id:n,complete:!0});case 3:return a=J()(o.todos[n]),e.next=6,r("deleteTodo",n);case 6:return e.next=8,g(a);case 8:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),markTodoAsUndone:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,e.next=3,C(n);case 3:return o=e.sent,e.next=6,r("addTodo",o);case 6:return e.next=8,r("modifyTodo",{id:n,complete:!1});case 8:return e.next=10,T(n);case 10:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),addFolder:function(e,t){var n=e.commit,r=e.dispatch,o=Y()();t.id=o,t.undos=[],n(te.ADD_FOLDER,t),r("appendFolderToFolderList",o),"project"in t&&r("appendFolderToProject",{folder:o,project:t.project})},modifyFolder:function(e,t){var n=e.commit,r=e.state,o=e.dispatch;if(t.id&&t.id in r.folders&&(n(te.MODIFY_FOLDER,t),"project"in t)){var a=r.projects[t.project];if(a&&!a.folders.find(function(e){return e===t.id})){var i=r.folders[t.id].project;i&&o("removeFolderFromProject",{folder:t.id,project:t.project}),o("appendFolderToProject",{folder:t.id,project:t.project})}}},deleteFolder:function(e,t){var n=e.commit,r=e.dispatch,o=e.state;if(t in o.folders){r("removeFolderFromFolderList",t);var a=o.folders[t].project;a&&r("removeFolderFromProject",{project:a,folder:t});var i=o.folders[t].undos;n(te.DELETE_FOLDER,t),i.forEach(function(e){return n(te.DELETE_TODO,e)})}},appendTodoToFolder:function(e,t){e.commit;var n=e.state,r=e.dispatch,o=t.todo,a=t.folder;if(a in n.folders){var i=[].concat(Object(M["a"])(n.folders[a].undos),[o]);r("modifyFolder",{id:a,undos:i})}},removeTodoFromFolder:function(e,t){e.commit;var n=e.state,r=e.dispatch,o=t.todo,a=t.folder;if(o in n.todos&&a in n.folders){var i=W()(n.folders[a].undos);Q(i,function(e){return e===o}),r("modifyFolder",{id:a,undos:i})}},addProject:function(e,t){var n=e.commit,r=e.dispatch;t.id=Y()(),t.folders=[],n(te.ADD_PROJECT,t),r("appendProjectToProjectList",t.id)},modifyProject:function(e,t){var n=e.commit;t.id&&n(te.MODIFY_PROJECT,t)},deleteProject:function(e,t){var n=e.commit,r=e.state,o=e.dispatch,a=t.project,i=t.deleteSubs;if(a in r.projects){var s=[];!0===i&&(s=r.projects[a].folders),r.projects[a].folders.forEach(function(e){o("modifyFolder",{id:e,project:void 0})}),o("removeProjectFromProjectList",a),n(te.DELETE_PROJECT,a),s.forEach(function(e){return o("deleteFolder",e)})}},appendFolderToProject:function(e,t){var n=e.state,r=e.dispatch,o=t.folder,a=t.project;if(o in n.folders||a in n.projects){var i=n.projects[a],s=[].concat(Object(M["a"])(i.folders),[o]);r("modifyProject",{id:a,folders:s})}},removeFolderFromProject:function(e,t){var n=e.state,r=e.dispatch,o=t.folder,a=t.project;if(o in n.folders||a in n.projects){var i=W()(n.projects[a].folders);Q(i,function(e){return e===o}),r("modifyProject",{id:a,folders:i})}},modifyFolderList:function(e,t){var n=e.commit;n(te.MODIFY_FOLDER_LIST,t)},appendFolderToFolderList:function(e,t){var n=e.dispatch,r=e.state,o=[].concat(Object(M["a"])(r.folderList),[t]);n("modifyFolderList",o)},removeFolderFromFolderList:function(e,t){var n=e.state,r=e.dispatch,o=Object(M["a"])(n.folderList);Q(o,function(e){return e===t}),r("modifyFolderList",o)},modifyProjectList:function(e,t){var n=e.commit;n(te.MODIFY_PROJECT_LIST,t)},appendProjectToProjectList:function(e,t){var n=e.dispatch,r=e.state,o=[].concat(Object(M["a"])(r.projectList),[t]);n("modifyProjectList",o)},removeProjectFromProjectList:function(e,t){var n=e.dispatch,r=e.state,o=Object(M["a"])(r.projectList);Q(o,function(e){return e===t}),n("modifyProjectList",o)},switchMiniFolderListView:function(e){var t=e.commit;t(te.SWITCH_MINI_FOLDER_LIST)},switchTodoView:function(e,t){var n=e.commit;n(te.SWITCH_TODO_VIEW,t)}}},se=(n("6762"),n("2fdb"),{CHANGE_CURRENT_FOLDER:"CHANGE_CURRENT_FOLDER"}),ce={namespaced:!0,state:{specialList:{start:!1,today:!1,thisWeek:!1},currentFolder:""},getters:{currentFolderName:function(e,t,n,r){if(r["globalAction/searchValid"])return"搜索";switch(e.currentFolder){case"star":return"标星";case"today":return"今日";case"thisWeek":return"本周"}var o=n.user.folders[e.currentFolder];return o?o.name:""},folders:function(e,t,n){var r=n.user.folderList;return r.map(function(e){var t=n.user.folders[e],r=t.name;if(t.project&&t.project in n.user.projects){var o=n.user.projects[t.project].name;r="".concat(o,"/").concat(r)}var a=t.id,i=t.undos.length;return{id:a,name:r,undoNumber:i}})},starFolderTodos:function(e,t,n){var r=n.user.folderList;return r.map(function(e){var t=n.user.folders[e].name,r=n.user.folders[e].undos.map(function(e){return n.user.todos[e]}).filter(function(e){return e.star});return{name:t,todos:r}}).filter(function(e){var t=e.todos;return t.length})},searchFolderTodos:function(e,t,n){var r=n.globalAction.palette.input,o=n.user.folderList;return o.map(function(e){var t=n.user.folders[e].name,o=n.user.folders[e].undos.map(function(e){return n.user.todos[e]}).filter(function(e){return e.name.includes(r)});return{name:t,todos:o}}).filter(function(e){var t=e.todos;return t.length})},todos:function(e,t,n,r){if(r["globalAction/searchValid"]&&n.user.isTodoView)return t.searchFolderTodos;switch(e.currentFolder){case"star":return t.starFolderTodos;case"today":return[];case"thisWeek":return[];default:if(e.currentFolder in n.user.folders)break;return[]}var o=n.user.folders[e.currentFolder];return[{name:"",todos:o.undos.map(function(e){return n.user.todos[e]})}]}},mutations:Object($["a"])({},se.CHANGE_CURRENT_FOLDER,function(e,t){e.currentFolder=t}),actions:{changeFolder:function(e,t){var n=e.commit;"string"===typeof t&&n(se.CHANGE_CURRENT_FOLDER,t)}}},le={CHANGE_DETAIL_VIEW_VISIBLE:"CHANGE_DETAIL_VIEW_VISIBLE",CHANGE_CURRENT_TODO:"CHANGE_CURRENT_TODO",CHANGE_CURRENT_COMPLETE_TODO:"CHANGE_CURRENT_COMPLETE_TODO",CHANGE_CURRENT_COMPLETE_TODO_TYPE:"CHANGE_CURRENT_COMPLETE_TODO_TYPE"},de={NORMAL:"NORMAL",COMPLETE:"COMPLETE"},ue={namespaced:!0,state:{showDetailView:!1,currentTodo:"",currentTodoType:de.NORMAL,currentCompleteTodo:""},getters:{isCompleteTodo:function(e){return e.currentTodoType===de.COMPLETE}},mutations:(oe={},Object($["a"])(oe,le.CHANGE_DETAIL_VIEW_VISIBLE,function(e,t){e.showDetailView=!!t}),Object($["a"])(oe,le.CHANGE_CURRENT_TODO,function(e,t){"string"===typeof t&&(e.currentTodo=t)}),Object($["a"])(oe,le.CHANGE_CURRENT_COMPLETE_TODO,function(e,t){e.currentCompleteTodo=t}),Object($["a"])(oe,le.CHANGE_CURRENT_COMPLETE_TODO_TYPE,function(e,t){e.currentTodoType=t}),oe),actions:{changeDetailViewVisible:function(e,t){var n=e.commit;n(le.CHANGE_DETAIL_VIEW_VISIBLE,t)},changeCurrentTodo:function(e,t){var n=e.commit,r=e.state;r.currentTodoType===de.COMPLETE&&n(le.CHANGE_CURRENT_COMPLETE_TODO_TYPE,de.NORMAL),n(le.CHANGE_CURRENT_TODO,t)},changeCurrentCompleteTodo:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,o.currentTodoType===de.NORMAL&&r(le.CHANGE_CURRENT_COMPLETE_TODO_TYPE,de.COMPLETE),e.next=4,C(n);case 4:a=e.sent,r(le.CHANGE_CURRENT_COMPLETE_TODO,a);case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()}},me={CHANGE_CURRENT_PROJECT:"CHANGE_CURRENT_PROJECT"},fe={namespaced:!0,state:{currentProject:""},getters:{projects:function(e,t,n){var r=n.user.projectList;return r.map(function(e){var t=n.user.projects[e],r=t.id,o=t.name;return{id:r,name:o}})},currentProjectFolders:function(e,t,n){var r=n.user.projects[e.currentProject];return r?r.folders.map(function(e){var t=n.user.folders[e],r=t.id,o=t.name;return{id:r,name:o}}):[]}},mutations:Object($["a"])({},me.CHANGE_CURRENT_PROJECT,function(e,t){e.currentProject=t}),actions:{changeCurrentProject:function(e,t){var n=e.commit;"string"===typeof t&&n(me.CHANGE_CURRENT_PROJECT,t)}}},pe=(n("386d"),{CHANGE_PALETTE:"CHANGE_PALETTE",CHANGE_SEARCH_STATUS:"CHANGE_SEARCH_STATUS"}),he={namespaced:!0,state:{palette:{show:!1,prependIcon:"mdi-cloud-search-outline",appendIcon:"",placeholder:"",input:"",inputKey:"",extra:""},search:{isSearch:!1}},getters:{paletteShow:function(e){return e.palette.show},searchValid:function(e){return e.search.isSearch&&!!e.palette.input}},mutations:(ae={},Object($["a"])(ae,pe.CHANGE_PALETTE,function(e,t){for(var n in t)t.hasOwnProperty(n)&&n in e.palette&&(e.palette[n]=t[n])}),Object($["a"])(ae,pe.CHANGE_SEARCH_STATUS,function(e,t){e.search.isSearch=t.isSearch}),ae),actions:{changePaletteInput:function(e,t){var n=e.commit;n(pe.CHANGE_PALETTE,{input:t})},changePaletteShow:function(e,t){var n=e.commit;n(pe.CHANGE_PALETTE,{show:t})},clearPaletteExtra:function(e){var t=e.commit;t(pe.CHANGE_PALETTE,{extra:""})},startSearch:function(e){var t=e.commit;t(pe.CHANGE_PALETTE,{show:!0,input:"",prependIcon:"mdi-cloud-search-outline",appendIcon:"",placeholder:"请输入搜索关键词"}),t(pe.CHANGE_SEARCH_STATUS,{isSearch:!0})},startAddingNew:function(e,t){var n=e.commit,r=t.placeholder,o=t.extra;n(pe.CHANGE_PALETTE,{show:!0,prependIcon:"mdi-plus",appendIcon:"mdi-send",placeholder:r,input:"",extra:o})},clearSearchMode:function(e){var t=e.commit,n=e.state;n.search.isSearch&&t(pe.CHANGE_SEARCH_STATUS,{isSearch:!1})}}};function ve(e){return be.apply(this,arguments)}function be(){return be=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,s,c,l,u,m,f,p,h,v,g,k,T,x,C,_,j,O,w,y,E;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return ve.isReady=!1,e.next=3,b.getInstance();case 3:n=e.sent,r=n.transaction(["folders","todos","projects"]),o=!0,a=!1,e.prev=7,s=Object(d["a"])(r.objectStore("todos"));case 9:return e.next=11,s.next();case 11:return c=e.sent,o=c.done,e.next=15,c.value;case 15:if(l=e.sent,o){e.next=22;break}u=l,t.commit(ne.ADD_TODO,u.value);case 19:o=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](7),a=!0,i=e.t0;case 28:if(e.prev=28,e.prev=29,o||null==s.return){e.next=33;break}return e.next=33,s.return();case 33:if(e.prev=33,!a){e.next=36;break}throw i;case 36:return e.finish(33);case 37:return e.finish(28);case 38:m=!0,f=!1,e.prev=40,h=Object(d["a"])(r.objectStore("folders"));case 42:return e.next=44,h.next();case 44:return v=e.sent,m=v.done,e.next=48,v.value;case 48:if(g=e.sent,m){e.next=55;break}k=g,t.commit(ne.ADD_FOLDER,k.value);case 52:m=!0,e.next=42;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e["catch"](40),f=!0,p=e.t1;case 61:if(e.prev=61,e.prev=62,m||null==h.return){e.next=66;break}return e.next=66,h.return();case 66:if(e.prev=66,!f){e.next=69;break}throw p;case 69:return e.finish(66);case 70:return e.finish(61);case 71:T=!0,x=!1,e.prev=73,_=Object(d["a"])(r.objectStore("projects"));case 75:return e.next=77,_.next();case 77:return j=e.sent,T=j.done,e.next=81,j.value;case 81:if(O=e.sent,T){e.next=88;break}w=O,t.commit(ne.ADD_PROJECT,w.value);case 85:T=!0,e.next=75;break;case 88:e.next=94;break;case 90:e.prev=90,e.t2=e["catch"](73),x=!0,C=e.t2;case 94:if(e.prev=94,e.prev=95,T||null==_.return){e.next=99;break}return e.next=99,_.return();case 99:if(e.prev=99,!x){e.next=102;break}throw C;case 102:return e.finish(99);case 103:return e.finish(94);case 104:return e.next=106,n.get("user","projectList");case 106:return y=e.sent,t.commit(ne.MODIFY_PROJECT_LIST,y),e.next=110,n.get("user","folderList");case 110:return E=e.sent,t.commit(ne.MODIFY_FOLDER_LIST,E),e.next=114,r.done;case 114:ve.isReady=!0;case 115:case"end":return e.stop()}},e,null,[[7,24,28,38],[29,,33,37],[40,57,61,71],[62,,66,70],[73,90,94,104],[95,,99,103]])})),be.apply(this,arguments)}function ge(e){return ke.apply(this,arguments)}function ke(){return ke=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve.ready();case 2:return e.next=4,b.getInstance();case 4:n=e.sent,t.subscribe(function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(r){var o,a,i,s,c,l,d,u,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=r.type,e.next=e.t0===ne.MODIFY_FOLDER_LIST?3:e.t0===ne.MODIFY_PROJECT_LIST?6:e.t0===ne.ADD_TODO?9:e.t0===ne.MODIFY_TODO?9:e.t0===ne.DELETE_TODO?14:e.t0===ne.ADD_FOLDER?18:e.t0===ne.MODIFY_FOLDER?18:e.t0===ne.DELETE_FOLDER?23:e.t0===ne.ADD_PROJECT?27:e.t0===ne.MODIFY_PROJECT?27:e.t0===ne.DELETE_PROJECT?32:36;break;case 3:return e.next=5,n.put("user",r.payload,"folderList");case 5:return e.abrupt("break",37);case 6:return e.next=8,n.put("user",r.payload,"projectList");case 8:return e.abrupt("break",37);case 9:return o=r.payload.id,a=t.state.user.todos[o],e.next=13,n.put("todos",a);case 13:return e.abrupt("break",37);case 14:return i=r.payload,e.next=17,n.delete("todos",i);case 17:return e.abrupt("break",37);case 18:return s=r.payload.id,c=t.state.user.folders[s],e.next=22,n.put("folders",c);case 22:return e.abrupt("break",37);case 23:return l=r.payload,e.next=26,n.delete("folders",l);case 26:return e.abrupt("break",37);case 27:return d=r.payload.id,u=t.state.user.projects[d],e.next=31,n.put("projects",u);case 31:return e.abrupt("break",37);case 32:return m=r.payload,e.next=35,n.delete("projects",m);case 35:return e.abrupt("break",37);case 36:return e.abrupt("break",37);case 37:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e)})),ke.apply(this,arguments)}ve.ready=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var t=500,n=function n(){ve.isReady?e(ve.isReady):setTimeout(n,t)};setTimeout(n,t)}));case 1:case"end":return e.stop()}},e)})),r["a"].use(N["a"]);var Te=new N["a"].Store({state:{},mutations:{},actions:{},modules:{user:ie,todoView:ce,detailView:ue,projectView:fe,globalAction:he},plugins:[ve,ge]}),xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"pa-0",staticStyle:{height:"100%"},attrs:{fluid:""}},[n("v-layout",{attrs:{"fill-height":""}},[n("v-flex",{staticClass:"left-folder-list"},[n("sidebar")],1),n("v-flex",{staticStyle:{overflow:"hidden"}},[n("router-view")],1),n("v-flex",{staticClass:"right-todo-detail"},[n("router-view",{attrs:{name:"todoDetail"}})],1)],1),n("v-snackbar",{staticClass:"folder-snackbar",attrs:{top:"",color:"transparent",timeout:0},model:{value:e.palette.show,callback:function(t){e.$set(e.palette,"show",t)},expression:"palette.show"}},[n("v-text-field",{attrs:{"prepend-inner-icon":e.palette.prependIcon,"append-icon":e.palette.appendIcon,placeholder:e.palette.placeholder,solo:"","hide-details":"",autofocus:""},on:{keyup:e.paletteKeyUp,"click:append":e.appendClick},model:{value:e.paletteInput,callback:function(t){e.paletteInput=t},expression:"paletteInput"}})],1)],1)},Ce=[],_e=n("b047c"),je=n.n(_e),Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticStyle:{height:"100%"},attrs:{column:""}},[n("v-toolbar",{staticStyle:{flex:"0 0 auto"},attrs:{flat:"",dense:"",dark:"",color:"blue-grey darken-1"}},[n("v-app-bar-nav-icon",{class:{"toolbar-side-icon-mini":e.showMiniFolderListView},on:{click:e.switchMiniFolderListView}}),e.showMiniFolderListView?e._e():[n("v-spacer"),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:e.addNewClick}},[n("v-icon",[e._v("mdi-plus")])],1),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:e.startSearch}},[n("v-icon",[e._v("mdi-folder-search")])],1),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:e.switchButtonClick}},[n("v-icon",[e._v(e._s(e.switchButtonIcon))])],1),n("v-btn",{staticClass:"ma-0",attrs:{icon:""}},[n("v-icon",[e._v("mdi-dots-vertical")])],1)]],2),n("v-flex",{staticClass:"folder-list-container",attrs:{grow:""}},[n("v-navigation-drawer",{ref:"folderList",staticClass:"ps",attrs:{"disable-resize-watcher":"",permanent:"",width:"300","mini-variant":e.showMiniFolderListView}},[e.isTodoView?n("folder-list",{on:{reconfig:function(t){return e.reconfig("folder",t)}}}):n("project-list",{on:{reconfig:function(t){return e.reconfig("project",t)}}})],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.add.dialog,callback:function(t){e.$set(e.add,"dialog",t)},expression:"add.dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.addDialogTitle))])]),n("v-tabs",{model:{value:e.add.activeTab,callback:function(t){e.$set(e.add,"activeTab",t)},expression:"add.activeTab"}},[n("v-tab",{key:0},[e._v("文件夹")]),n("v-tab-item",[n("v-card-text",[n("div",[n("v-text-field",{ref:"folderName",attrs:{rules:[e.rules.required],outline:"",label:"文件夹名称"},model:{value:e.add.folderName,callback:function(t){e.$set(e.add,"folderName",t)},expression:"add.folderName"}}),n("v-select",{attrs:{outline:"",items:e.projects,"item-value":"id","item-text":"name",label:"选择工程"},model:{value:e.add.folderProject,callback:function(t){e.$set(e.add,"folderProject",t)},expression:"add.folderProject"}})],1)])],1),n("v-tab",{key:1},[e._v("工程")]),n("v-tab-item",[n("v-card-text",[n("div",[n("v-text-field",{ref:"projectName",attrs:{rules:[e.rules.required],outline:"",label:"工程名称"},model:{value:e.add.projectName,callback:function(t){e.$set(e.add,"projectName",t)},expression:"add.projectName"}})],1)])],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.add.dialog=!1}}},[e._v("取消")]),n("v-btn",{attrs:{text:"",color:"blue darken-1"},on:{click:e.save}},[e._v("保存")])],1)],1)],1),n("v-dialog",{attrs:{persistent:"",width:"100px","content-class":"elevation-0"}},[n("div",{staticClass:"child-flex-center",staticStyle:{height:"100px"}},[n("v-progress-circular",{attrs:{indeterminate:"",size:50,color:"primary"}})],1)])],1)},we=[],ye=n("b7f5"),Ee={created:function(){this.pss=[]},beforeDestroy:function(){for(var e in this.pss)e.destroy&&e.destroy()},methods:{getPerfectScrollbarInstance:function(e,t){var n=new ye["a"](e,t);return this.pss.push(n),n}}},De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{staticClass:"pa-0",attrs:{dense:""}},[n("v-list-item",{class:"star"===e.currentFolder?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(t){return e.folderClick("star")},contextmenu:e.contextmenuClickDoNothing}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-star-outline")])],1),n("v-list-item-content",[e._v("标星")]),n("v-list-item-action-text",[n("span")])],1),n("v-list-item",{class:"today"===e.currentFolder?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(t){return e.folderClick("today")},contextmenu:e.contextmenuClickDoNothing}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-calendar-today")])],1),n("v-list-item-content",[e._v("今天")]),n("v-list-item-action-text",[n("span")])],1),n("v-list-item",{class:"thisWeek"===e.currentFolder?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(t){return e.folderClick("thisWeek")},contextmenu:e.contextmenuClickDoNothing}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-calendar-week")])],1),n("v-list-item-content",[e._v("本周")]),n("v-list-item-action-text",[n("span")])],1),n("draggable",e._b({attrs:{tag:"div"},on:{change:e.foldersChange},model:{value:e.foldersProxy,callback:function(t){e.foldersProxy=t},expression:"foldersProxy"}},"draggable",e.folderDragOption,!1),e._l(e.foldersProxy,function(t){return n("v-list-item",{key:t.id,class:e.currentFolder===t.id?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(n){return e.folderClick(t.id)},contextmenu:function(n){return e.contextmenuClick(n,t.id)}}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-format-list-checkbox")])],1),n("v-list-item-content",[e._v(e._s(t.name))]),n("v-list-item-action-text",[n("span",[e._v(e._s(t.undoNumber))])])],1)}),1),n("menu-items",{attrs:{menu:e.menu}})],1)},Pe=[],Ve=n("310e"),Se=n.n(Ve),Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"position-x":e.menu.x,"position-y":e.menu.y},model:{value:e.menu.showMenu,callback:function(t){e.$set(e.menu,"showMenu",t)},expression:"menu.showMenu"}},[n("v-list",e._l(e.menu.menuItems,function(t,r){return n("v-list-item",{key:r,on:{click:function(t){return e.itemClick(r)}}},[n("v-list-item-title",[e._v(e._s(t.name))])],1)}),1)],1)},Fe=[],Ie={name:"MenuItems",props:{menu:{type:Object}},methods:{itemClick:function(e){var t=this.menu.menuItems[e];t.callback&&t.callback(this.menu.extra,t)}}},Re=Ie,Ae=n("8860"),Ne=n("da13"),Me=n("5d23"),$e=n("e449"),He=Object(V["a"])(Re,Le,Fe,!1,null,"6c82d2b5",null),Ge=He.exports;L()(He,{VList:Ae["a"],VListItem:Ne["a"],VListItemTitle:Me["c"],VMenu:$e["a"]});var Ye,Ue,Je={components:{MenuItems:Ge},data:function(){return{menu:{showMenu:!1,x:0,y:0,extra:null,menuItems:[]}}},methods:{contextmenuClick:function(e,t){e.preventDefault(),this.menu.extra=t,this.menu.x=e.pageX,this.menu.y=e.pageY,this.menu.showMenu=!0},contextmenuClickDoNothing:function(e){e.preventDefault()},registerMenuItem:function(e){var t=this;z()(e)?e.forEach(function(e){"name"in e?t.menu.menuItems.push(e):console.warn("name is not in menu item!")}):console.warn("menuItems is not an array!")}}},Be=n("2638"),We=n.n(Be),qe=(n("c5f6"),n("169a")),ze=n("b0af"),Ke=n("99d9"),Xe=n("2fa4"),Qe=n("8336"),Ze={name:"message",components:{VDialog:qe["a"],VCard:ze["a"],VCardTitle:Ke["c"],VCardText:Ke["b"],VCardActions:Ke["a"],VSpacer:Xe["a"],VBtn:Qe["a"]},data:function(){return{isShow:!1,exitState:null}},props:{timeout:{type:Number,default:0},message:{default:""},title:{default:""}},destroyed:function(){this.$el&&this.$el.parentElement.removeChild(this.$el)},watch:{isShow:function(e){var t=this;e||this.$nextTick(function(){t.hideCallback&&t.hideCallback(t.exitState),t.$destroy()})}},methods:{show:function(){this.isShow=!0},hide:function(e){this.isShow=!1,this.exitState=e},setHideCallback:function(e){this.hideCallback=e}},render:function(){var e=this,t=arguments[0];return t("v-dialog",We()([{attrs:{value:this.isShow}},{on:{input:function(t){e.isShow=t}}},{attrs:{persistent:!0,maxWidth:"500px"}}]),[t("v-card",[t("v-card-title",{class:"headline"},[this.title]),t("v-card-text",[this.message]),t("v-card-actions",[t("v-spacer"),t("v-btn",We()([{attrs:{flat:!0}},{on:{click:function(){return e.hide(!1)}}}]),["取消"]),t("v-btn",We()([{attrs:{flat:!0,color:"primary"}},{on:{click:function(){return e.hide(!0)}}}]),["确认"])])])])}},et=Ze,tt=Object(V["a"])(et,Ye,Ue,!1,null,"16857b2b",null),nt=tt.exports,rt=r["a"].extend(nt),ot=0,at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof e&&(e={message:e});var t="message-".concat(ot++),n=new rt({propsData:e});return n.id=t,n.$mount(),document.body.appendChild(n.$el),n.show(),new Promise(function(e){n.setHideCallback(function(t){e(t)})})},it=at,st={name:"FolderList",mixins:[Je],components:{Draggable:Se.a},data:function(){return{foldersContent:[]}},computed:Object(H["a"])({},Object(N["d"])("todoView",["currentFolder"]),Object(N["c"])("todoView",["folders"]),{foldersProxy:{get:function(){return this.folders},set:function(e){this.foldersContent=Object(M["a"])(e)}},folderDragOption:function(){return{animation:200,disabled:!1,group:"aside-folder-list",ghostClass:"draggable-ghost"}}}),created:function(){var e=this;this.registerMenuItem([{name:"文件夹选项",callback:function(t){e.$emit("reconfig",t)}},{name:"删除文件夹",callback:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it({title:"删除",message:"是否删除文件夹？"});case 2:r=t.sent,r&&e.deleteFolder(n);case 4:case"end":return t.stop()}},t)}));function n(e){return t.apply(this,arguments)}return n}()}])},methods:Object(H["a"])({},Object(N["b"])("todoView",["changeFolder"]),Object(N["b"])("user",["modifyFolderList","deleteFolder"]),{folderClick:function(e){e&&this.changeFolder(e)},foldersChange:function(){this.modifyFolderList(this.foldersContent.map(function(e){return e.id}))}})},ct=st,lt=n("132d"),dt=n("1800"),ut=Object(V["a"])(ct,De,Pe,!1,null,null,null),mt=ut.exports;L()(ut,{VIcon:lt["a"],VList:Ae["a"],VListItem:Ne["a"],VListItemAction:dt["a"],VListItemActionText:Me["a"],VListItemContent:Me["b"]});var ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{staticClass:"pa-0",attrs:{dense:""}},[n("draggable",e._b({attrs:{tag:"div"},on:{change:e.projectsChange},model:{value:e.projectsProxy,callback:function(t){e.projectsProxy=t},expression:"projectsProxy"}},"draggable",e.projectDragOption,!1),e._l(e.projectsProxy,function(t){return n("v-list-item",{key:t.id,class:e.currentProject===t.id?"sidebar-item-selected":"",attrs:{avatar:"",ripple:""},on:{click:function(n){return e.projectClick(t.id)},contextmenu:function(n){return e.contextmenuClick(n,t.id)}}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-folder-multiple-outline")])],1),n("v-list-item-content",[e._v(e._s(t.name))])],1)}),1),n("menu-items",{attrs:{menu:e.menu}})],1)},pt=[],ht={name:"ProjectList",mixins:[Je],components:{Draggable:Se.a},data:function(){return{projectsContent:[]}},computed:Object(H["a"])({},Object(N["d"])("projectView",["currentProject"]),Object(N["c"])("projectView",["projects"]),{projectsProxy:{get:function(){return this.projects},set:function(e){this.projectsContent=Object(M["a"])(e)}},projectDragOption:function(){return{animation:200,disabled:!1,group:"aside-project-list",ghostClass:"draggable-ghost"}}}),created:function(){var e=this;this.registerMenuItem([{name:"工程选项",callback:function(t){e.$emit("reconfig",t)}},{name:"删除工程",callback:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it({title:"删除",message:"是否删除该项目？"});case 2:r=t.sent,r&&e.deleteProject({project:n,deleteSubs:!1});case 4:case"end":return t.stop()}},t)}));function n(e){return t.apply(this,arguments)}return n}()},{name:"删除工程及其文件夹",callback:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it({title:"删除",message:"是否删除该项目及其文件夹？"});case 2:r=t.sent,r&&e.deleteProject({project:n,deleteSubs:!0});case 4:case"end":return t.stop()}},t)}));function n(e){return t.apply(this,arguments)}return n}()}])},methods:Object(H["a"])({},Object(N["b"])("projectView",["changeCurrentProject"]),Object(N["b"])("user",["modifyProjectList","deleteProject"]),{projectClick:function(e){this.changeCurrentProject(e)},projectsChange:function(){this.modifyProjectList(this.projectsContent.map(function(e){return e.id}))}})},vt=ht,bt=Object(V["a"])(vt,ft,pt,!1,null,null,null),gt=bt.exports;L()(bt,{VIcon:lt["a"],VList:Ae["a"],VListItem:Ne["a"],VListItemAction:dt["a"],VListItemContent:Me["b"]});var kt={name:"Sidebar",mixins:[Ee],components:{ProjectList:gt,FolderList:mt},data:function(){return{mini:!1,add:{activeTab:0,folderName:"",folderProject:"",projectName:"",dialog:!1,isAdd:!0,extra:null},rules:{required:function(e){return!!e||"不能为空！"}}}},computed:Object(H["a"])({},Object(N["d"])("user",["showMiniFolderListView","isTodoView"]),Object(N["c"])("user",["projectInfo","folderInfo"]),Object(N["c"])("projectView",["projects"]),{switchButtonIcon:function(){return this.isTodoView?"mdi-format-list-checks":"mdi-view-list"},addFolderForm:function(){return["folderName"]},addProjectForm:function(){return["projectName"]},addDialogTitle:function(){return this.add.isAdd?"添加":"修改"}}),watch:{"add.dialog":function(e){var t=this;e||(this.addFolderForm.forEach(function(e){return t.$refs[e].reset()}),this.addProjectForm.forEach(function(e){return t.$refs[e].reset()}))}},mounted:function(){var e=this;this.ps=this.getPerfectScrollbarInstance(this.$refs.folderList.$el),this.$bus.$on("folder-project-reconfig",function(t){var n=t.type,r=t.id;e.reconfig(n,r)})},beforeDestroy:function(){this.$bus.$off("folder-project-reconfig")},methods:Object(H["a"])({},Object(N["b"])("user",["addFolder","switchMiniFolderListView","addProject","modifyFolder","modifyProject"]),Object(N["b"])("globalAction",["startSearch"]),{validateFolderForm:function(){var e=this;return this.addFolderForm.map(function(t){return e.$refs[t].validate()}).every(function(e){return e})},validateProjectForm:function(){var e=this;return this.addProjectForm.map(function(t){return e.$refs[t].validate()}).every(function(e){return e})},save:function(){this.add.isAdd?this.addNew():this.modify()},modify:function(){var e=this.add.extra.type;if("folder"===e&&this.validateFolderForm()){var t={id:this.add.extra.id,name:this.add.folderName};this.add.folderProject&&(t.project=this.add.folderProject),this.modifyFolder(t),this.add.dialog=!1}else if("project"===e&&this.validateProjectForm()){var n={id:this.add.extra.id,name:this.add.projectName};this.modifyProject(n),this.add.dialog=!1}},addNew:function(){if(0===this.add.activeTab&&this.validateFolderForm()){var e={name:this.add.folderName};this.add.folderProject&&(e.project=this.add.folderProject),this.addFolder(e),this.add.dialog=!1}else 1===this.add.activeTab&&this.validateProjectForm()&&(this.addProject({name:this.add.projectName}),this.add.dialog=!1)},switchButtonClick:function(){this.isTodoView?this.$router.push("/project"):this.$router.push("/todo")},reconfig:function(e,t){if(console.log("reconfig"),"folder"===e){var n=this.folderInfo(t);n.type="folder",this.add.extra=n,this.add.folderName=n.name,n.project&&(this.add.folderProject=n.project),this.add.activeTab=0}else if("project"===e){var r=this.projectInfo(t);r.type="project",this.add.extra=r,this.add.projectName=r.name,this.add.activeTab=1}this.add.isAdd=!1,this.add.dialog=!0},addNewClick:function(){this.add.isAdd=!0,this.add.dialog=!0}})},Tt=kt,xt=(n("b9a9"),n("3d1a"),n("5bc1")),Ct=n("0e8f"),_t=n("a722"),jt=n("f774"),Ot=n("490a"),wt=n("b974"),yt=n("71a3"),Et=n("c671"),Dt=n("fe57"),Pt=n("8654"),Vt=n("71d9"),St=Object(V["a"])(Tt,Oe,we,!1,null,"2e57971a",null),Lt=St.exports;L()(St,{VAppBarNavIcon:xt["a"],VBtn:Qe["a"],VCard:ze["a"],VCardActions:Ke["a"],VCardText:Ke["b"],VCardTitle:Ke["c"],VDialog:qe["a"],VFlex:Ct["a"],VIcon:lt["a"],VLayout:_t["a"],VNavigationDrawer:jt["a"],VProgressCircular:Ot["a"],VSelect:wt["a"],VSpacer:Xe["a"],VTab:yt["a"],VTabItem:Et["a"],VTabs:Dt["a"],VTextField:Pt["a"],VToolbar:Vt["a"]});var Ft={name:"Index",components:{Sidebar:Lt},computed:Object(H["a"])({},Object(N["d"])("globalAction",["palette"]),{paletteInput:{get:function(){return this.$store.state.globalAction.palette.input},set:function(e){this.debouncePaletteInput(e)}}}),created:function(){this.debouncePaletteInput=je()(this.changePaletteInput,500)},methods:Object(H["a"])({},Object(N["b"])("globalAction",["changePaletteInput","changePaletteInputKey","changePaletteShow","clearPaletteExtra","clearSearchMode"]),{paletteKeyUp:function(e){this.$bus.$emit("palette-input-key",e.key),"Escape"===e.key&&(this.changePaletteShow(!1),this.clearSearchMode())},appendClick:function(){this.$bus.$emit("palette-append-click",this.$store.state.globalAction.palette.extra)}})},It=Ft,Rt=(n("9dc1"),n("a523")),At=n("2db4"),Nt=Object(V["a"])(It,xe,Ce,!1,null,"c8453f80",null),Mt=Nt.exports;L()(Nt,{VContainer:Rt["a"],VFlex:Ct["a"],VLayout:_t["a"],VSnackbar:At["a"],VTextField:Pt["a"]});var $t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",[n("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.showDetailView,expression:"showDetailView"}],staticStyle:{height:"100%",width:"350px"},attrs:{column:""}},[n("v-flex",{staticClass:"todo-detail-header",attrs:{shrink:""}},[n("v-checkbox",{staticClass:"ma-0",staticStyle:{flex:"0 0 auto"},attrs:{"hide-details":""},on:{change:e.refresh},model:{value:e.todo.complete,callback:function(t){e.$set(e.todo,"complete",t)},expression:"todo.complete"}}),e.nameEditMode?n("v-text-field",{staticClass:"pa-0 ma-0",attrs:{"hide-details":"","single-line":""},on:{blur:e.nameChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nameChange(t)}},model:{value:e.nameProxy,callback:function(t){e.nameProxy=t},expression:"nameProxy"}}):n("div",{staticClass:"todo-detail-header-text",on:{click:function(t){e.nameEditMode=!0}}},[e._v(e._s(e.todo.name))]),n("star-select",{on:{click:e.refresh},model:{value:e.todo.star,callback:function(t){e.$set(e.todo,"star",t)},expression:"todo.star"}})],1),n("v-flex",{ref:"scrollContainer",staticClass:"todo-detail-middle ps",staticStyle:{height:"0",position:"relative"},attrs:{grow:""}},[n("div",[n("v-subheader",{staticStyle:{height:"20px"}},[e._v("时间")]),n("date-setting",{staticClass:"mb-3",attrs:{"expired-date":e.todo.expired_date,"remind-time":e.todo.remind_time,repeat:e.todo.repeat},on:{input:e.timeChange}}),n("v-subheader",{staticStyle:{height:"20px"}},[e._v("子任务")]),e._l(e.todo.subtasks,function(t,r){return n("subtask",{key:r,staticClass:"todo-detail-icon-left-margin mb-2",attrs:{complete:t.complete,content:t.content},on:{input:function(t){return e.subtaskChange(r,t)},delete:function(t){return e.removeSubtask(r)}}})}),n("v-text-field",{staticClass:"todo-detail-icon-left-margin mb-3",attrs:{flat:"","hide-details":"",clearable:"","prepend-icon":"mdi-plus",label:"添加子任务"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterSubtask(t)}},model:{value:e.subtaskContent,callback:function(t){e.subtaskContent=t},expression:"subtaskContent"}}),n("v-textarea",{staticClass:"mb-3 todo-detail-icon-left-margin",attrs:{value:e.todo.remark,flat:"","hide-details":"","auto-grow":"","prepend-icon":"mdi-square-edit-outline",label:"备注"},on:{change:e.remarkChange}}),n("v-btn",{staticClass:"btn-block-align-left mb-3",attrs:{block:"",depressed:"",text:""}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-attachment")]),e._v("添加文件")],1),e.showComments?n("v-list",{staticClass:"transparent"},[n("v-subheader",{staticStyle:{height:"20px"}},[e._v("评论")]),e._l(e.todo.comments,function(t,r){return[n("v-card",{key:r,staticClass:"transparent",attrs:{flat:""}},[n("v-layout",{staticClass:"pt-2 pb-0"},[n("v-flex",{staticClass:"pa-2",attrs:{shrink:""}},[n("v-avatar",{attrs:{color:"blue lighten-5",size:"40px"}},[e._v(e._s(t.name))])],1),n("v-flex",{attrs:{grow:""}},[n("v-card-title",{staticClass:"pa-0"},[n("div",[n("span",{staticClass:"title"},[e._v(e._s(t.content))]),n("br"),n("span",{staticClass:"subtitle-1 grey--text"},[e._v(e._s(t.time))])])]),n("v-card-actions",{staticClass:"pa-0"},[n("v-btn",{staticClass:"ma-0 pa-1 min-width-0",attrs:{text:"",color:"red lighten-3"},on:{click:function(t){return e.removeComment(r)}}},[e._v("删除")])],1),n("v-divider",{key:r})],1)],1)],1)]})],2):e._e()],2)]),n("v-flex",{staticClass:"todo-detail-end",attrs:{shrink:""}},[n("v-text-field",{staticClass:"ma-0",attrs:{"hide-details":"",label:"评论","prepend-inner-icon":"mdi-comment-processing-outline","append-icon":"mdi-send"},on:{"click:append":e.addNewComment},model:{value:e.commentContent,callback:function(t){e.commentContent=t},expression:"commentContent"}}),n("div",{staticClass:"todo-detail-bottom-bar"},[n("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""},on:{click:e.closeDetailView}},[n("v-icon",[e._v("mdi-chevron-double-right")])],1),n("v-subheader",{staticClass:"no-select"},[e._v(e._s(e.todo.create_time))]),n("div",[n("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""}},[n("v-icon",[e._v("mdi-sync")])],1),n("v-btn",{staticClass:"min-width-0 ma-0 pa-2",attrs:{text:""},on:{click:e.deleteClick}},[n("v-icon",[e._v("mdi-delete-outline")])],1)],1)],1)],1)],1)],1)},Ht=[],Gt=(n("a481"),n("14b9"),n("7618")),Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-1"},[n("v-layout",[n("v-menu",{attrs:{"offset-y":"","min-width":"0","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"ma-0 btn-block-align-left",attrs:{text:"",color:e.expiredDateColor}},r),[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-calendar-multiselect")]),e._v("\n          "+e._s(e.expiredDate||"设置日期")+"\n        ")],1)]}}]),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[n("date-picker",{attrs:{value:e.expiredDate},on:{input:e.datePickerInput,reset:function(t){e.datePickerMenu=!1}}})],1),e.expiredDate?n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{text:"",color:"grey lighten-1"},on:{click:e.clearExpiredDate}},[n("v-icon",[e._v("mdi-close")])],1):e._e()],1),e.expiredDate?[n("v-layout",[n("v-menu",{attrs:{"offset-y":"","min-width":"0","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"ma-0 btn-block-align-left",attrs:{depressed:"",text:"",color:e.remindTimeColor}},r),[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-calendar-clock")]),e._v("\n            "+e._s(e.remindTime||"设置提醒时间")+"\n          ")],1)]}}],null,!1,1004261350),model:{value:e.dateTimePickerMenu,callback:function(t){e.dateTimePickerMenu=t},expression:"dateTimePickerMenu"}},[n("date-time-picker",{attrs:{value:e.remindTime},on:{input:e.dateTimePickerInput,reset:function(t){e.dateTimePickerMenu=!1}}})],1),e.remindTime?n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:e.clearRemindTime}},[n("v-icon",[e._v("mdi-close")])],1):e._e()],1),n("v-layout",[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"ma-0 btn-block-align-left",attrs:{depressed:"",text:""}},r),[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-redo-variant")]),e._v("\n            "+e._s(e.repeat||"从不重复")+"\n          ")],1)]}}],null,!1,843039013)},[n("v-list",e._l(e.repeatItems,function(t){return n("v-list-item",{key:t,on:{click:function(n){return e.repeatInput(t)}}},[n("v-list-item-title",[e._v(e._s(t))])],1)}),1)],1),e.repeat?n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:e.clearRepeat}},[n("v-icon",[e._v("mdi-close")])],1):e._e()],1)]:e._e()],2)},Ut=[],Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"date-time-picker"},[n("v-date-picker",{attrs:{"min-width":"0",color:"blue-grey darken-1"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[n("v-layout",{staticStyle:{width:"290px",margin:"-8px"},attrs:{"align-center":""}},[n("v-select",{attrs:{items:e.hours,label:"时",flat:"",solo:"","hide-details":""},model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}}),n("div",{staticClass:"px-2 no-select child-flex-center time-colon",staticStyle:{"font-weight":"bold"}},[e._v(":")]),n("v-select",{attrs:{items:e.minutes,label:"分",flat:"",solo:"","hide-details":""},model:{value:e.minute,callback:function(t){e.minute=t},expression:"minute"}}),n("v-btn",{staticClass:"min-width-0",attrs:{text:""},on:{click:e.reset}},[n("v-icon",[e._v("mdi-close")])],1),n("v-btn",{staticClass:"min-width-0 ma-0",attrs:{text:""},on:{click:e.confirm}},[n("v-icon",[e._v("mdi-check")])],1)],1)],1)],1)},Bt=[],Wt=Object(M["a"])(new Array(24).keys()),qt=Object(M["a"])(new Array(60).keys()),zt={name:"DateTimePicker",data:function(){return{hours:Wt,minutes:qt,date:"",hour:0,minute:0}},props:{value:{type:[String,Date],required:!0}},watch:{value:function(){this.reset()}},created:function(){this.reset()},methods:{reset:function(){var e=this.value?new Date(this.value):new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.date=e.toISOString().slice(0,10),this.$emit("reset")},confirm:function(){var e=new Date(this.date);e.setHours(this.hour,this.minute),this.$emit("input",e.toISOString().substr(0,16).replace("T"," "))}}},Kt=zt,Xt=(n("ab05"),n("2e4b")),Qt=Object(V["a"])(Kt,Jt,Bt,!1,null,"a426eebc",null),Zt=Qt.exports;L()(Qt,{VBtn:Qe["a"],VDatePicker:Xt["a"],VIcon:lt["a"],VLayout:_t["a"],VSelect:wt["a"]});var en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"date-time-picker"},[n("v-date-picker",{attrs:{"min-width":"0",color:"blue-grey darken-1"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[n("div",{staticClass:"action-bar"},[n("v-btn",{attrs:{text:""},on:{click:e.reset}},[n("v-icon",[e._v("mdi-close")])],1),n("v-btn",{staticClass:"ma-0",attrs:{text:""},on:{click:e.confirm}},[n("v-icon",[e._v("mdi-check")])],1)],1)])],1)},tn=[],nn={name:"DatePicker",data:function(){return{date:""}},props:{value:{type:[String,Date],required:!0}},watch:{value:function(){this.reset()}},methods:{reset:function(){this.date=this.value,this.$emit("reset")},confirm:function(){this.$emit("input",this.date)}}},rn=nn,on=(n("024b"),Object(V["a"])(rn,en,tn,!1,null,"3f355c40",null)),an=on.exports;L()(on,{VBtn:Qe["a"],VDatePicker:Xt["a"],VIcon:lt["a"]});var sn={name:"DateSetting",components:{DatePicker:an,DateTimePicker:Zt},data:function(){return{repeatItems:["day","week","month","year"],datePickerMenu:!1,dateTimePickerMenu:!1}},props:{repeat:{type:String,default:""},expiredDate:{type:String,default:""},remindTime:{type:String,default:""}},computed:{expiredDateColor:function(){return ee(this.expiredDate)},remindTimeColor:function(){return ee(this.remindTime)}},methods:{repeatInput:function(e){this.$emit("input",{repeat:e})},datePickerInput:function(e){this.datePickerMenu=!1,this.$emit("input",{expiredDate:e})},dateTimePickerInput:function(e){this.dateTimePickerMenu=!1,this.$emit("input",{remindTime:e})},clearRepeat:function(){this.$emit("input",{repeat:""})},clearExpiredDate:function(){this.$emit("input",{expiredDate:""})},clearRemindTime:function(){this.$emit("input",{remindTime:""})}}},cn=sn,ln=Object(V["a"])(cn,Yt,Ut,!1,null,"5b7c62fe",null),dn=ln.exports;L()(ln,{VBtn:Qe["a"],VIcon:lt["a"],VLayout:_t["a"],VList:Ae["a"],VListItem:Ne["a"],VListItemTitle:Me["c"],VMenu:$e["a"]});var un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-icon",{on:{click:e.click}},[e._v(e._s(e.starIconName))])},mn=[],fn={name:"StarSelect",props:{value:{type:Boolean,default:!1}},computed:{starIconName:function(){return this.value?"mdi-star":"mdi-star-outline"}},methods:{click:function(){this.$emit("input",!this.value),this.$emit("click")}}},pn=fn,hn=Object(V["a"])(pn,un,mn,!1,null,null,null),vn=hn.exports;L()(hn,{VIcon:lt["a"]});var bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subtask"},[n("v-checkbox",{staticClass:"ma-0",attrs:{"input-value":e.complete,"hide-details":""},on:{change:function(t){return e.input({complete:t})}}}),n("v-text-field",{staticClass:"ma-0 pa-0",attrs:{disabled:e.complete,"single-line":"",flat:"","hide-details":""},on:{blur:function(t){return e.input({content:e.tempContent})}},model:{value:e.textField,callback:function(t){e.textField=t},expression:"textField"}}),n("v-btn",{staticClass:"min-width-0 ma-0 pa-1",attrs:{depressed:"",text:"",color:"grey lighten-1"},on:{click:e.deleteClick}},[n("v-icon",[e._v("mdi-close")])],1)],1)},gn=[],kn={name:"Subtask",data:function(){return{tempContent:"",hasChanged:!1}},props:{complete:{type:Boolean,default:!1},content:{type:String,default:""}},computed:{textField:{get:function(){return this.content},set:function(e){this.hasChanged=!0,this.tempContent=e}}},watch:{content:{handler:function(){this.tempContent=this.content},immediate:!0}},methods:{deleteClick:function(){this.$emit("delete")},input:function(e){if(!("content"in e)||this.hasChanged){var t=this.complete,n=this.content;this.$emit("input",Object(H["a"])({complete:t,content:n},e)),this.hasChanged=!1}}}},Tn=kn,xn=(n("55aa"),n("ac7c")),Cn=Object(V["a"])(Tn,bn,gn,!1,null,"7ef0528a",null),_n=Cn.exports;L()(Cn,{VBtn:Qe["a"],VCheckbox:xn["a"],VIcon:lt["a"],VTextField:Pt["a"]});var jn={name:"TodoDetail",mixins:[Ee],components:{Subtask:_n,StarSelect:vn,DateSetting:dn},data:function(){return{todo:{name:"",complete:!1,star:!1,expired_date:"",remind_time:"",repeat:"",subtasks:[],remark:"",attachment:[],comments:[],create_time:""},subtaskContent:"",nameEditMode:!1,nameContent:"",commentContent:""}},computed:Object(H["a"])({},Object(N["d"])("user",["todos"]),Object(N["d"])("detailView",["currentCompleteTodo"]),Object(N["d"])("detailView",["showDetailView","currentTodo"]),Object(N["c"])("user",["userInfo"]),Object(N["c"])("detailView",["isCompleteTodo"]),{currentTodoDetail:function(){return this.isCompleteTodo?this.currentCompleteTodo:this.todos[this.currentTodo]},nameProxy:{get:function(){return this.todo.name},set:function(e){this.nameContent=e}},showComments:function(){return!(!this.todo.comments||!this.todo.comments.length)}}),watch:{currentTodoDetail:{handler:function(e){if(e){for(var t in this.clearTodo(),this.todo){var n;if(void 0!==e[t]&&null!==e[t])if(z()(this.todo[t]))(n=this.todo[t]).splice.apply(n,[0,this.todo[t].length].concat(Object(M["a"])(e[t])));else this.todo[t]=e[t]}this.$refs.scrollContainer.scrollTop=0,this.ps.update()}},immediate:!0}},mounted:function(){this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer)},methods:Object(H["a"])({},Object(N["b"])("user",["modifyTodo","deleteTodo"]),Object(N["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo"]),{enterSubtask:function(){this.subtaskContent&&(this.todo.subtasks.push({complete:!1,content:this.subtaskContent}),this.subtaskContent="",this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks}))},subtaskChange:function(e,t){this.todo.subtasks.splice(e,1,t),this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks})},removeSubtask:function(e){this.todo.subtasks.splice(e,1),this.modifyTodo({id:this.currentTodo,subtasks:this.todo.subtasks})},remarkChange:function(e){this.todo.remark=e,this.modifyTodo({id:this.currentTodo,remark:e})},refresh:function(){this.modifyTodo(Object(H["a"])({id:this.currentTodo},this.todo))},closeDetailView:function(){this.changeDetailViewVisible(!1)},clearTodo:function(){for(var e in this.todo)if(this.todo.hasOwnProperty(e))switch(Object(Gt["a"])(this.todo[e])){case"boolean":this.todo[e]=!1;break;case"string":this.todo[e]="";break;case"object":z()(this.todo[e])&&this.todo[e].splice(0,this.todo[e].length);break;default:this.todo[e]=null;break}},timeChange:function(e){var t=e.expiredDate,n=e.remindTime,r=e.repeat,o={id:this.currentTodo};void 0!==t&&(o.expired_date=t),void 0!==n&&(o.remind_time=n),void 0!==r&&(o.repeat=r),this.modifyTodo(o)},nameChange:function(){this.todo.name=this.nameContent,this.nameEditMode=!1,this.modifyTodo({id:this.currentTodo,name:this.todo.name})},addNewComment:function(){if(this.commentContent){var e=this.todo.comments;e.push({user:this.userInfo.id,name:this.userInfo.name,content:this.commentContent,time:(new Date).toISOString().substr(0,19).replace("T"," ")}),this.commentContent="",this.modifyTodo({id:this.currentTodo,comments:e})}},removeComment:function(e){var t=this.todo.comments;t.splice(e,1),this.modifyTodo({id:this.currentTodo,comments:t})},deleteClick:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it({title:"删除",message:"是否删除当前清单？"});case 2:t=e.sent,t&&(this.deleteTodo(this.currentTodo),this.changeCurrentTodo(""),this.changeDetailViewVisible(!1));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()})},On=jn,wn=(n("aa01"),n("8212")),yn=n("ce7e"),En=n("e0c7"),Dn=n("a844"),Pn=Object(V["a"])(On,$t,Ht,!1,null,"0999e9b4",null),Vn=Pn.exports;L()(Pn,{VAvatar:wn["a"],VBtn:Qe["a"],VCard:ze["a"],VCardActions:Ke["a"],VCardTitle:Ke["c"],VCheckbox:xn["a"],VDivider:yn["a"],VFlex:Ct["a"],VIcon:lt["a"],VLayout:_t["a"],VList:Ae["a"],VSubheader:En["a"],VTextField:Pt["a"],VTextarea:Dn["a"]});var Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:"","fill-height":""}},[n("v-flex",{staticStyle:{width:"100%"},attrs:{shrink:""}},[n("v-toolbar",{attrs:{flat:"",dense:"",dark:"",color:"blue-grey lighten-1"}},[n("v-toolbar-title",[e._v(e._s(e.currentFolderName))]),n("v-spacer"),n("v-toolbar-items")],1)],1),n("v-flex",{staticClass:"pa-3 blue-grey lighten-1",staticStyle:{overflow:"hidden"},attrs:{grow:""}},[n("v-layout",{staticStyle:{height:"100%"},attrs:{column:""}},[e.canAddNewTodo?n("v-flex",{attrs:{shrink:""}},[n("v-text-field",{attrs:{solo:"","prepend-inner-icon":"mdi-plus","append-icon":"mdi-send",placeholder:"添加新任务"},on:{"click:append":e.addNewTodo,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addNewTodo(t)}},model:{value:e.todoName,callback:function(t){e.todoName=t},expression:"todoName"}})],1):e._e(),n("v-flex",{ref:"scrollContainer",staticClass:"ps",staticStyle:{overflow:"hidden",height:"0",position:"relative"},attrs:{grow:""}},[n("v-list",{staticClass:"transparent"},[e._l(e.todosProxy,function(t,r){return[t.name?n("v-btn",{key:t.name+r,staticClass:"min-width-0",attrs:{text:"",small:"",dark:""}},[e._v(e._s(t.name))]):e._e(),e._l(t.todos,function(t){return n("todo-item",{key:t.id,attrs:{todo:t},on:{click:e.clickTodo,"click:checkbox":e.clickComplete,"click:star":e.clickStar}})})]}),e.isSpecialFolder?e._e():[n("v-btn",{staticClass:"min-width-0",attrs:{loading:e.completeTodo.isLoading,text:"",small:"",dark:""},on:{click:e.clickLoadingCompleteBtn}},[e._v(e._s(e.loadingCompleteBtnName))]),e._l(e.completeTodo.todos,function(t){return n("todo-item",{key:t.id,staticStyle:{opacity:"0.6"},attrs:{todo:t},on:{click:e.clickCompleteTodo,"click:checkbox":e.clickIncomplete}})})]],2)],1)],1)],1)],1)},Ln=[],Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",{staticClass:"elevation-1 my-1 todo-item",class:e.showDetailView&&e.currentTodo===e.todo.id?"todo-item-selected":"",attrs:{ripple:""},on:{click:function(t){return e.click(e.todo.id)}}},[n("v-list-item-action",{staticStyle:{"min-width":"0"}},[n("v-checkbox",{attrs:{"input-value":e.todo.complete},on:{change:function(t){return e.clickComplete(e.todo.id,t)}},nativeOn:{click:function(t){return t.stopPropagation(),e.doNothing(t)}}})],1),n("v-list-item-content",[e._v(e._s(e.todo.name))]),n("v-list-item-content",{staticClass:"mr-3",staticStyle:{flex:"0 0 auto"}},[n("span",{staticStyle:{display:"inline-flex"}},[e.todo.showExpiredDate?n("span",{staticClass:"mr-2",class:e.todo.expiredDateColor},[e._v(e._s(e.todo.expiredDate))]):e._e(),e.todo.totalSubtask?n("span",{staticClass:"mr-2",staticStyle:{display:"inline-flex"}},[n("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v("\n                    "+e._s(e.todo.reserveSubtask)+"/"+e._s(e.todo.totalSubtask)+"\n                  ")],1):e._e(),e.todo.comment?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-comment-outline")]):e._e(),e.todo.attachment?n("v-icon",{attrs:{small:""}},[e._v("mdi-attachment")]):e._e()],1)]),n("star-select",{attrs:{value:e.todo.star},on:{input:function(t){return e.clickStar(e.todo.id,t)}},nativeOn:{click:function(t){return t.stopPropagation(),e.doNothing(t)}}})],1)},In=[],Rn={name:"TodoItem",components:{StarSelect:vn},props:{todo:{required:!0}},computed:Object(H["a"])({},Object(N["d"])("user",["currentTodo","showDetailView"])),methods:{doNothing:function(){},click:function(e){this.$emit("click",e)},clickComplete:function(e,t){this.$emit("click:checkbox",{id:e,complete:t})},clickStar:function(e,t){this.$emit("click:star",{id:e,star:t})}}},An=Rn,Nn=(n("6711"),Object(V["a"])(An,Fn,In,!1,null,"54553c40",null)),Mn=Nn.exports;function $n(e){var t=e.id,n=e.name,r=e.complete,o=!!e.attachment&&e.attachment.length>0,a=e.subtasks?e.subtasks.length:0,i=a?e.subtasks.filter(function(e){return e.complete}).length:0,s=!!e.comments&&e.comments.length>0,c=!!e.expired_date,l=e.expired_date,d=ee(l,!0),u=!!e.star;return{id:t,name:n,complete:r,attachment:o,totalSubtask:a,reserveSubtask:i,comment:s,showExpiredDate:c,expiredDate:l,expiredDateColor:d,star:u}}L()(Nn,{VCheckbox:xn["a"],VIcon:lt["a"],VListItem:Ne["a"],VListItemAction:dt["a"],VListItemContent:Me["b"]});var Hn={name:"TodoList",components:{TodoItem:Mn},mixins:[Ee],data:function(){return{todoName:"",completeTodo:{isLoading:!1,isShow:!1,todos:[]}}},computed:Object(H["a"])({},Object(N["c"])("todoView",["todos","currentFolderName"]),Object(N["c"])("globalAction",["searchValid"]),Object(N["d"])("todoView",["currentFolder"]),{canAddNewTodo:function(){if(this.searchValid)return!1;switch(this.currentFolder){case"star":return!1;case"today":return!1;case"thisWeek":return!1;default:return!0}},todosProxy:function(){return this.todos.map(function(e){return Object(H["a"])({},e,{todos:e.todos.map($n)})})},isSpecialFolder:function(){return!this.canAddNewTodo},loadingCompleteBtnName:function(){return this.completeTodo.isShow?"隐藏已完成任务":"显示已完成任务"}}),watch:{currentFolder:function(){this.completeTodo.isShow=!1,this.completeTodo.todos.splice(0,this.completeTodo.todos.length),this.changeDetailViewVisible(!1)}},mounted:function(){this.getPerfectScrollbarInstance(this.$refs.scrollContainer)},methods:Object(H["a"])({},Object(N["b"])("user",["addTodo","modifyTodo","markTodoAsDone","markTodoAsUndone"]),Object(N["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo","changeCurrentCompleteTodo"]),{addNewTodo:function(){this.todoName&&(this.addTodo({name:this.todoName,folder:this.currentFolder}),this.todoName="")},clickTodo:function(e){this.changeCurrentTodo(e),this.changeDetailViewVisible(!0)},clickComplete:function(e){var t=e.id,n=e.complete;n&&this.markTodoAsDone(t)},clickStar:function(e){var t=e.id,n=e.star;this.modifyTodo({id:t,star:n})},loadingCompleteTodo:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.completeTodo.isLoading=!0,e.next=3,j({folder:this.currentFolder});case 3:n=e.sent,(t=this.completeTodo.todos).splice.apply(t,[0,this.completeTodo.todos.length].concat(Object(M["a"])(n))),this.completeTodo.isLoading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clickLoadingCompleteBtn:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.completeTodo.isShow=!this.completeTodo.isShow,this.completeTodo.isShow){e.next=4;break}return this.completeTodo.todos.splice(0,this.completeTodo.todos.length),e.abrupt("return");case 4:return e.next=6,this.loadingCompleteTodo();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clickCompleteTodo:function(e){this.changeCurrentCompleteTodo(e),this.changeDetailViewVisible(!0)},clickIncomplete:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.id,r=t.complete,!n||r){e.next=6;break}return e.next=4,this.markTodoAsUndone(n);case 4:return e.next=6,this.loadingCompleteTodo();case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()})},Gn=Hn,Yn=n("2a7f"),Un=Object(V["a"])(Gn,Sn,Ln,!1,null,"8948b26a",null),Jn=Un.exports;L()(Un,{VBtn:Qe["a"],VFlex:Ct["a"],VLayout:_t["a"],VList:Ae["a"],VSpacer:Xe["a"],VTextField:Pt["a"],VToolbar:Vt["a"],VToolbarItems:Yn["a"],VToolbarTitle:Yn["b"]});var Bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-view blue-grey lighten-5"},[n("draggable",e._b({ref:"scrollContainer",staticClass:"folder-list pa-2 ps",on:{change:e.change},model:{value:e.foldersProxy,callback:function(t){e.foldersProxy=t},expression:"foldersProxy"}},"draggable",e.dragOption,!1),e._l(e.foldersProxy,function(e){return n("folder",{key:e.id,staticClass:"mr-2",attrs:{id:e.id,name:e.name}})}),1)],1)},Wn=[],qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"project-view-folder blue-grey lighten-4 pa-2",attrs:{column:""}},[n("div",{staticClass:"folder-header project-handle"},[n("span",{staticClass:"title no-select"},[e._v(e._s(e.name))]),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:e.addNewTask}},[n("v-icon",[e._v("mdi-plus")])],1),n("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mx-0",attrs:{icon:""}},r),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{on:{click:e.reconfigFolder}},[n("v-list-item-title",[e._v("修改文件夹")])],1),n("v-list-item",{on:{click:e.deleteClick}},[n("v-list-item-title",[e._v("删除文件夹")])],1)],1)],1)],1),n("draggable",e._b({ref:"scrollContainer",staticClass:"ps",staticStyle:{position:"relative"},attrs:{tag:"div"},on:{change:e.change},model:{value:e.todosProxy,callback:function(t){e.todosProxy=t},expression:"todosProxy"}},"draggable",e.dragOption,!1),e._l(e.todosProxy,function(t){return n("v-card",{key:t.id,staticClass:"mb-2",attrs:{flat:"",ripple:""},on:{click:function(n){return e.clickTodo(t.id)},contextmenu:function(n){return e.contextmenuClick(n,t.id)}}},[n("v-card-title",{staticClass:"pa-2"},[n("div",[n("div",{staticClass:"subtitle-1 no-select mb-2"},[e._v(e._s(t.name))]),n("div",[t.totalSubtask?n("span",{staticClass:"mr-2",staticStyle:{"font-size":"0.9rem"}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v("\n              "+e._s(t.reserveSubtask)+"/"+e._s(t.totalSubtask)+"\n            ")],1):e._e(),t.star?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-star-outline")]):e._e(),t.showExpiredDate?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-calendar")]):e._e(),t.comment?n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-comment-outline")]):e._e(),t.attachment?n("v-icon",{attrs:{small:""}},[e._v("mdi-attachment")]):e._e()],1)])])],1)}),1),n("menu-items",{attrs:{menu:e.menu}})],1)},zn=[],Kn={name:"Folder",mixins:[Ee,Je],components:{Draggable:Se.a},data:function(){return{todosContent:[],snackbar:!1}},props:{id:{type:String,required:!0},name:{type:String,default:""}},computed:Object(H["a"])({},Object(N["d"])("user",["folders","todos"]),Object(N["c"])("globalAction",["paletteShow","searchValid"]),{todosProxy:{get:function(){var e=this,t=this.folders[this.id];if(!t)return[];var n=this.$store.state.globalAction.palette.input,r=t.undos.map(function(t){var n=e.todos[t],r=n.id,o=n.name,a=!!n.attachment&&n.attachment.length>0,i=n.subtasks?n.subtasks.length:0,s=i?n.subtasks.filter(function(e){return e.complete}).length:0,c=!!n.comments&&n.comments.length>0,l=!!n.expired_date,d=!!n.star;return{id:r,name:o,attachment:a,totalSubtask:i,reserveSubtask:s,comment:c,showExpiredDate:l,star:d}});return this.searchValid?r.filter(function(e){return e.name.includes(n)}):r},set:function(e){this.todosContent=Object(M["a"])(e)}},dragOption:function(){return{animation:200,disabled:!1,group:"project-folder",ghostClass:"draggable-ghost"}}}),created:function(){var e=this;this.registerMenuItem([{name:"标记为完成",callback:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.markTodoAsDone(n);case 2:case"end":return t.stop()}},t)}));function n(e){return t.apply(this,arguments)}return n}()},{name:"删除任务",callback:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it({title:"删除任务",content:"是否删除当前任务？"});case 2:r=t.sent,r&&e.deleteTodo(n);case 4:case"end":return t.stop()}},t)}));function n(e){return t.apply(this,arguments)}return n}()}])},mounted:function(){var e=this;this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer.$el),this.paletteClick=function(t){t===e.id&&(e.addTodo({name:e.$store.state.globalAction.palette.input,folder:t}),e.changePaletteShow(!1))},this.$bus.$on("palette-append-click",this.paletteClick)},beforeDestroy:function(){this.$bus.$off("palette-append-click",this.paletteClick)},methods:Object(H["a"])({},Object(N["b"])("user",["modifyFolder","deleteFolder","addTodo","deleteTodo","markTodoAsDone"]),Object(N["b"])("detailView",["changeDetailViewVisible","changeCurrentTodo"]),Object(N["b"])("globalAction",["startAddingNew","changePaletteShow"]),{change:function(){var e=this.todosContent.map(function(e){return e.id});this.modifyFolder({id:this.id,undos:e})},clickTodo:function(e){this.changeCurrentTodo(e),this.changeDetailViewVisible(!0)},deleteClick:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it({title:"删除",message:"是否删除文件夹？"});case 2:t=e.sent,t&&this.deleteFolder(this.id);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addNewTask:function(){this.paletteShow&&this.changePaletteShow(!1),this.startAddingNew({placeholder:"".concat(this.name,": 添加新任务"),extra:this.id})},reconfigFolder:function(){this.$bus.$emit("folder-project-reconfig",{type:"folder",id:this.id})}})},Xn=Kn,Qn=(n("c31a"),n("5115"),Object(V["a"])(Xn,qn,zn,!1,null,"0ceab08a",null)),Zn=Qn.exports;L()(Qn,{VBtn:Qe["a"],VCard:ze["a"],VCardTitle:Ke["c"],VIcon:lt["a"],VLayout:_t["a"],VList:Ae["a"],VListItem:Ne["a"],VListItemTitle:Me["c"],VMenu:$e["a"]});var er={name:"Project",mixins:[Ee],components:{Folder:Zn,Draggable:Se.a},data:function(){return{foldersContent:[]}},computed:Object(H["a"])({},Object(N["c"])("projectView",["currentProjectFolders"]),Object(N["d"])("projectView",["currentProject"]),{foldersProxy:{get:function(){return this.currentProjectFolders},set:function(e){this.foldersContent=Object(M["a"])(e)}},dragOption:function(){return{animation:200,disabled:!1,group:"project",ghostClass:"draggable-ghost",handle:".project-handle"}}}),mounted:function(){this.ps=this.getPerfectScrollbarInstance(this.$refs.scrollContainer.$el)},methods:Object(H["a"])({},Object(N["b"])("user",["modifyProject"]),{change:function(e){if(e.moved){var t=this.foldersContent.map(function(e){return e.id});this.modifyProject({folders:t,id:this.currentProject})}}})},tr=er,nr=(n("016c"),Object(V["a"])(tr,Bn,Wn,!1,null,"ff579dfe",null)),rr=nr.exports;r["a"].use(A["a"]);var or=function(e,t,n){"todo"===e.name?Te.dispatch("user/switchTodoView",!0):Te.dispatch("user/switchTodoView",!1),n()},ar=new A["a"]({routes:[{path:"/",name:"home",component:Mt,redirect:"/todo",children:[{name:"todo",path:"todo",beforeEnter:or,components:{default:Jn,todoDetail:Vn}},{name:"project",path:"project",beforeEnter:or,components:{default:rr,todoDetail:Vn}}]}]}),ir=n("9483");Object(ir["a"])("".concat("/TodoProject/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d5e8"),n("5363"),n("7da8"),n("000c");var sr=n("3f4f");window.Vue=r["a"],window.idb=sr,window.initDB=h,window.dbHelper=b,r["a"].config.productionTip=!1,r["a"].config.devtools=!1,new r["a"]({router:ar,store:Te,vuetify:s,render:function(e){return e(R)}}).$mount("#app")},"59f0":function(e,t,n){},"5bde":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("6879"),o=n.n(r);o.a},6711:function(e,t,n){"use strict";var r=n("23a3"),o=n.n(r);o.a},6879:function(e,t,n){},"68ab":function(e,t,n){},"99a0":function(e,t,n){},"9dc1":function(e,t,n){"use strict";var r=n("4712"),o=n.n(r);o.a},aa01:function(e,t,n){"use strict";var r=n("08aa"),o=n.n(r);o.a},ab05:function(e,t,n){"use strict";var r=n("59f0"),o=n.n(r);o.a},b9a9:function(e,t,n){"use strict";var r=n("d5e6"),o=n.n(r);o.a},c31a:function(e,t,n){"use strict";var r=n("5bde"),o=n.n(r);o.a},d5e6:function(e,t,n){},eb77:function(e,t,n){}});
//# sourceMappingURL=app.f70b8e88.js.map